import EventEmitter from "events"
import { z } from "zod"
import { TaskStatus } from "./task.js"
/**
 * JWTPayload
 */
export interface JWTPayload {
	iss?: string
	sub?: string
	exp?: number
	iat?: number
	nbf?: number
	v?: number
	r?: {
		u?: string
		o?: string
		t?: string
	}
}
/**
 * CloudUserInfo
 */
export interface CloudUserInfo {
	id?: string
	name?: string
	email?: string
	picture?: string
	organizationId?: string
	organizationName?: string
	organizationRole?: string
	organizationImageUrl?: string
	extensionBridgeEnabled?: boolean
}
/**
 * CloudOrganization
 */
export interface CloudOrganization {
	id: string
	name: string
	slug?: string
	image_url?: string
	has_image?: boolean
	created_at?: number
	updated_at?: number
}
/**
 * CloudOrganizationMembership
 */
export interface CloudOrganizationMembership {
	id: string
	organization: CloudOrganization
	role: string
	permissions?: string[]
	created_at?: number
	updated_at?: number
}
/**
 * OrganizationAllowList
 */
export declare const organizationAllowListSchema: z.ZodObject<
	{
		allowAll: z.ZodBoolean
		providers: z.ZodRecord<
			z.ZodString,
			z.ZodObject<
				{
					allowAll: z.ZodBoolean
					models: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
				},
				"strip",
				z.ZodTypeAny,
				{
					allowAll: boolean
					models?: string[] | undefined
				},
				{
					allowAll: boolean
					models?: string[] | undefined
				}
			>
		>
	},
	"strip",
	z.ZodTypeAny,
	{
		allowAll: boolean
		providers: Record<
			string,
			{
				allowAll: boolean
				models?: string[] | undefined
			}
		>
	},
	{
		allowAll: boolean
		providers: Record<
			string,
			{
				allowAll: boolean
				models?: string[] | undefined
			}
		>
	}
>
export type OrganizationAllowList = z.infer<typeof organizationAllowListSchema>
/**
 * OrganizationDefaultSettings
 */
export declare const organizationDefaultSettingsSchema: z.ZodObject<
	{
		fuzzyMatchThreshold: z.ZodOptional<z.ZodNumber>
		enableCheckpoints: z.ZodOptional<z.ZodBoolean>
		showRooIgnoredFiles: z.ZodOptional<z.ZodBoolean>
		terminalShellIntegrationDisabled: z.ZodOptional<z.ZodBoolean>
		terminalZshClearEolMark: z.ZodOptional<z.ZodBoolean>
		terminalCompressProgressBar: z.ZodOptional<z.ZodBoolean>
	} & {
		maxOpenTabsContext: z.ZodOptional<z.ZodNumber>
		maxReadFileLine: z.ZodOptional<z.ZodNumber>
		maxWorkspaceFiles: z.ZodOptional<z.ZodNumber>
		terminalCommandDelay: z.ZodOptional<z.ZodNumber>
		terminalOutputLineLimit: z.ZodOptional<z.ZodNumber>
		terminalShellIntegrationTimeout: z.ZodOptional<z.ZodNumber>
	},
	"strip",
	z.ZodTypeAny,
	{
		fuzzyMatchThreshold?: number | undefined
		enableCheckpoints?: boolean | undefined
		maxOpenTabsContext?: number | undefined
		maxWorkspaceFiles?: number | undefined
		showRooIgnoredFiles?: boolean | undefined
		maxReadFileLine?: number | undefined
		terminalOutputLineLimit?: number | undefined
		terminalShellIntegrationTimeout?: number | undefined
		terminalShellIntegrationDisabled?: boolean | undefined
		terminalCommandDelay?: number | undefined
		terminalZshClearEolMark?: boolean | undefined
		terminalCompressProgressBar?: boolean | undefined
	},
	{
		fuzzyMatchThreshold?: number | undefined
		enableCheckpoints?: boolean | undefined
		maxOpenTabsContext?: number | undefined
		maxWorkspaceFiles?: number | undefined
		showRooIgnoredFiles?: boolean | undefined
		maxReadFileLine?: number | undefined
		terminalOutputLineLimit?: number | undefined
		terminalShellIntegrationTimeout?: number | undefined
		terminalShellIntegrationDisabled?: boolean | undefined
		terminalCommandDelay?: number | undefined
		terminalZshClearEolMark?: boolean | undefined
		terminalCompressProgressBar?: boolean | undefined
	}
>
export type OrganizationDefaultSettings = z.infer<typeof organizationDefaultSettingsSchema>
/**
 * OrganizationCloudSettings
 */
export declare const organizationCloudSettingsSchema: z.ZodObject<
	{
		recordTaskMessages: z.ZodOptional<z.ZodBoolean>
		enableTaskSharing: z.ZodOptional<z.ZodBoolean>
		taskShareExpirationDays: z.ZodOptional<z.ZodNumber>
		allowMembersViewAllTasks: z.ZodOptional<z.ZodBoolean>
	},
	"strip",
	z.ZodTypeAny,
	{
		recordTaskMessages?: boolean | undefined
		enableTaskSharing?: boolean | undefined
		taskShareExpirationDays?: number | undefined
		allowMembersViewAllTasks?: boolean | undefined
	},
	{
		recordTaskMessages?: boolean | undefined
		enableTaskSharing?: boolean | undefined
		taskShareExpirationDays?: number | undefined
		allowMembersViewAllTasks?: boolean | undefined
	}
>
export type OrganizationCloudSettings = z.infer<typeof organizationCloudSettingsSchema>
/**
 * OrganizationFeatures
 */
export declare const organizationFeaturesSchema: z.ZodObject<
	{
		roomoteControlEnabled: z.ZodOptional<z.ZodBoolean>
	},
	"strip",
	z.ZodTypeAny,
	{
		roomoteControlEnabled?: boolean | undefined
	},
	{
		roomoteControlEnabled?: boolean | undefined
	}
>
export type OrganizationFeatures = z.infer<typeof organizationFeaturesSchema>
/**
 * OrganizationSettings
 */
export declare const organizationSettingsSchema: z.ZodObject<
	{
		version: z.ZodNumber
		cloudSettings: z.ZodOptional<
			z.ZodObject<
				{
					recordTaskMessages: z.ZodOptional<z.ZodBoolean>
					enableTaskSharing: z.ZodOptional<z.ZodBoolean>
					taskShareExpirationDays: z.ZodOptional<z.ZodNumber>
					allowMembersViewAllTasks: z.ZodOptional<z.ZodBoolean>
				},
				"strip",
				z.ZodTypeAny,
				{
					recordTaskMessages?: boolean | undefined
					enableTaskSharing?: boolean | undefined
					taskShareExpirationDays?: number | undefined
					allowMembersViewAllTasks?: boolean | undefined
				},
				{
					recordTaskMessages?: boolean | undefined
					enableTaskSharing?: boolean | undefined
					taskShareExpirationDays?: number | undefined
					allowMembersViewAllTasks?: boolean | undefined
				}
			>
		>
		defaultSettings: z.ZodObject<
			{
				fuzzyMatchThreshold: z.ZodOptional<z.ZodNumber>
				enableCheckpoints: z.ZodOptional<z.ZodBoolean>
				showRooIgnoredFiles: z.ZodOptional<z.ZodBoolean>
				terminalShellIntegrationDisabled: z.ZodOptional<z.ZodBoolean>
				terminalZshClearEolMark: z.ZodOptional<z.ZodBoolean>
				terminalCompressProgressBar: z.ZodOptional<z.ZodBoolean>
			} & {
				maxOpenTabsContext: z.ZodOptional<z.ZodNumber>
				maxReadFileLine: z.ZodOptional<z.ZodNumber>
				maxWorkspaceFiles: z.ZodOptional<z.ZodNumber>
				terminalCommandDelay: z.ZodOptional<z.ZodNumber>
				terminalOutputLineLimit: z.ZodOptional<z.ZodNumber>
				terminalShellIntegrationTimeout: z.ZodOptional<z.ZodNumber>
			},
			"strip",
			z.ZodTypeAny,
			{
				fuzzyMatchThreshold?: number | undefined
				enableCheckpoints?: boolean | undefined
				maxOpenTabsContext?: number | undefined
				maxWorkspaceFiles?: number | undefined
				showRooIgnoredFiles?: boolean | undefined
				maxReadFileLine?: number | undefined
				terminalOutputLineLimit?: number | undefined
				terminalShellIntegrationTimeout?: number | undefined
				terminalShellIntegrationDisabled?: boolean | undefined
				terminalCommandDelay?: number | undefined
				terminalZshClearEolMark?: boolean | undefined
				terminalCompressProgressBar?: boolean | undefined
			},
			{
				fuzzyMatchThreshold?: number | undefined
				enableCheckpoints?: boolean | undefined
				maxOpenTabsContext?: number | undefined
				maxWorkspaceFiles?: number | undefined
				showRooIgnoredFiles?: boolean | undefined
				maxReadFileLine?: number | undefined
				terminalOutputLineLimit?: number | undefined
				terminalShellIntegrationTimeout?: number | undefined
				terminalShellIntegrationDisabled?: boolean | undefined
				terminalCommandDelay?: number | undefined
				terminalZshClearEolMark?: boolean | undefined
				terminalCompressProgressBar?: boolean | undefined
			}
		>
		allowList: z.ZodObject<
			{
				allowAll: z.ZodBoolean
				providers: z.ZodRecord<
					z.ZodString,
					z.ZodObject<
						{
							allowAll: z.ZodBoolean
							models: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
						},
						"strip",
						z.ZodTypeAny,
						{
							allowAll: boolean
							models?: string[] | undefined
						},
						{
							allowAll: boolean
							models?: string[] | undefined
						}
					>
				>
			},
			"strip",
			z.ZodTypeAny,
			{
				allowAll: boolean
				providers: Record<
					string,
					{
						allowAll: boolean
						models?: string[] | undefined
					}
				>
			},
			{
				allowAll: boolean
				providers: Record<
					string,
					{
						allowAll: boolean
						models?: string[] | undefined
					}
				>
			}
		>
		features: z.ZodOptional<
			z.ZodObject<
				{
					roomoteControlEnabled: z.ZodOptional<z.ZodBoolean>
				},
				"strip",
				z.ZodTypeAny,
				{
					roomoteControlEnabled?: boolean | undefined
				},
				{
					roomoteControlEnabled?: boolean | undefined
				}
			>
		>
		hiddenMcps: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
		hideMarketplaceMcps: z.ZodOptional<z.ZodBoolean>
		mcps: z.ZodOptional<
			z.ZodArray<
				z.ZodObject<
					{
						id: z.ZodString
						name: z.ZodString
						description: z.ZodString
						author: z.ZodOptional<z.ZodString>
						authorUrl: z.ZodOptional<z.ZodString>
						tags: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
						prerequisites: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
					} & {
						url: z.ZodString
						content: z.ZodUnion<
							[
								z.ZodString,
								z.ZodArray<
									z.ZodObject<
										{
											name: z.ZodString
											content: z.ZodString
											parameters: z.ZodOptional<
												z.ZodArray<
													z.ZodObject<
														{
															name: z.ZodString
															key: z.ZodString
															placeholder: z.ZodOptional<z.ZodString>
															optional: z.ZodDefault<z.ZodOptional<z.ZodBoolean>>
														},
														"strip",
														z.ZodTypeAny,
														{
															name: string
															key: string
															optional: boolean
															placeholder?: string | undefined
														},
														{
															name: string
															key: string
															placeholder?: string | undefined
															optional?: boolean | undefined
														}
													>,
													"many"
												>
											>
											prerequisites: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
										},
										"strip",
										z.ZodTypeAny,
										{
											name: string
											content: string
											parameters?:
												| {
														name: string
														key: string
														optional: boolean
														placeholder?: string | undefined
												  }[]
												| undefined
											prerequisites?: string[] | undefined
										},
										{
											name: string
											content: string
											parameters?:
												| {
														name: string
														key: string
														placeholder?: string | undefined
														optional?: boolean | undefined
												  }[]
												| undefined
											prerequisites?: string[] | undefined
										}
									>,
									"many"
								>,
							]
						>
						parameters: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										name: z.ZodString
										key: z.ZodString
										placeholder: z.ZodOptional<z.ZodString>
										optional: z.ZodDefault<z.ZodOptional<z.ZodBoolean>>
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										key: string
										optional: boolean
										placeholder?: string | undefined
									},
									{
										name: string
										key: string
										placeholder?: string | undefined
										optional?: boolean | undefined
									}
								>,
								"many"
							>
						>
					},
					"strip",
					z.ZodTypeAny,
					{
						id: string
						name: string
						description: string
						url: string
						content:
							| string
							| {
									name: string
									content: string
									parameters?:
										| {
												name: string
												key: string
												optional: boolean
												placeholder?: string | undefined
										  }[]
										| undefined
									prerequisites?: string[] | undefined
							  }[]
						tags?: string[] | undefined
						parameters?:
							| {
									name: string
									key: string
									optional: boolean
									placeholder?: string | undefined
							  }[]
							| undefined
						prerequisites?: string[] | undefined
						author?: string | undefined
						authorUrl?: string | undefined
					},
					{
						id: string
						name: string
						description: string
						url: string
						content:
							| string
							| {
									name: string
									content: string
									parameters?:
										| {
												name: string
												key: string
												placeholder?: string | undefined
												optional?: boolean | undefined
										  }[]
										| undefined
									prerequisites?: string[] | undefined
							  }[]
						tags?: string[] | undefined
						parameters?:
							| {
									name: string
									key: string
									placeholder?: string | undefined
									optional?: boolean | undefined
							  }[]
							| undefined
						prerequisites?: string[] | undefined
						author?: string | undefined
						authorUrl?: string | undefined
					}
				>,
				"many"
			>
		>
		providerProfiles: z.ZodOptional<
			z.ZodRecord<
				z.ZodString,
				z.ZodObject<
					{
						codeIndexOpenAiKey: z.ZodOptional<z.ZodString>
						codeIndexQdrantApiKey: z.ZodOptional<z.ZodString>
						codebaseIndexOpenAiCompatibleBaseUrl: z.ZodOptional<z.ZodString>
						codebaseIndexOpenAiCompatibleApiKey: z.ZodOptional<z.ZodString>
						codebaseIndexOpenAiCompatibleModelDimension: z.ZodOptional<z.ZodNumber>
						codebaseIndexGeminiApiKey: z.ZodOptional<z.ZodString>
						codebaseIndexMistralApiKey: z.ZodOptional<z.ZodString>
						codebaseIndexVercelAiGatewayApiKey: z.ZodOptional<z.ZodString>
						codebaseIndexOpenRouterApiKey: z.ZodOptional<z.ZodString>
						profileType: z.ZodOptional<z.ZodEnum<["chat", "autocomplete"]>>
						includeMaxTokens: z.ZodOptional<z.ZodBoolean>
						diffEnabled: z.ZodOptional<z.ZodBoolean>
						todoListEnabled: z.ZodOptional<z.ZodBoolean>
						fuzzyMatchThreshold: z.ZodOptional<z.ZodNumber>
						modelTemperature: z.ZodOptional<z.ZodNullable<z.ZodNumber>>
						rateLimitSeconds: z.ZodOptional<z.ZodNumber>
						rateLimitAfter: z.ZodOptional<z.ZodBoolean>
						consecutiveMistakeLimit: z.ZodOptional<z.ZodNumber>
						enableReasoningEffort: z.ZodOptional<z.ZodBoolean>
						reasoningEffort: z.ZodOptional<
							z.ZodEnum<["disable", "none", "minimal", "low", "medium", "high"]>
						>
						modelMaxTokens: z.ZodOptional<z.ZodNumber>
						modelMaxThinkingTokens: z.ZodOptional<z.ZodNumber>
						verbosity: z.ZodOptional<z.ZodEnum<["low", "medium", "high"]>>
						toolStyle: z.ZodOptional<z.ZodEnum<["xml", "json"]>>
						sapAiCoreServiceKey: z.ZodOptional<z.ZodString>
						sapAiCoreResourceGroup: z.ZodOptional<z.ZodString>
						sapAiCoreUseOrchestration: z.ZodOptional<z.ZodBoolean>
						sapAiCoreModelId: z.ZodOptional<z.ZodString>
						sapAiCoreDeploymentId: z.ZodOptional<z.ZodString>
						sapAiCoreCustomModelInfo: z.ZodOptional<
							z.ZodNullable<
								z.ZodObject<
									{
										maxTokens: z.ZodOptional<z.ZodNullable<z.ZodNumber>>
										maxThinkingTokens: z.ZodOptional<z.ZodNullable<z.ZodNumber>>
										contextWindow: z.ZodNumber
										supportsImages: z.ZodOptional<z.ZodBoolean>
										supportsComputerUse: z.ZodOptional<z.ZodBoolean>
										supportsPromptCache: z.ZodBoolean
										promptCacheRetention: z.ZodOptional<z.ZodEnum<["in_memory", "24h"]>>
										supportsVerbosity: z.ZodOptional<z.ZodBoolean>
										supportsReasoningBudget: z.ZodOptional<z.ZodBoolean>
										supportsReasoningBinary: z.ZodOptional<z.ZodBoolean>
										supportsTemperature: z.ZodOptional<z.ZodBoolean>
										defaultTemperature: z.ZodOptional<z.ZodNumber>
										requiredReasoningBudget: z.ZodOptional<z.ZodBoolean>
										supportsReasoningEffort: z.ZodOptional<
											z.ZodUnion<
												[
													z.ZodBoolean,
													z.ZodArray<
														z.ZodEnum<
															["disable", "none", "minimal", "low", "medium", "high"]
														>,
														"many"
													>,
												]
											>
										>
										requiredReasoningEffort: z.ZodOptional<z.ZodBoolean>
										preserveReasoning: z.ZodOptional<z.ZodBoolean>
										supportedParameters: z.ZodOptional<
											z.ZodArray<
												z.ZodEnum<
													["max_tokens", "temperature", "reasoning", "include_reasoning"]
												>,
												"many"
											>
										>
										inputPrice: z.ZodOptional<z.ZodNumber>
										outputPrice: z.ZodOptional<z.ZodNumber>
										cacheWritesPrice: z.ZodOptional<z.ZodNumber>
										cacheReadsPrice: z.ZodOptional<z.ZodNumber>
										description: z.ZodOptional<z.ZodString>
										reasoningEffort: z.ZodOptional<
											z.ZodEnum<["none", "minimal", "low", "medium", "high"]>
										>
										minTokensPerCachePoint: z.ZodOptional<z.ZodNumber>
										maxCachePoints: z.ZodOptional<z.ZodNumber>
										cachableFields: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
										displayName: z.ZodOptional<z.ZodNullable<z.ZodString>>
										preferredIndex: z.ZodOptional<z.ZodNullable<z.ZodNumber>>
										deprecated: z.ZodOptional<z.ZodBoolean>
										isFree: z.ZodOptional<z.ZodBoolean>
										supportsNativeTools: z.ZodOptional<z.ZodBoolean>
										tiers: z.ZodOptional<
											z.ZodArray<
												z.ZodObject<
													{
														name: z.ZodOptional<z.ZodEnum<["default", "flex", "priority"]>>
														contextWindow: z.ZodNumber
														inputPrice: z.ZodOptional<z.ZodNumber>
														outputPrice: z.ZodOptional<z.ZodNumber>
														cacheWritesPrice: z.ZodOptional<z.ZodNumber>
														cacheReadsPrice: z.ZodOptional<z.ZodNumber>
													},
													"strip",
													z.ZodTypeAny,
													{
														contextWindow: number
														name?: "default" | "flex" | "priority" | undefined
														inputPrice?: number | undefined
														outputPrice?: number | undefined
														cacheWritesPrice?: number | undefined
														cacheReadsPrice?: number | undefined
													},
													{
														contextWindow: number
														name?: "default" | "flex" | "priority" | undefined
														inputPrice?: number | undefined
														outputPrice?: number | undefined
														cacheWritesPrice?: number | undefined
														cacheReadsPrice?: number | undefined
													}
												>,
												"many"
											>
										>
									},
									"strip",
									z.ZodTypeAny,
									{
										contextWindow: number
										supportsPromptCache: boolean
										maxTokens?: number | null | undefined
										maxThinkingTokens?: number | null | undefined
										supportsImages?: boolean | undefined
										supportsComputerUse?: boolean | undefined
										promptCacheRetention?: "in_memory" | "24h" | undefined
										supportsVerbosity?: boolean | undefined
										supportsReasoningBudget?: boolean | undefined
										supportsReasoningBinary?: boolean | undefined
										supportsTemperature?: boolean | undefined
										defaultTemperature?: number | undefined
										requiredReasoningBudget?: boolean | undefined
										supportsReasoningEffort?:
											| boolean
											| ("low" | "medium" | "high" | "minimal" | "none" | "disable")[]
											| undefined
										requiredReasoningEffort?: boolean | undefined
										preserveReasoning?: boolean | undefined
										supportedParameters?:
											| ("reasoning" | "max_tokens" | "temperature" | "include_reasoning")[]
											| undefined
										inputPrice?: number | undefined
										outputPrice?: number | undefined
										cacheWritesPrice?: number | undefined
										cacheReadsPrice?: number | undefined
										description?: string | undefined
										reasoningEffort?: "low" | "medium" | "high" | "minimal" | "none" | undefined
										minTokensPerCachePoint?: number | undefined
										maxCachePoints?: number | undefined
										cachableFields?: string[] | undefined
										displayName?: string | null | undefined
										preferredIndex?: number | null | undefined
										deprecated?: boolean | undefined
										isFree?: boolean | undefined
										supportsNativeTools?: boolean | undefined
										tiers?:
											| {
													contextWindow: number
													name?: "default" | "flex" | "priority" | undefined
													inputPrice?: number | undefined
													outputPrice?: number | undefined
													cacheWritesPrice?: number | undefined
													cacheReadsPrice?: number | undefined
											  }[]
											| undefined
									},
									{
										contextWindow: number
										supportsPromptCache: boolean
										maxTokens?: number | null | undefined
										maxThinkingTokens?: number | null | undefined
										supportsImages?: boolean | undefined
										supportsComputerUse?: boolean | undefined
										promptCacheRetention?: "in_memory" | "24h" | undefined
										supportsVerbosity?: boolean | undefined
										supportsReasoningBudget?: boolean | undefined
										supportsReasoningBinary?: boolean | undefined
										supportsTemperature?: boolean | undefined
										defaultTemperature?: number | undefined
										requiredReasoningBudget?: boolean | undefined
										supportsReasoningEffort?:
											| boolean
											| ("low" | "medium" | "high" | "minimal" | "none" | "disable")[]
											| undefined
										requiredReasoningEffort?: boolean | undefined
										preserveReasoning?: boolean | undefined
										supportedParameters?:
											| ("reasoning" | "max_tokens" | "temperature" | "include_reasoning")[]
											| undefined
										inputPrice?: number | undefined
										outputPrice?: number | undefined
										cacheWritesPrice?: number | undefined
										cacheReadsPrice?: number | undefined
										description?: string | undefined
										reasoningEffort?: "low" | "medium" | "high" | "minimal" | "none" | undefined
										minTokensPerCachePoint?: number | undefined
										maxCachePoints?: number | undefined
										cachableFields?: string[] | undefined
										displayName?: string | null | undefined
										preferredIndex?: number | null | undefined
										deprecated?: boolean | undefined
										isFree?: boolean | undefined
										supportsNativeTools?: boolean | undefined
										tiers?:
											| {
													contextWindow: number
													name?: "default" | "flex" | "priority" | undefined
													inputPrice?: number | undefined
													outputPrice?: number | undefined
													cacheWritesPrice?: number | undefined
													cacheReadsPrice?: number | undefined
											  }[]
											| undefined
									}
								>
							>
						>
						vercelAiGatewayApiKey: z.ZodOptional<z.ZodString>
						vercelAiGatewayModelId: z.ZodOptional<z.ZodString>
						apiModelId: z.ZodOptional<z.ZodString>
						qwenCodeOauthPath: z.ZodOptional<z.ZodString>
						ioIntelligenceModelId: z.ZodOptional<z.ZodString>
						ioIntelligenceApiKey: z.ZodOptional<z.ZodString>
						featherlessApiKey: z.ZodOptional<z.ZodString>
						fireworksApiKey: z.ZodOptional<z.ZodString>
						zaiApiKey: z.ZodOptional<z.ZodString>
						zaiApiLine: z.ZodOptional<z.ZodEnum<["international_coding", "china_coding"]>>
						sambaNovaApiKey: z.ZodOptional<z.ZodString>
						cerebrasApiKey: z.ZodOptional<z.ZodString>
						litellmBaseUrl: z.ZodOptional<z.ZodString>
						litellmApiKey: z.ZodOptional<z.ZodString>
						litellmModelId: z.ZodOptional<z.ZodString>
						litellmUsePromptCache: z.ZodOptional<z.ZodBoolean>
						chutesApiKey: z.ZodOptional<z.ZodString>
						huggingFaceApiKey: z.ZodOptional<z.ZodString>
						huggingFaceModelId: z.ZodOptional<z.ZodString>
						huggingFaceInferenceProvider: z.ZodOptional<z.ZodString>
						groqApiKey: z.ZodOptional<z.ZodString>
						xaiApiKey: z.ZodOptional<z.ZodString>
						fakeAi: z.ZodOptional<z.ZodUnknown>
						requestyBaseUrl: z.ZodOptional<z.ZodString>
						requestyApiKey: z.ZodOptional<z.ZodString>
						requestyModelId: z.ZodOptional<z.ZodString>
						unboundApiKey: z.ZodOptional<z.ZodString>
						unboundModelId: z.ZodOptional<z.ZodString>
						minimaxBaseUrl: z.ZodOptional<
							z.ZodUnion<
								[
									z.ZodLiteral<"https://api.minimax.io/anthropic">,
									z.ZodLiteral<"https://api.minimaxi.com/anthropic">,
								]
							>
						>
						minimaxApiKey: z.ZodOptional<z.ZodString>
						moonshotBaseUrl: z.ZodOptional<
							z.ZodUnion<
								[z.ZodLiteral<"https://api.moonshot.ai/v1">, z.ZodLiteral<"https://api.moonshot.cn/v1">]
							>
						>
						moonshotApiKey: z.ZodOptional<z.ZodString>
						doubaoBaseUrl: z.ZodOptional<z.ZodString>
						doubaoApiKey: z.ZodOptional<z.ZodString>
						deepInfraBaseUrl: z.ZodOptional<z.ZodString>
						deepInfraApiKey: z.ZodOptional<z.ZodString>
						deepInfraModelId: z.ZodOptional<z.ZodString>
						deepSeekBaseUrl: z.ZodOptional<z.ZodString>
						deepSeekApiKey: z.ZodOptional<z.ZodString>
						mistralApiKey: z.ZodOptional<z.ZodString>
						mistralCodestralUrl: z.ZodOptional<z.ZodString>
						openAiNativeApiKey: z.ZodOptional<z.ZodString>
						openAiNativeBaseUrl: z.ZodOptional<z.ZodString>
						openAiNativeServiceTier: z.ZodOptional<z.ZodEnum<["default", "flex", "priority"]>>
						inceptionLabsBaseUrl: z.ZodOptional<z.ZodString>
						inceptionLabsApiKey: z.ZodOptional<z.ZodString>
						inceptionLabsModelId: z.ZodOptional<z.ZodString>
						ovhCloudAiEndpointsApiKey: z.ZodOptional<z.ZodString>
						ovhCloudAiEndpointsModelId: z.ZodOptional<z.ZodString>
						ovhCloudAiEndpointsBaseUrl: z.ZodOptional<z.ZodString>
						syntheticApiKey: z.ZodOptional<z.ZodString>
						profiles: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										profileName: z.ZodOptional<z.ZodString>
										profileId: z.ZodOptional<z.ZodString>
										profileLimits: z.ZodOptional<
											z.ZodObject<
												{
													tokensPerMinute: z.ZodOptional<z.ZodNumber>
													tokensPerHour: z.ZodOptional<z.ZodNumber>
													tokensPerDay: z.ZodOptional<z.ZodNumber>
													requestsPerMinute: z.ZodOptional<z.ZodNumber>
													requestsPerHour: z.ZodOptional<z.ZodNumber>
													requestsPerDay: z.ZodOptional<z.ZodNumber>
												},
												"strip",
												z.ZodTypeAny,
												{
													tokensPerMinute?: number | undefined
													tokensPerHour?: number | undefined
													tokensPerDay?: number | undefined
													requestsPerMinute?: number | undefined
													requestsPerHour?: number | undefined
													requestsPerDay?: number | undefined
												},
												{
													tokensPerMinute?: number | undefined
													tokensPerHour?: number | undefined
													tokensPerDay?: number | undefined
													requestsPerMinute?: number | undefined
													requestsPerHour?: number | undefined
													requestsPerDay?: number | undefined
												}
											>
										>
									},
									"strip",
									z.ZodTypeAny,
									{
										profileName?: string | undefined
										profileId?: string | undefined
										profileLimits?:
											| {
													tokensPerMinute?: number | undefined
													tokensPerHour?: number | undefined
													tokensPerDay?: number | undefined
													requestsPerMinute?: number | undefined
													requestsPerHour?: number | undefined
													requestsPerDay?: number | undefined
											  }
											| undefined
									},
									{
										profileName?: string | undefined
										profileId?: string | undefined
										profileLimits?:
											| {
													tokensPerMinute?: number | undefined
													tokensPerHour?: number | undefined
													tokensPerDay?: number | undefined
													requestsPerMinute?: number | undefined
													requestsPerHour?: number | undefined
													requestsPerDay?: number | undefined
											  }
											| undefined
									}
								>,
								"many"
							>
						>
						kilocodeToken: z.ZodOptional<z.ZodString>
						kilocodeOrganizationId: z.ZodOptional<z.ZodString>
						kilocodeModel: z.ZodOptional<z.ZodString>
						openRouterSpecificProvider: z.ZodOptional<z.ZodString>
						openRouterProviderDataCollection: z.ZodOptional<z.ZodEnum<["allow", "deny"]>>
						openRouterProviderSort: z.ZodOptional<z.ZodEnum<["price", "throughput", "latency"]>>
						openRouterZdr: z.ZodOptional<z.ZodBoolean>
						kilocodeTesterWarningsDisabledUntil: z.ZodOptional<z.ZodNumber>
						geminiCliOAuthPath: z.ZodOptional<z.ZodString>
						geminiCliProjectId: z.ZodOptional<z.ZodString>
						geminiApiKey: z.ZodOptional<z.ZodString>
						googleGeminiBaseUrl: z.ZodOptional<z.ZodString>
						enableUrlContext: z.ZodOptional<z.ZodBoolean>
						enableGrounding: z.ZodOptional<z.ZodBoolean>
						lmStudioModelId: z.ZodOptional<z.ZodString>
						lmStudioBaseUrl: z.ZodOptional<z.ZodString>
						lmStudioDraftModelId: z.ZodOptional<z.ZodString>
						lmStudioSpeculativeDecodingEnabled: z.ZodOptional<z.ZodBoolean>
						vsCodeLmModelSelector: z.ZodOptional<
							z.ZodObject<
								{
									vendor: z.ZodOptional<z.ZodString>
									family: z.ZodOptional<z.ZodString>
									version: z.ZodOptional<z.ZodString>
									id: z.ZodOptional<z.ZodString>
								},
								"strip",
								z.ZodTypeAny,
								{
									id?: string | undefined
									family?: string | undefined
									version?: string | undefined
									vendor?: string | undefined
								},
								{
									id?: string | undefined
									family?: string | undefined
									version?: string | undefined
									vendor?: string | undefined
								}
							>
						>
						ollamaModelId: z.ZodOptional<z.ZodString>
						ollamaBaseUrl: z.ZodOptional<z.ZodString>
						ollamaApiKey: z.ZodOptional<z.ZodString>
						ollamaNumCtx: z.ZodOptional<z.ZodNumber>
						openAiBaseUrl: z.ZodOptional<z.ZodString>
						openAiApiKey: z.ZodOptional<z.ZodString>
						openAiLegacyFormat: z.ZodOptional<z.ZodBoolean>
						openAiR1FormatEnabled: z.ZodOptional<z.ZodBoolean>
						openAiModelId: z.ZodOptional<z.ZodString>
						openAiCustomModelInfo: z.ZodOptional<
							z.ZodNullable<
								z.ZodObject<
									{
										maxTokens: z.ZodOptional<z.ZodNullable<z.ZodNumber>>
										maxThinkingTokens: z.ZodOptional<z.ZodNullable<z.ZodNumber>>
										contextWindow: z.ZodNumber
										supportsImages: z.ZodOptional<z.ZodBoolean>
										supportsComputerUse: z.ZodOptional<z.ZodBoolean>
										supportsPromptCache: z.ZodBoolean
										promptCacheRetention: z.ZodOptional<z.ZodEnum<["in_memory", "24h"]>>
										supportsVerbosity: z.ZodOptional<z.ZodBoolean>
										supportsReasoningBudget: z.ZodOptional<z.ZodBoolean>
										supportsReasoningBinary: z.ZodOptional<z.ZodBoolean>
										supportsTemperature: z.ZodOptional<z.ZodBoolean>
										defaultTemperature: z.ZodOptional<z.ZodNumber>
										requiredReasoningBudget: z.ZodOptional<z.ZodBoolean>
										supportsReasoningEffort: z.ZodOptional<
											z.ZodUnion<
												[
													z.ZodBoolean,
													z.ZodArray<
														z.ZodEnum<
															["disable", "none", "minimal", "low", "medium", "high"]
														>,
														"many"
													>,
												]
											>
										>
										requiredReasoningEffort: z.ZodOptional<z.ZodBoolean>
										preserveReasoning: z.ZodOptional<z.ZodBoolean>
										supportedParameters: z.ZodOptional<
											z.ZodArray<
												z.ZodEnum<
													["max_tokens", "temperature", "reasoning", "include_reasoning"]
												>,
												"many"
											>
										>
										inputPrice: z.ZodOptional<z.ZodNumber>
										outputPrice: z.ZodOptional<z.ZodNumber>
										cacheWritesPrice: z.ZodOptional<z.ZodNumber>
										cacheReadsPrice: z.ZodOptional<z.ZodNumber>
										description: z.ZodOptional<z.ZodString>
										reasoningEffort: z.ZodOptional<
											z.ZodEnum<["none", "minimal", "low", "medium", "high"]>
										>
										minTokensPerCachePoint: z.ZodOptional<z.ZodNumber>
										maxCachePoints: z.ZodOptional<z.ZodNumber>
										cachableFields: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
										displayName: z.ZodOptional<z.ZodNullable<z.ZodString>>
										preferredIndex: z.ZodOptional<z.ZodNullable<z.ZodNumber>>
										deprecated: z.ZodOptional<z.ZodBoolean>
										isFree: z.ZodOptional<z.ZodBoolean>
										supportsNativeTools: z.ZodOptional<z.ZodBoolean>
										tiers: z.ZodOptional<
											z.ZodArray<
												z.ZodObject<
													{
														name: z.ZodOptional<z.ZodEnum<["default", "flex", "priority"]>>
														contextWindow: z.ZodNumber
														inputPrice: z.ZodOptional<z.ZodNumber>
														outputPrice: z.ZodOptional<z.ZodNumber>
														cacheWritesPrice: z.ZodOptional<z.ZodNumber>
														cacheReadsPrice: z.ZodOptional<z.ZodNumber>
													},
													"strip",
													z.ZodTypeAny,
													{
														contextWindow: number
														name?: "default" | "flex" | "priority" | undefined
														inputPrice?: number | undefined
														outputPrice?: number | undefined
														cacheWritesPrice?: number | undefined
														cacheReadsPrice?: number | undefined
													},
													{
														contextWindow: number
														name?: "default" | "flex" | "priority" | undefined
														inputPrice?: number | undefined
														outputPrice?: number | undefined
														cacheWritesPrice?: number | undefined
														cacheReadsPrice?: number | undefined
													}
												>,
												"many"
											>
										>
									},
									"strip",
									z.ZodTypeAny,
									{
										contextWindow: number
										supportsPromptCache: boolean
										maxTokens?: number | null | undefined
										maxThinkingTokens?: number | null | undefined
										supportsImages?: boolean | undefined
										supportsComputerUse?: boolean | undefined
										promptCacheRetention?: "in_memory" | "24h" | undefined
										supportsVerbosity?: boolean | undefined
										supportsReasoningBudget?: boolean | undefined
										supportsReasoningBinary?: boolean | undefined
										supportsTemperature?: boolean | undefined
										defaultTemperature?: number | undefined
										requiredReasoningBudget?: boolean | undefined
										supportsReasoningEffort?:
											| boolean
											| ("low" | "medium" | "high" | "minimal" | "none" | "disable")[]
											| undefined
										requiredReasoningEffort?: boolean | undefined
										preserveReasoning?: boolean | undefined
										supportedParameters?:
											| ("reasoning" | "max_tokens" | "temperature" | "include_reasoning")[]
											| undefined
										inputPrice?: number | undefined
										outputPrice?: number | undefined
										cacheWritesPrice?: number | undefined
										cacheReadsPrice?: number | undefined
										description?: string | undefined
										reasoningEffort?: "low" | "medium" | "high" | "minimal" | "none" | undefined
										minTokensPerCachePoint?: number | undefined
										maxCachePoints?: number | undefined
										cachableFields?: string[] | undefined
										displayName?: string | null | undefined
										preferredIndex?: number | null | undefined
										deprecated?: boolean | undefined
										isFree?: boolean | undefined
										supportsNativeTools?: boolean | undefined
										tiers?:
											| {
													contextWindow: number
													name?: "default" | "flex" | "priority" | undefined
													inputPrice?: number | undefined
													outputPrice?: number | undefined
													cacheWritesPrice?: number | undefined
													cacheReadsPrice?: number | undefined
											  }[]
											| undefined
									},
									{
										contextWindow: number
										supportsPromptCache: boolean
										maxTokens?: number | null | undefined
										maxThinkingTokens?: number | null | undefined
										supportsImages?: boolean | undefined
										supportsComputerUse?: boolean | undefined
										promptCacheRetention?: "in_memory" | "24h" | undefined
										supportsVerbosity?: boolean | undefined
										supportsReasoningBudget?: boolean | undefined
										supportsReasoningBinary?: boolean | undefined
										supportsTemperature?: boolean | undefined
										defaultTemperature?: number | undefined
										requiredReasoningBudget?: boolean | undefined
										supportsReasoningEffort?:
											| boolean
											| ("low" | "medium" | "high" | "minimal" | "none" | "disable")[]
											| undefined
										requiredReasoningEffort?: boolean | undefined
										preserveReasoning?: boolean | undefined
										supportedParameters?:
											| ("reasoning" | "max_tokens" | "temperature" | "include_reasoning")[]
											| undefined
										inputPrice?: number | undefined
										outputPrice?: number | undefined
										cacheWritesPrice?: number | undefined
										cacheReadsPrice?: number | undefined
										description?: string | undefined
										reasoningEffort?: "low" | "medium" | "high" | "minimal" | "none" | undefined
										minTokensPerCachePoint?: number | undefined
										maxCachePoints?: number | undefined
										cachableFields?: string[] | undefined
										displayName?: string | null | undefined
										preferredIndex?: number | null | undefined
										deprecated?: boolean | undefined
										isFree?: boolean | undefined
										supportsNativeTools?: boolean | undefined
										tiers?:
											| {
													contextWindow: number
													name?: "default" | "flex" | "priority" | undefined
													inputPrice?: number | undefined
													outputPrice?: number | undefined
													cacheWritesPrice?: number | undefined
													cacheReadsPrice?: number | undefined
											  }[]
											| undefined
									}
								>
							>
						>
						openAiUseAzure: z.ZodOptional<z.ZodBoolean>
						azureApiVersion: z.ZodOptional<z.ZodString>
						openAiStreamingEnabled: z.ZodOptional<z.ZodBoolean>
						openAiHostHeader: z.ZodOptional<z.ZodString>
						openAiHeaders: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodString>>
						vertexKeyFile: z.ZodOptional<z.ZodString>
						vertexJsonCredentials: z.ZodOptional<z.ZodString>
						vertexProjectId: z.ZodOptional<z.ZodString>
						vertexRegion: z.ZodOptional<z.ZodString>
						awsAccessKey: z.ZodOptional<z.ZodString>
						awsSecretKey: z.ZodOptional<z.ZodString>
						awsSessionToken: z.ZodOptional<z.ZodString>
						awsRegion: z.ZodOptional<z.ZodString>
						awsUseCrossRegionInference: z.ZodOptional<z.ZodBoolean>
						awsUseGlobalInference: z.ZodOptional<z.ZodBoolean>
						awsUsePromptCache: z.ZodOptional<z.ZodBoolean>
						awsProfile: z.ZodOptional<z.ZodString>
						awsUseProfile: z.ZodOptional<z.ZodBoolean>
						awsApiKey: z.ZodOptional<z.ZodString>
						awsUseApiKey: z.ZodOptional<z.ZodBoolean>
						awsCustomArn: z.ZodOptional<z.ZodString>
						awsModelContextWindow: z.ZodOptional<z.ZodNumber>
						awsBedrockEndpointEnabled: z.ZodOptional<z.ZodBoolean>
						awsBedrockEndpoint: z.ZodOptional<z.ZodString>
						awsBedrock1MContext: z.ZodOptional<z.ZodBoolean>
						openRouterApiKey: z.ZodOptional<z.ZodString>
						openRouterModelId: z.ZodOptional<z.ZodString>
						openRouterBaseUrl: z.ZodOptional<z.ZodString>
						openRouterUseMiddleOutTransform: z.ZodOptional<z.ZodBoolean>
						nanoGptApiKey: z.ZodOptional<z.ZodString>
						nanoGptModelId: z.ZodOptional<z.ZodString>
						nanoGptModelList: z.ZodOptional<z.ZodEnum<["all", "personalized", "subscription"]>>
						glamaModelId: z.ZodOptional<z.ZodString>
						glamaApiKey: z.ZodOptional<z.ZodString>
						claudeCodePath: z.ZodOptional<z.ZodString>
						claudeCodeMaxOutputTokens: z.ZodOptional<z.ZodNumber>
						apiKey: z.ZodOptional<z.ZodString>
						anthropicBaseUrl: z.ZodOptional<z.ZodString>
						anthropicUseAuthToken: z.ZodOptional<z.ZodBoolean>
						anthropicDeploymentName: z.ZodOptional<z.ZodString>
						anthropicBeta1MContext: z.ZodOptional<z.ZodBoolean>
						apiProvider: z.ZodOptional<
							z.ZodEnum<
								[
									"openrouter",
									"vercel-ai-gateway",
									"huggingface",
									"litellm",
									"kilocode",
									"ovhcloud",
									"gemini",
									"inception",
									"synthetic",
									"sap-ai-core",
									"deepinfra",
									"io-intelligence",
									"requesty",
									"unbound",
									"glama",
									"roo",
									"chutes",
									"nano-gpt",
									"ollama",
									"lmstudio",
									"vscode-lm",
									"openai",
									"fake-ai",
									"human-relay",
									"anthropic",
									"bedrock",
									"cerebras",
									"claude-code",
									"doubao",
									"deepseek",
									"featherless",
									"fireworks",
									"gemini",
									"gemini-cli",
									"groq",
									"mistral",
									"moonshot",
									"minimax",
									"openai-native",
									"qwen-code",
									"roo",
									"kilocode",
									"minimax",
									"gemini-cli",
									"virtual-quota-fallback",
									"synthetic",
									"inception",
									"sambanova",
									"vertex",
									"xai",
									"zai",
								]
							>
						>
					} & {
						id: z.ZodOptional<z.ZodString>
					},
					"strip",
					z.ZodTypeAny,
					{
						id?: string | undefined
						reasoningEffort?: "low" | "medium" | "high" | "minimal" | "none" | "disable" | undefined
						codebaseIndexOpenAiCompatibleBaseUrl?: string | undefined
						codebaseIndexOpenAiCompatibleModelDimension?: number | undefined
						codeIndexOpenAiKey?: string | undefined
						codeIndexQdrantApiKey?: string | undefined
						codebaseIndexOpenAiCompatibleApiKey?: string | undefined
						codebaseIndexGeminiApiKey?: string | undefined
						codebaseIndexMistralApiKey?: string | undefined
						codebaseIndexVercelAiGatewayApiKey?: string | undefined
						codebaseIndexOpenRouterApiKey?: string | undefined
						apiProvider?:
							| "kilocode"
							| "openrouter"
							| "openai"
							| "anthropic"
							| "ollama"
							| "gemini"
							| "mistral"
							| "vercel-ai-gateway"
							| "huggingface"
							| "litellm"
							| "ovhcloud"
							| "inception"
							| "synthetic"
							| "sap-ai-core"
							| "deepinfra"
							| "io-intelligence"
							| "requesty"
							| "unbound"
							| "glama"
							| "roo"
							| "chutes"
							| "nano-gpt"
							| "lmstudio"
							| "vscode-lm"
							| "fake-ai"
							| "human-relay"
							| "bedrock"
							| "cerebras"
							| "claude-code"
							| "doubao"
							| "deepseek"
							| "featherless"
							| "fireworks"
							| "gemini-cli"
							| "groq"
							| "moonshot"
							| "minimax"
							| "openai-native"
							| "qwen-code"
							| "virtual-quota-fallback"
							| "sambanova"
							| "vertex"
							| "xai"
							| "zai"
							| undefined
						profileType?: "chat" | "autocomplete" | undefined
						includeMaxTokens?: boolean | undefined
						diffEnabled?: boolean | undefined
						todoListEnabled?: boolean | undefined
						fuzzyMatchThreshold?: number | undefined
						modelTemperature?: number | null | undefined
						rateLimitSeconds?: number | undefined
						rateLimitAfter?: boolean | undefined
						consecutiveMistakeLimit?: number | undefined
						enableReasoningEffort?: boolean | undefined
						modelMaxTokens?: number | undefined
						modelMaxThinkingTokens?: number | undefined
						verbosity?: "low" | "medium" | "high" | undefined
						toolStyle?: "xml" | "json" | undefined
						apiModelId?: string | undefined
						apiKey?: string | undefined
						anthropicBaseUrl?: string | undefined
						anthropicUseAuthToken?: boolean | undefined
						anthropicDeploymentName?: string | undefined
						anthropicBeta1MContext?: boolean | undefined
						claudeCodePath?: string | undefined
						claudeCodeMaxOutputTokens?: number | undefined
						glamaModelId?: string | undefined
						glamaApiKey?: string | undefined
						nanoGptApiKey?: string | undefined
						nanoGptModelId?: string | undefined
						nanoGptModelList?: "all" | "personalized" | "subscription" | undefined
						openRouterApiKey?: string | undefined
						openRouterModelId?: string | undefined
						openRouterBaseUrl?: string | undefined
						openRouterSpecificProvider?: string | undefined
						openRouterUseMiddleOutTransform?: boolean | undefined
						openRouterProviderDataCollection?: "allow" | "deny" | undefined
						openRouterProviderSort?: "price" | "throughput" | "latency" | undefined
						openRouterZdr?: boolean | undefined
						awsAccessKey?: string | undefined
						awsSecretKey?: string | undefined
						awsSessionToken?: string | undefined
						awsRegion?: string | undefined
						awsUseCrossRegionInference?: boolean | undefined
						awsUseGlobalInference?: boolean | undefined
						awsUsePromptCache?: boolean | undefined
						awsProfile?: string | undefined
						awsUseProfile?: boolean | undefined
						awsApiKey?: string | undefined
						awsUseApiKey?: boolean | undefined
						awsCustomArn?: string | undefined
						awsModelContextWindow?: number | undefined
						awsBedrockEndpointEnabled?: boolean | undefined
						awsBedrockEndpoint?: string | undefined
						awsBedrock1MContext?: boolean | undefined
						vertexKeyFile?: string | undefined
						vertexJsonCredentials?: string | undefined
						vertexProjectId?: string | undefined
						vertexRegion?: string | undefined
						enableUrlContext?: boolean | undefined
						enableGrounding?: boolean | undefined
						openAiBaseUrl?: string | undefined
						openAiApiKey?: string | undefined
						openAiLegacyFormat?: boolean | undefined
						openAiR1FormatEnabled?: boolean | undefined
						openAiModelId?: string | undefined
						openAiCustomModelInfo?:
							| {
									contextWindow: number
									supportsPromptCache: boolean
									maxTokens?: number | null | undefined
									maxThinkingTokens?: number | null | undefined
									supportsImages?: boolean | undefined
									supportsComputerUse?: boolean | undefined
									promptCacheRetention?: "in_memory" | "24h" | undefined
									supportsVerbosity?: boolean | undefined
									supportsReasoningBudget?: boolean | undefined
									supportsReasoningBinary?: boolean | undefined
									supportsTemperature?: boolean | undefined
									defaultTemperature?: number | undefined
									requiredReasoningBudget?: boolean | undefined
									supportsReasoningEffort?:
										| boolean
										| ("low" | "medium" | "high" | "minimal" | "none" | "disable")[]
										| undefined
									requiredReasoningEffort?: boolean | undefined
									preserveReasoning?: boolean | undefined
									supportedParameters?:
										| ("reasoning" | "max_tokens" | "temperature" | "include_reasoning")[]
										| undefined
									inputPrice?: number | undefined
									outputPrice?: number | undefined
									cacheWritesPrice?: number | undefined
									cacheReadsPrice?: number | undefined
									description?: string | undefined
									reasoningEffort?: "low" | "medium" | "high" | "minimal" | "none" | undefined
									minTokensPerCachePoint?: number | undefined
									maxCachePoints?: number | undefined
									cachableFields?: string[] | undefined
									displayName?: string | null | undefined
									preferredIndex?: number | null | undefined
									deprecated?: boolean | undefined
									isFree?: boolean | undefined
									supportsNativeTools?: boolean | undefined
									tiers?:
										| {
												contextWindow: number
												name?: "default" | "flex" | "priority" | undefined
												inputPrice?: number | undefined
												outputPrice?: number | undefined
												cacheWritesPrice?: number | undefined
												cacheReadsPrice?: number | undefined
										  }[]
										| undefined
							  }
							| null
							| undefined
						openAiUseAzure?: boolean | undefined
						azureApiVersion?: string | undefined
						openAiStreamingEnabled?: boolean | undefined
						openAiHostHeader?: string | undefined
						openAiHeaders?: Record<string, string> | undefined
						ollamaModelId?: string | undefined
						ollamaBaseUrl?: string | undefined
						ollamaApiKey?: string | undefined
						ollamaNumCtx?: number | undefined
						vsCodeLmModelSelector?:
							| {
									id?: string | undefined
									family?: string | undefined
									version?: string | undefined
									vendor?: string | undefined
							  }
							| undefined
						lmStudioModelId?: string | undefined
						lmStudioBaseUrl?: string | undefined
						lmStudioDraftModelId?: string | undefined
						lmStudioSpeculativeDecodingEnabled?: boolean | undefined
						geminiApiKey?: string | undefined
						googleGeminiBaseUrl?: string | undefined
						geminiCliOAuthPath?: string | undefined
						geminiCliProjectId?: string | undefined
						openAiNativeApiKey?: string | undefined
						openAiNativeBaseUrl?: string | undefined
						openAiNativeServiceTier?: "default" | "flex" | "priority" | undefined
						mistralApiKey?: string | undefined
						mistralCodestralUrl?: string | undefined
						deepSeekBaseUrl?: string | undefined
						deepSeekApiKey?: string | undefined
						deepInfraBaseUrl?: string | undefined
						deepInfraApiKey?: string | undefined
						deepInfraModelId?: string | undefined
						doubaoBaseUrl?: string | undefined
						doubaoApiKey?: string | undefined
						moonshotBaseUrl?: "https://api.moonshot.ai/v1" | "https://api.moonshot.cn/v1" | undefined
						moonshotApiKey?: string | undefined
						minimaxBaseUrl?:
							| "https://api.minimax.io/anthropic"
							| "https://api.minimaxi.com/anthropic"
							| undefined
						minimaxApiKey?: string | undefined
						unboundApiKey?: string | undefined
						unboundModelId?: string | undefined
						requestyBaseUrl?: string | undefined
						requestyApiKey?: string | undefined
						requestyModelId?: string | undefined
						fakeAi?: unknown
						xaiApiKey?: string | undefined
						groqApiKey?: string | undefined
						huggingFaceApiKey?: string | undefined
						huggingFaceModelId?: string | undefined
						huggingFaceInferenceProvider?: string | undefined
						chutesApiKey?: string | undefined
						litellmBaseUrl?: string | undefined
						litellmApiKey?: string | undefined
						litellmModelId?: string | undefined
						litellmUsePromptCache?: boolean | undefined
						cerebrasApiKey?: string | undefined
						sambaNovaApiKey?: string | undefined
						inceptionLabsBaseUrl?: string | undefined
						inceptionLabsApiKey?: string | undefined
						inceptionLabsModelId?: string | undefined
						ovhCloudAiEndpointsApiKey?: string | undefined
						ovhCloudAiEndpointsModelId?: string | undefined
						ovhCloudAiEndpointsBaseUrl?: string | undefined
						kilocodeToken?: string | undefined
						kilocodeOrganizationId?: string | undefined
						kilocodeModel?: string | undefined
						kilocodeTesterWarningsDisabledUntil?: number | undefined
						profiles?:
							| {
									profileName?: string | undefined
									profileId?: string | undefined
									profileLimits?:
										| {
												tokensPerMinute?: number | undefined
												tokensPerHour?: number | undefined
												tokensPerDay?: number | undefined
												requestsPerMinute?: number | undefined
												requestsPerHour?: number | undefined
												requestsPerDay?: number | undefined
										  }
										| undefined
							  }[]
							| undefined
						zaiApiKey?: string | undefined
						zaiApiLine?: "international_coding" | "china_coding" | undefined
						fireworksApiKey?: string | undefined
						syntheticApiKey?: string | undefined
						featherlessApiKey?: string | undefined
						ioIntelligenceModelId?: string | undefined
						ioIntelligenceApiKey?: string | undefined
						qwenCodeOauthPath?: string | undefined
						vercelAiGatewayApiKey?: string | undefined
						vercelAiGatewayModelId?: string | undefined
						sapAiCoreServiceKey?: string | undefined
						sapAiCoreResourceGroup?: string | undefined
						sapAiCoreUseOrchestration?: boolean | undefined
						sapAiCoreModelId?: string | undefined
						sapAiCoreDeploymentId?: string | undefined
						sapAiCoreCustomModelInfo?:
							| {
									contextWindow: number
									supportsPromptCache: boolean
									maxTokens?: number | null | undefined
									maxThinkingTokens?: number | null | undefined
									supportsImages?: boolean | undefined
									supportsComputerUse?: boolean | undefined
									promptCacheRetention?: "in_memory" | "24h" | undefined
									supportsVerbosity?: boolean | undefined
									supportsReasoningBudget?: boolean | undefined
									supportsReasoningBinary?: boolean | undefined
									supportsTemperature?: boolean | undefined
									defaultTemperature?: number | undefined
									requiredReasoningBudget?: boolean | undefined
									supportsReasoningEffort?:
										| boolean
										| ("low" | "medium" | "high" | "minimal" | "none" | "disable")[]
										| undefined
									requiredReasoningEffort?: boolean | undefined
									preserveReasoning?: boolean | undefined
									supportedParameters?:
										| ("reasoning" | "max_tokens" | "temperature" | "include_reasoning")[]
										| undefined
									inputPrice?: number | undefined
									outputPrice?: number | undefined
									cacheWritesPrice?: number | undefined
									cacheReadsPrice?: number | undefined
									description?: string | undefined
									reasoningEffort?: "low" | "medium" | "high" | "minimal" | "none" | undefined
									minTokensPerCachePoint?: number | undefined
									maxCachePoints?: number | undefined
									cachableFields?: string[] | undefined
									displayName?: string | null | undefined
									preferredIndex?: number | null | undefined
									deprecated?: boolean | undefined
									isFree?: boolean | undefined
									supportsNativeTools?: boolean | undefined
									tiers?:
										| {
												contextWindow: number
												name?: "default" | "flex" | "priority" | undefined
												inputPrice?: number | undefined
												outputPrice?: number | undefined
												cacheWritesPrice?: number | undefined
												cacheReadsPrice?: number | undefined
										  }[]
										| undefined
							  }
							| null
							| undefined
					},
					{
						id?: string | undefined
						reasoningEffort?: "low" | "medium" | "high" | "minimal" | "none" | "disable" | undefined
						codebaseIndexOpenAiCompatibleBaseUrl?: string | undefined
						codebaseIndexOpenAiCompatibleModelDimension?: number | undefined
						codeIndexOpenAiKey?: string | undefined
						codeIndexQdrantApiKey?: string | undefined
						codebaseIndexOpenAiCompatibleApiKey?: string | undefined
						codebaseIndexGeminiApiKey?: string | undefined
						codebaseIndexMistralApiKey?: string | undefined
						codebaseIndexVercelAiGatewayApiKey?: string | undefined
						codebaseIndexOpenRouterApiKey?: string | undefined
						apiProvider?:
							| "kilocode"
							| "openrouter"
							| "openai"
							| "anthropic"
							| "ollama"
							| "gemini"
							| "mistral"
							| "vercel-ai-gateway"
							| "huggingface"
							| "litellm"
							| "ovhcloud"
							| "inception"
							| "synthetic"
							| "sap-ai-core"
							| "deepinfra"
							| "io-intelligence"
							| "requesty"
							| "unbound"
							| "glama"
							| "roo"
							| "chutes"
							| "nano-gpt"
							| "lmstudio"
							| "vscode-lm"
							| "fake-ai"
							| "human-relay"
							| "bedrock"
							| "cerebras"
							| "claude-code"
							| "doubao"
							| "deepseek"
							| "featherless"
							| "fireworks"
							| "gemini-cli"
							| "groq"
							| "moonshot"
							| "minimax"
							| "openai-native"
							| "qwen-code"
							| "virtual-quota-fallback"
							| "sambanova"
							| "vertex"
							| "xai"
							| "zai"
							| undefined
						profileType?: "chat" | "autocomplete" | undefined
						includeMaxTokens?: boolean | undefined
						diffEnabled?: boolean | undefined
						todoListEnabled?: boolean | undefined
						fuzzyMatchThreshold?: number | undefined
						modelTemperature?: number | null | undefined
						rateLimitSeconds?: number | undefined
						rateLimitAfter?: boolean | undefined
						consecutiveMistakeLimit?: number | undefined
						enableReasoningEffort?: boolean | undefined
						modelMaxTokens?: number | undefined
						modelMaxThinkingTokens?: number | undefined
						verbosity?: "low" | "medium" | "high" | undefined
						toolStyle?: "xml" | "json" | undefined
						apiModelId?: string | undefined
						apiKey?: string | undefined
						anthropicBaseUrl?: string | undefined
						anthropicUseAuthToken?: boolean | undefined
						anthropicDeploymentName?: string | undefined
						anthropicBeta1MContext?: boolean | undefined
						claudeCodePath?: string | undefined
						claudeCodeMaxOutputTokens?: number | undefined
						glamaModelId?: string | undefined
						glamaApiKey?: string | undefined
						nanoGptApiKey?: string | undefined
						nanoGptModelId?: string | undefined
						nanoGptModelList?: "all" | "personalized" | "subscription" | undefined
						openRouterApiKey?: string | undefined
						openRouterModelId?: string | undefined
						openRouterBaseUrl?: string | undefined
						openRouterSpecificProvider?: string | undefined
						openRouterUseMiddleOutTransform?: boolean | undefined
						openRouterProviderDataCollection?: "allow" | "deny" | undefined
						openRouterProviderSort?: "price" | "throughput" | "latency" | undefined
						openRouterZdr?: boolean | undefined
						awsAccessKey?: string | undefined
						awsSecretKey?: string | undefined
						awsSessionToken?: string | undefined
						awsRegion?: string | undefined
						awsUseCrossRegionInference?: boolean | undefined
						awsUseGlobalInference?: boolean | undefined
						awsUsePromptCache?: boolean | undefined
						awsProfile?: string | undefined
						awsUseProfile?: boolean | undefined
						awsApiKey?: string | undefined
						awsUseApiKey?: boolean | undefined
						awsCustomArn?: string | undefined
						awsModelContextWindow?: number | undefined
						awsBedrockEndpointEnabled?: boolean | undefined
						awsBedrockEndpoint?: string | undefined
						awsBedrock1MContext?: boolean | undefined
						vertexKeyFile?: string | undefined
						vertexJsonCredentials?: string | undefined
						vertexProjectId?: string | undefined
						vertexRegion?: string | undefined
						enableUrlContext?: boolean | undefined
						enableGrounding?: boolean | undefined
						openAiBaseUrl?: string | undefined
						openAiApiKey?: string | undefined
						openAiLegacyFormat?: boolean | undefined
						openAiR1FormatEnabled?: boolean | undefined
						openAiModelId?: string | undefined
						openAiCustomModelInfo?:
							| {
									contextWindow: number
									supportsPromptCache: boolean
									maxTokens?: number | null | undefined
									maxThinkingTokens?: number | null | undefined
									supportsImages?: boolean | undefined
									supportsComputerUse?: boolean | undefined
									promptCacheRetention?: "in_memory" | "24h" | undefined
									supportsVerbosity?: boolean | undefined
									supportsReasoningBudget?: boolean | undefined
									supportsReasoningBinary?: boolean | undefined
									supportsTemperature?: boolean | undefined
									defaultTemperature?: number | undefined
									requiredReasoningBudget?: boolean | undefined
									supportsReasoningEffort?:
										| boolean
										| ("low" | "medium" | "high" | "minimal" | "none" | "disable")[]
										| undefined
									requiredReasoningEffort?: boolean | undefined
									preserveReasoning?: boolean | undefined
									supportedParameters?:
										| ("reasoning" | "max_tokens" | "temperature" | "include_reasoning")[]
										| undefined
									inputPrice?: number | undefined
									outputPrice?: number | undefined
									cacheWritesPrice?: number | undefined
									cacheReadsPrice?: number | undefined
									description?: string | undefined
									reasoningEffort?: "low" | "medium" | "high" | "minimal" | "none" | undefined
									minTokensPerCachePoint?: number | undefined
									maxCachePoints?: number | undefined
									cachableFields?: string[] | undefined
									displayName?: string | null | undefined
									preferredIndex?: number | null | undefined
									deprecated?: boolean | undefined
									isFree?: boolean | undefined
									supportsNativeTools?: boolean | undefined
									tiers?:
										| {
												contextWindow: number
												name?: "default" | "flex" | "priority" | undefined
												inputPrice?: number | undefined
												outputPrice?: number | undefined
												cacheWritesPrice?: number | undefined
												cacheReadsPrice?: number | undefined
										  }[]
										| undefined
							  }
							| null
							| undefined
						openAiUseAzure?: boolean | undefined
						azureApiVersion?: string | undefined
						openAiStreamingEnabled?: boolean | undefined
						openAiHostHeader?: string | undefined
						openAiHeaders?: Record<string, string> | undefined
						ollamaModelId?: string | undefined
						ollamaBaseUrl?: string | undefined
						ollamaApiKey?: string | undefined
						ollamaNumCtx?: number | undefined
						vsCodeLmModelSelector?:
							| {
									id?: string | undefined
									family?: string | undefined
									version?: string | undefined
									vendor?: string | undefined
							  }
							| undefined
						lmStudioModelId?: string | undefined
						lmStudioBaseUrl?: string | undefined
						lmStudioDraftModelId?: string | undefined
						lmStudioSpeculativeDecodingEnabled?: boolean | undefined
						geminiApiKey?: string | undefined
						googleGeminiBaseUrl?: string | undefined
						geminiCliOAuthPath?: string | undefined
						geminiCliProjectId?: string | undefined
						openAiNativeApiKey?: string | undefined
						openAiNativeBaseUrl?: string | undefined
						openAiNativeServiceTier?: "default" | "flex" | "priority" | undefined
						mistralApiKey?: string | undefined
						mistralCodestralUrl?: string | undefined
						deepSeekBaseUrl?: string | undefined
						deepSeekApiKey?: string | undefined
						deepInfraBaseUrl?: string | undefined
						deepInfraApiKey?: string | undefined
						deepInfraModelId?: string | undefined
						doubaoBaseUrl?: string | undefined
						doubaoApiKey?: string | undefined
						moonshotBaseUrl?: "https://api.moonshot.ai/v1" | "https://api.moonshot.cn/v1" | undefined
						moonshotApiKey?: string | undefined
						minimaxBaseUrl?:
							| "https://api.minimax.io/anthropic"
							| "https://api.minimaxi.com/anthropic"
							| undefined
						minimaxApiKey?: string | undefined
						unboundApiKey?: string | undefined
						unboundModelId?: string | undefined
						requestyBaseUrl?: string | undefined
						requestyApiKey?: string | undefined
						requestyModelId?: string | undefined
						fakeAi?: unknown
						xaiApiKey?: string | undefined
						groqApiKey?: string | undefined
						huggingFaceApiKey?: string | undefined
						huggingFaceModelId?: string | undefined
						huggingFaceInferenceProvider?: string | undefined
						chutesApiKey?: string | undefined
						litellmBaseUrl?: string | undefined
						litellmApiKey?: string | undefined
						litellmModelId?: string | undefined
						litellmUsePromptCache?: boolean | undefined
						cerebrasApiKey?: string | undefined
						sambaNovaApiKey?: string | undefined
						inceptionLabsBaseUrl?: string | undefined
						inceptionLabsApiKey?: string | undefined
						inceptionLabsModelId?: string | undefined
						ovhCloudAiEndpointsApiKey?: string | undefined
						ovhCloudAiEndpointsModelId?: string | undefined
						ovhCloudAiEndpointsBaseUrl?: string | undefined
						kilocodeToken?: string | undefined
						kilocodeOrganizationId?: string | undefined
						kilocodeModel?: string | undefined
						kilocodeTesterWarningsDisabledUntil?: number | undefined
						profiles?:
							| {
									profileName?: string | undefined
									profileId?: string | undefined
									profileLimits?:
										| {
												tokensPerMinute?: number | undefined
												tokensPerHour?: number | undefined
												tokensPerDay?: number | undefined
												requestsPerMinute?: number | undefined
												requestsPerHour?: number | undefined
												requestsPerDay?: number | undefined
										  }
										| undefined
							  }[]
							| undefined
						zaiApiKey?: string | undefined
						zaiApiLine?: "international_coding" | "china_coding" | undefined
						fireworksApiKey?: string | undefined
						syntheticApiKey?: string | undefined
						featherlessApiKey?: string | undefined
						ioIntelligenceModelId?: string | undefined
						ioIntelligenceApiKey?: string | undefined
						qwenCodeOauthPath?: string | undefined
						vercelAiGatewayApiKey?: string | undefined
						vercelAiGatewayModelId?: string | undefined
						sapAiCoreServiceKey?: string | undefined
						sapAiCoreResourceGroup?: string | undefined
						sapAiCoreUseOrchestration?: boolean | undefined
						sapAiCoreModelId?: string | undefined
						sapAiCoreDeploymentId?: string | undefined
						sapAiCoreCustomModelInfo?:
							| {
									contextWindow: number
									supportsPromptCache: boolean
									maxTokens?: number | null | undefined
									maxThinkingTokens?: number | null | undefined
									supportsImages?: boolean | undefined
									supportsComputerUse?: boolean | undefined
									promptCacheRetention?: "in_memory" | "24h" | undefined
									supportsVerbosity?: boolean | undefined
									supportsReasoningBudget?: boolean | undefined
									supportsReasoningBinary?: boolean | undefined
									supportsTemperature?: boolean | undefined
									defaultTemperature?: number | undefined
									requiredReasoningBudget?: boolean | undefined
									supportsReasoningEffort?:
										| boolean
										| ("low" | "medium" | "high" | "minimal" | "none" | "disable")[]
										| undefined
									requiredReasoningEffort?: boolean | undefined
									preserveReasoning?: boolean | undefined
									supportedParameters?:
										| ("reasoning" | "max_tokens" | "temperature" | "include_reasoning")[]
										| undefined
									inputPrice?: number | undefined
									outputPrice?: number | undefined
									cacheWritesPrice?: number | undefined
									cacheReadsPrice?: number | undefined
									description?: string | undefined
									reasoningEffort?: "low" | "medium" | "high" | "minimal" | "none" | undefined
									minTokensPerCachePoint?: number | undefined
									maxCachePoints?: number | undefined
									cachableFields?: string[] | undefined
									displayName?: string | null | undefined
									preferredIndex?: number | null | undefined
									deprecated?: boolean | undefined
									isFree?: boolean | undefined
									supportsNativeTools?: boolean | undefined
									tiers?:
										| {
												contextWindow: number
												name?: "default" | "flex" | "priority" | undefined
												inputPrice?: number | undefined
												outputPrice?: number | undefined
												cacheWritesPrice?: number | undefined
												cacheReadsPrice?: number | undefined
										  }[]
										| undefined
							  }
							| null
							| undefined
					}
				>
			>
		>
	},
	"strip",
	z.ZodTypeAny,
	{
		version: number
		defaultSettings: {
			fuzzyMatchThreshold?: number | undefined
			enableCheckpoints?: boolean | undefined
			maxOpenTabsContext?: number | undefined
			maxWorkspaceFiles?: number | undefined
			showRooIgnoredFiles?: boolean | undefined
			maxReadFileLine?: number | undefined
			terminalOutputLineLimit?: number | undefined
			terminalShellIntegrationTimeout?: number | undefined
			terminalShellIntegrationDisabled?: boolean | undefined
			terminalCommandDelay?: number | undefined
			terminalZshClearEolMark?: boolean | undefined
			terminalCompressProgressBar?: boolean | undefined
		}
		allowList: {
			allowAll: boolean
			providers: Record<
				string,
				{
					allowAll: boolean
					models?: string[] | undefined
				}
			>
		}
		cloudSettings?:
			| {
					recordTaskMessages?: boolean | undefined
					enableTaskSharing?: boolean | undefined
					taskShareExpirationDays?: number | undefined
					allowMembersViewAllTasks?: boolean | undefined
			  }
			| undefined
		features?:
			| {
					roomoteControlEnabled?: boolean | undefined
			  }
			| undefined
		hiddenMcps?: string[] | undefined
		hideMarketplaceMcps?: boolean | undefined
		mcps?:
			| {
					id: string
					name: string
					description: string
					url: string
					content:
						| string
						| {
								name: string
								content: string
								parameters?:
									| {
											name: string
											key: string
											optional: boolean
											placeholder?: string | undefined
									  }[]
									| undefined
								prerequisites?: string[] | undefined
						  }[]
					tags?: string[] | undefined
					parameters?:
						| {
								name: string
								key: string
								optional: boolean
								placeholder?: string | undefined
						  }[]
						| undefined
					prerequisites?: string[] | undefined
					author?: string | undefined
					authorUrl?: string | undefined
			  }[]
			| undefined
		providerProfiles?:
			| Record<
					string,
					{
						id?: string | undefined
						reasoningEffort?: "low" | "medium" | "high" | "minimal" | "none" | "disable" | undefined
						codebaseIndexOpenAiCompatibleBaseUrl?: string | undefined
						codebaseIndexOpenAiCompatibleModelDimension?: number | undefined
						codeIndexOpenAiKey?: string | undefined
						codeIndexQdrantApiKey?: string | undefined
						codebaseIndexOpenAiCompatibleApiKey?: string | undefined
						codebaseIndexGeminiApiKey?: string | undefined
						codebaseIndexMistralApiKey?: string | undefined
						codebaseIndexVercelAiGatewayApiKey?: string | undefined
						codebaseIndexOpenRouterApiKey?: string | undefined
						apiProvider?:
							| "kilocode"
							| "openrouter"
							| "openai"
							| "anthropic"
							| "ollama"
							| "gemini"
							| "mistral"
							| "vercel-ai-gateway"
							| "huggingface"
							| "litellm"
							| "ovhcloud"
							| "inception"
							| "synthetic"
							| "sap-ai-core"
							| "deepinfra"
							| "io-intelligence"
							| "requesty"
							| "unbound"
							| "glama"
							| "roo"
							| "chutes"
							| "nano-gpt"
							| "lmstudio"
							| "vscode-lm"
							| "fake-ai"
							| "human-relay"
							| "bedrock"
							| "cerebras"
							| "claude-code"
							| "doubao"
							| "deepseek"
							| "featherless"
							| "fireworks"
							| "gemini-cli"
							| "groq"
							| "moonshot"
							| "minimax"
							| "openai-native"
							| "qwen-code"
							| "virtual-quota-fallback"
							| "sambanova"
							| "vertex"
							| "xai"
							| "zai"
							| undefined
						profileType?: "chat" | "autocomplete" | undefined
						includeMaxTokens?: boolean | undefined
						diffEnabled?: boolean | undefined
						todoListEnabled?: boolean | undefined
						fuzzyMatchThreshold?: number | undefined
						modelTemperature?: number | null | undefined
						rateLimitSeconds?: number | undefined
						rateLimitAfter?: boolean | undefined
						consecutiveMistakeLimit?: number | undefined
						enableReasoningEffort?: boolean | undefined
						modelMaxTokens?: number | undefined
						modelMaxThinkingTokens?: number | undefined
						verbosity?: "low" | "medium" | "high" | undefined
						toolStyle?: "xml" | "json" | undefined
						apiModelId?: string | undefined
						apiKey?: string | undefined
						anthropicBaseUrl?: string | undefined
						anthropicUseAuthToken?: boolean | undefined
						anthropicDeploymentName?: string | undefined
						anthropicBeta1MContext?: boolean | undefined
						claudeCodePath?: string | undefined
						claudeCodeMaxOutputTokens?: number | undefined
						glamaModelId?: string | undefined
						glamaApiKey?: string | undefined
						nanoGptApiKey?: string | undefined
						nanoGptModelId?: string | undefined
						nanoGptModelList?: "all" | "personalized" | "subscription" | undefined
						openRouterApiKey?: string | undefined
						openRouterModelId?: string | undefined
						openRouterBaseUrl?: string | undefined
						openRouterSpecificProvider?: string | undefined
						openRouterUseMiddleOutTransform?: boolean | undefined
						openRouterProviderDataCollection?: "allow" | "deny" | undefined
						openRouterProviderSort?: "price" | "throughput" | "latency" | undefined
						openRouterZdr?: boolean | undefined
						awsAccessKey?: string | undefined
						awsSecretKey?: string | undefined
						awsSessionToken?: string | undefined
						awsRegion?: string | undefined
						awsUseCrossRegionInference?: boolean | undefined
						awsUseGlobalInference?: boolean | undefined
						awsUsePromptCache?: boolean | undefined
						awsProfile?: string | undefined
						awsUseProfile?: boolean | undefined
						awsApiKey?: string | undefined
						awsUseApiKey?: boolean | undefined
						awsCustomArn?: string | undefined
						awsModelContextWindow?: number | undefined
						awsBedrockEndpointEnabled?: boolean | undefined
						awsBedrockEndpoint?: string | undefined
						awsBedrock1MContext?: boolean | undefined
						vertexKeyFile?: string | undefined
						vertexJsonCredentials?: string | undefined
						vertexProjectId?: string | undefined
						vertexRegion?: string | undefined
						enableUrlContext?: boolean | undefined
						enableGrounding?: boolean | undefined
						openAiBaseUrl?: string | undefined
						openAiApiKey?: string | undefined
						openAiLegacyFormat?: boolean | undefined
						openAiR1FormatEnabled?: boolean | undefined
						openAiModelId?: string | undefined
						openAiCustomModelInfo?:
							| {
									contextWindow: number
									supportsPromptCache: boolean
									maxTokens?: number | null | undefined
									maxThinkingTokens?: number | null | undefined
									supportsImages?: boolean | undefined
									supportsComputerUse?: boolean | undefined
									promptCacheRetention?: "in_memory" | "24h" | undefined
									supportsVerbosity?: boolean | undefined
									supportsReasoningBudget?: boolean | undefined
									supportsReasoningBinary?: boolean | undefined
									supportsTemperature?: boolean | undefined
									defaultTemperature?: number | undefined
									requiredReasoningBudget?: boolean | undefined
									supportsReasoningEffort?:
										| boolean
										| ("low" | "medium" | "high" | "minimal" | "none" | "disable")[]
										| undefined
									requiredReasoningEffort?: boolean | undefined
									preserveReasoning?: boolean | undefined
									supportedParameters?:
										| ("reasoning" | "max_tokens" | "temperature" | "include_reasoning")[]
										| undefined
									inputPrice?: number | undefined
									outputPrice?: number | undefined
									cacheWritesPrice?: number | undefined
									cacheReadsPrice?: number | undefined
									description?: string | undefined
									reasoningEffort?: "low" | "medium" | "high" | "minimal" | "none" | undefined
									minTokensPerCachePoint?: number | undefined
									maxCachePoints?: number | undefined
									cachableFields?: string[] | undefined
									displayName?: string | null | undefined
									preferredIndex?: number | null | undefined
									deprecated?: boolean | undefined
									isFree?: boolean | undefined
									supportsNativeTools?: boolean | undefined
									tiers?:
										| {
												contextWindow: number
												name?: "default" | "flex" | "priority" | undefined
												inputPrice?: number | undefined
												outputPrice?: number | undefined
												cacheWritesPrice?: number | undefined
												cacheReadsPrice?: number | undefined
										  }[]
										| undefined
							  }
							| null
							| undefined
						openAiUseAzure?: boolean | undefined
						azureApiVersion?: string | undefined
						openAiStreamingEnabled?: boolean | undefined
						openAiHostHeader?: string | undefined
						openAiHeaders?: Record<string, string> | undefined
						ollamaModelId?: string | undefined
						ollamaBaseUrl?: string | undefined
						ollamaApiKey?: string | undefined
						ollamaNumCtx?: number | undefined
						vsCodeLmModelSelector?:
							| {
									id?: string | undefined
									family?: string | undefined
									version?: string | undefined
									vendor?: string | undefined
							  }
							| undefined
						lmStudioModelId?: string | undefined
						lmStudioBaseUrl?: string | undefined
						lmStudioDraftModelId?: string | undefined
						lmStudioSpeculativeDecodingEnabled?: boolean | undefined
						geminiApiKey?: string | undefined
						googleGeminiBaseUrl?: string | undefined
						geminiCliOAuthPath?: string | undefined
						geminiCliProjectId?: string | undefined
						openAiNativeApiKey?: string | undefined
						openAiNativeBaseUrl?: string | undefined
						openAiNativeServiceTier?: "default" | "flex" | "priority" | undefined
						mistralApiKey?: string | undefined
						mistralCodestralUrl?: string | undefined
						deepSeekBaseUrl?: string | undefined
						deepSeekApiKey?: string | undefined
						deepInfraBaseUrl?: string | undefined
						deepInfraApiKey?: string | undefined
						deepInfraModelId?: string | undefined
						doubaoBaseUrl?: string | undefined
						doubaoApiKey?: string | undefined
						moonshotBaseUrl?: "https://api.moonshot.ai/v1" | "https://api.moonshot.cn/v1" | undefined
						moonshotApiKey?: string | undefined
						minimaxBaseUrl?:
							| "https://api.minimax.io/anthropic"
							| "https://api.minimaxi.com/anthropic"
							| undefined
						minimaxApiKey?: string | undefined
						unboundApiKey?: string | undefined
						unboundModelId?: string | undefined
						requestyBaseUrl?: string | undefined
						requestyApiKey?: string | undefined
						requestyModelId?: string | undefined
						fakeAi?: unknown
						xaiApiKey?: string | undefined
						groqApiKey?: string | undefined
						huggingFaceApiKey?: string | undefined
						huggingFaceModelId?: string | undefined
						huggingFaceInferenceProvider?: string | undefined
						chutesApiKey?: string | undefined
						litellmBaseUrl?: string | undefined
						litellmApiKey?: string | undefined
						litellmModelId?: string | undefined
						litellmUsePromptCache?: boolean | undefined
						cerebrasApiKey?: string | undefined
						sambaNovaApiKey?: string | undefined
						inceptionLabsBaseUrl?: string | undefined
						inceptionLabsApiKey?: string | undefined
						inceptionLabsModelId?: string | undefined
						ovhCloudAiEndpointsApiKey?: string | undefined
						ovhCloudAiEndpointsModelId?: string | undefined
						ovhCloudAiEndpointsBaseUrl?: string | undefined
						kilocodeToken?: string | undefined
						kilocodeOrganizationId?: string | undefined
						kilocodeModel?: string | undefined
						kilocodeTesterWarningsDisabledUntil?: number | undefined
						profiles?:
							| {
									profileName?: string | undefined
									profileId?: string | undefined
									profileLimits?:
										| {
												tokensPerMinute?: number | undefined
												tokensPerHour?: number | undefined
												tokensPerDay?: number | undefined
												requestsPerMinute?: number | undefined
												requestsPerHour?: number | undefined
												requestsPerDay?: number | undefined
										  }
										| undefined
							  }[]
							| undefined
						zaiApiKey?: string | undefined
						zaiApiLine?: "international_coding" | "china_coding" | undefined
						fireworksApiKey?: string | undefined
						syntheticApiKey?: string | undefined
						featherlessApiKey?: string | undefined
						ioIntelligenceModelId?: string | undefined
						ioIntelligenceApiKey?: string | undefined
						qwenCodeOauthPath?: string | undefined
						vercelAiGatewayApiKey?: string | undefined
						vercelAiGatewayModelId?: string | undefined
						sapAiCoreServiceKey?: string | undefined
						sapAiCoreResourceGroup?: string | undefined
						sapAiCoreUseOrchestration?: boolean | undefined
						sapAiCoreModelId?: string | undefined
						sapAiCoreDeploymentId?: string | undefined
						sapAiCoreCustomModelInfo?:
							| {
									contextWindow: number
									supportsPromptCache: boolean
									maxTokens?: number | null | undefined
									maxThinkingTokens?: number | null | undefined
									supportsImages?: boolean | undefined
									supportsComputerUse?: boolean | undefined
									promptCacheRetention?: "in_memory" | "24h" | undefined
									supportsVerbosity?: boolean | undefined
									supportsReasoningBudget?: boolean | undefined
									supportsReasoningBinary?: boolean | undefined
									supportsTemperature?: boolean | undefined
									defaultTemperature?: number | undefined
									requiredReasoningBudget?: boolean | undefined
									supportsReasoningEffort?:
										| boolean
										| ("low" | "medium" | "high" | "minimal" | "none" | "disable")[]
										| undefined
									requiredReasoningEffort?: boolean | undefined
									preserveReasoning?: boolean | undefined
									supportedParameters?:
										| ("reasoning" | "max_tokens" | "temperature" | "include_reasoning")[]
										| undefined
									inputPrice?: number | undefined
									outputPrice?: number | undefined
									cacheWritesPrice?: number | undefined
									cacheReadsPrice?: number | undefined
									description?: string | undefined
									reasoningEffort?: "low" | "medium" | "high" | "minimal" | "none" | undefined
									minTokensPerCachePoint?: number | undefined
									maxCachePoints?: number | undefined
									cachableFields?: string[] | undefined
									displayName?: string | null | undefined
									preferredIndex?: number | null | undefined
									deprecated?: boolean | undefined
									isFree?: boolean | undefined
									supportsNativeTools?: boolean | undefined
									tiers?:
										| {
												contextWindow: number
												name?: "default" | "flex" | "priority" | undefined
												inputPrice?: number | undefined
												outputPrice?: number | undefined
												cacheWritesPrice?: number | undefined
												cacheReadsPrice?: number | undefined
										  }[]
										| undefined
							  }
							| null
							| undefined
					}
			  >
			| undefined
	},
	{
		version: number
		defaultSettings: {
			fuzzyMatchThreshold?: number | undefined
			enableCheckpoints?: boolean | undefined
			maxOpenTabsContext?: number | undefined
			maxWorkspaceFiles?: number | undefined
			showRooIgnoredFiles?: boolean | undefined
			maxReadFileLine?: number | undefined
			terminalOutputLineLimit?: number | undefined
			terminalShellIntegrationTimeout?: number | undefined
			terminalShellIntegrationDisabled?: boolean | undefined
			terminalCommandDelay?: number | undefined
			terminalZshClearEolMark?: boolean | undefined
			terminalCompressProgressBar?: boolean | undefined
		}
		allowList: {
			allowAll: boolean
			providers: Record<
				string,
				{
					allowAll: boolean
					models?: string[] | undefined
				}
			>
		}
		cloudSettings?:
			| {
					recordTaskMessages?: boolean | undefined
					enableTaskSharing?: boolean | undefined
					taskShareExpirationDays?: number | undefined
					allowMembersViewAllTasks?: boolean | undefined
			  }
			| undefined
		features?:
			| {
					roomoteControlEnabled?: boolean | undefined
			  }
			| undefined
		hiddenMcps?: string[] | undefined
		hideMarketplaceMcps?: boolean | undefined
		mcps?:
			| {
					id: string
					name: string
					description: string
					url: string
					content:
						| string
						| {
								name: string
								content: string
								parameters?:
									| {
											name: string
											key: string
											placeholder?: string | undefined
											optional?: boolean | undefined
									  }[]
									| undefined
								prerequisites?: string[] | undefined
						  }[]
					tags?: string[] | undefined
					parameters?:
						| {
								name: string
								key: string
								placeholder?: string | undefined
								optional?: boolean | undefined
						  }[]
						| undefined
					prerequisites?: string[] | undefined
					author?: string | undefined
					authorUrl?: string | undefined
			  }[]
			| undefined
		providerProfiles?:
			| Record<
					string,
					{
						id?: string | undefined
						reasoningEffort?: "low" | "medium" | "high" | "minimal" | "none" | "disable" | undefined
						codebaseIndexOpenAiCompatibleBaseUrl?: string | undefined
						codebaseIndexOpenAiCompatibleModelDimension?: number | undefined
						codeIndexOpenAiKey?: string | undefined
						codeIndexQdrantApiKey?: string | undefined
						codebaseIndexOpenAiCompatibleApiKey?: string | undefined
						codebaseIndexGeminiApiKey?: string | undefined
						codebaseIndexMistralApiKey?: string | undefined
						codebaseIndexVercelAiGatewayApiKey?: string | undefined
						codebaseIndexOpenRouterApiKey?: string | undefined
						apiProvider?:
							| "kilocode"
							| "openrouter"
							| "openai"
							| "anthropic"
							| "ollama"
							| "gemini"
							| "mistral"
							| "vercel-ai-gateway"
							| "huggingface"
							| "litellm"
							| "ovhcloud"
							| "inception"
							| "synthetic"
							| "sap-ai-core"
							| "deepinfra"
							| "io-intelligence"
							| "requesty"
							| "unbound"
							| "glama"
							| "roo"
							| "chutes"
							| "nano-gpt"
							| "lmstudio"
							| "vscode-lm"
							| "fake-ai"
							| "human-relay"
							| "bedrock"
							| "cerebras"
							| "claude-code"
							| "doubao"
							| "deepseek"
							| "featherless"
							| "fireworks"
							| "gemini-cli"
							| "groq"
							| "moonshot"
							| "minimax"
							| "openai-native"
							| "qwen-code"
							| "virtual-quota-fallback"
							| "sambanova"
							| "vertex"
							| "xai"
							| "zai"
							| undefined
						profileType?: "chat" | "autocomplete" | undefined
						includeMaxTokens?: boolean | undefined
						diffEnabled?: boolean | undefined
						todoListEnabled?: boolean | undefined
						fuzzyMatchThreshold?: number | undefined
						modelTemperature?: number | null | undefined
						rateLimitSeconds?: number | undefined
						rateLimitAfter?: boolean | undefined
						consecutiveMistakeLimit?: number | undefined
						enableReasoningEffort?: boolean | undefined
						modelMaxTokens?: number | undefined
						modelMaxThinkingTokens?: number | undefined
						verbosity?: "low" | "medium" | "high" | undefined
						toolStyle?: "xml" | "json" | undefined
						apiModelId?: string | undefined
						apiKey?: string | undefined
						anthropicBaseUrl?: string | undefined
						anthropicUseAuthToken?: boolean | undefined
						anthropicDeploymentName?: string | undefined
						anthropicBeta1MContext?: boolean | undefined
						claudeCodePath?: string | undefined
						claudeCodeMaxOutputTokens?: number | undefined
						glamaModelId?: string | undefined
						glamaApiKey?: string | undefined
						nanoGptApiKey?: string | undefined
						nanoGptModelId?: string | undefined
						nanoGptModelList?: "all" | "personalized" | "subscription" | undefined
						openRouterApiKey?: string | undefined
						openRouterModelId?: string | undefined
						openRouterBaseUrl?: string | undefined
						openRouterSpecificProvider?: string | undefined
						openRouterUseMiddleOutTransform?: boolean | undefined
						openRouterProviderDataCollection?: "allow" | "deny" | undefined
						openRouterProviderSort?: "price" | "throughput" | "latency" | undefined
						openRouterZdr?: boolean | undefined
						awsAccessKey?: string | undefined
						awsSecretKey?: string | undefined
						awsSessionToken?: string | undefined
						awsRegion?: string | undefined
						awsUseCrossRegionInference?: boolean | undefined
						awsUseGlobalInference?: boolean | undefined
						awsUsePromptCache?: boolean | undefined
						awsProfile?: string | undefined
						awsUseProfile?: boolean | undefined
						awsApiKey?: string | undefined
						awsUseApiKey?: boolean | undefined
						awsCustomArn?: string | undefined
						awsModelContextWindow?: number | undefined
						awsBedrockEndpointEnabled?: boolean | undefined
						awsBedrockEndpoint?: string | undefined
						awsBedrock1MContext?: boolean | undefined
						vertexKeyFile?: string | undefined
						vertexJsonCredentials?: string | undefined
						vertexProjectId?: string | undefined
						vertexRegion?: string | undefined
						enableUrlContext?: boolean | undefined
						enableGrounding?: boolean | undefined
						openAiBaseUrl?: string | undefined
						openAiApiKey?: string | undefined
						openAiLegacyFormat?: boolean | undefined
						openAiR1FormatEnabled?: boolean | undefined
						openAiModelId?: string | undefined
						openAiCustomModelInfo?:
							| {
									contextWindow: number
									supportsPromptCache: boolean
									maxTokens?: number | null | undefined
									maxThinkingTokens?: number | null | undefined
									supportsImages?: boolean | undefined
									supportsComputerUse?: boolean | undefined
									promptCacheRetention?: "in_memory" | "24h" | undefined
									supportsVerbosity?: boolean | undefined
									supportsReasoningBudget?: boolean | undefined
									supportsReasoningBinary?: boolean | undefined
									supportsTemperature?: boolean | undefined
									defaultTemperature?: number | undefined
									requiredReasoningBudget?: boolean | undefined
									supportsReasoningEffort?:
										| boolean
										| ("low" | "medium" | "high" | "minimal" | "none" | "disable")[]
										| undefined
									requiredReasoningEffort?: boolean | undefined
									preserveReasoning?: boolean | undefined
									supportedParameters?:
										| ("reasoning" | "max_tokens" | "temperature" | "include_reasoning")[]
										| undefined
									inputPrice?: number | undefined
									outputPrice?: number | undefined
									cacheWritesPrice?: number | undefined
									cacheReadsPrice?: number | undefined
									description?: string | undefined
									reasoningEffort?: "low" | "medium" | "high" | "minimal" | "none" | undefined
									minTokensPerCachePoint?: number | undefined
									maxCachePoints?: number | undefined
									cachableFields?: string[] | undefined
									displayName?: string | null | undefined
									preferredIndex?: number | null | undefined
									deprecated?: boolean | undefined
									isFree?: boolean | undefined
									supportsNativeTools?: boolean | undefined
									tiers?:
										| {
												contextWindow: number
												name?: "default" | "flex" | "priority" | undefined
												inputPrice?: number | undefined
												outputPrice?: number | undefined
												cacheWritesPrice?: number | undefined
												cacheReadsPrice?: number | undefined
										  }[]
										| undefined
							  }
							| null
							| undefined
						openAiUseAzure?: boolean | undefined
						azureApiVersion?: string | undefined
						openAiStreamingEnabled?: boolean | undefined
						openAiHostHeader?: string | undefined
						openAiHeaders?: Record<string, string> | undefined
						ollamaModelId?: string | undefined
						ollamaBaseUrl?: string | undefined
						ollamaApiKey?: string | undefined
						ollamaNumCtx?: number | undefined
						vsCodeLmModelSelector?:
							| {
									id?: string | undefined
									family?: string | undefined
									version?: string | undefined
									vendor?: string | undefined
							  }
							| undefined
						lmStudioModelId?: string | undefined
						lmStudioBaseUrl?: string | undefined
						lmStudioDraftModelId?: string | undefined
						lmStudioSpeculativeDecodingEnabled?: boolean | undefined
						geminiApiKey?: string | undefined
						googleGeminiBaseUrl?: string | undefined
						geminiCliOAuthPath?: string | undefined
						geminiCliProjectId?: string | undefined
						openAiNativeApiKey?: string | undefined
						openAiNativeBaseUrl?: string | undefined
						openAiNativeServiceTier?: "default" | "flex" | "priority" | undefined
						mistralApiKey?: string | undefined
						mistralCodestralUrl?: string | undefined
						deepSeekBaseUrl?: string | undefined
						deepSeekApiKey?: string | undefined
						deepInfraBaseUrl?: string | undefined
						deepInfraApiKey?: string | undefined
						deepInfraModelId?: string | undefined
						doubaoBaseUrl?: string | undefined
						doubaoApiKey?: string | undefined
						moonshotBaseUrl?: "https://api.moonshot.ai/v1" | "https://api.moonshot.cn/v1" | undefined
						moonshotApiKey?: string | undefined
						minimaxBaseUrl?:
							| "https://api.minimax.io/anthropic"
							| "https://api.minimaxi.com/anthropic"
							| undefined
						minimaxApiKey?: string | undefined
						unboundApiKey?: string | undefined
						unboundModelId?: string | undefined
						requestyBaseUrl?: string | undefined
						requestyApiKey?: string | undefined
						requestyModelId?: string | undefined
						fakeAi?: unknown
						xaiApiKey?: string | undefined
						groqApiKey?: string | undefined
						huggingFaceApiKey?: string | undefined
						huggingFaceModelId?: string | undefined
						huggingFaceInferenceProvider?: string | undefined
						chutesApiKey?: string | undefined
						litellmBaseUrl?: string | undefined
						litellmApiKey?: string | undefined
						litellmModelId?: string | undefined
						litellmUsePromptCache?: boolean | undefined
						cerebrasApiKey?: string | undefined
						sambaNovaApiKey?: string | undefined
						inceptionLabsBaseUrl?: string | undefined
						inceptionLabsApiKey?: string | undefined
						inceptionLabsModelId?: string | undefined
						ovhCloudAiEndpointsApiKey?: string | undefined
						ovhCloudAiEndpointsModelId?: string | undefined
						ovhCloudAiEndpointsBaseUrl?: string | undefined
						kilocodeToken?: string | undefined
						kilocodeOrganizationId?: string | undefined
						kilocodeModel?: string | undefined
						kilocodeTesterWarningsDisabledUntil?: number | undefined
						profiles?:
							| {
									profileName?: string | undefined
									profileId?: string | undefined
									profileLimits?:
										| {
												tokensPerMinute?: number | undefined
												tokensPerHour?: number | undefined
												tokensPerDay?: number | undefined
												requestsPerMinute?: number | undefined
												requestsPerHour?: number | undefined
												requestsPerDay?: number | undefined
										  }
										| undefined
							  }[]
							| undefined
						zaiApiKey?: string | undefined
						zaiApiLine?: "international_coding" | "china_coding" | undefined
						fireworksApiKey?: string | undefined
						syntheticApiKey?: string | undefined
						featherlessApiKey?: string | undefined
						ioIntelligenceModelId?: string | undefined
						ioIntelligenceApiKey?: string | undefined
						qwenCodeOauthPath?: string | undefined
						vercelAiGatewayApiKey?: string | undefined
						vercelAiGatewayModelId?: string | undefined
						sapAiCoreServiceKey?: string | undefined
						sapAiCoreResourceGroup?: string | undefined
						sapAiCoreUseOrchestration?: boolean | undefined
						sapAiCoreModelId?: string | undefined
						sapAiCoreDeploymentId?: string | undefined
						sapAiCoreCustomModelInfo?:
							| {
									contextWindow: number
									supportsPromptCache: boolean
									maxTokens?: number | null | undefined
									maxThinkingTokens?: number | null | undefined
									supportsImages?: boolean | undefined
									supportsComputerUse?: boolean | undefined
									promptCacheRetention?: "in_memory" | "24h" | undefined
									supportsVerbosity?: boolean | undefined
									supportsReasoningBudget?: boolean | undefined
									supportsReasoningBinary?: boolean | undefined
									supportsTemperature?: boolean | undefined
									defaultTemperature?: number | undefined
									requiredReasoningBudget?: boolean | undefined
									supportsReasoningEffort?:
										| boolean
										| ("low" | "medium" | "high" | "minimal" | "none" | "disable")[]
										| undefined
									requiredReasoningEffort?: boolean | undefined
									preserveReasoning?: boolean | undefined
									supportedParameters?:
										| ("reasoning" | "max_tokens" | "temperature" | "include_reasoning")[]
										| undefined
									inputPrice?: number | undefined
									outputPrice?: number | undefined
									cacheWritesPrice?: number | undefined
									cacheReadsPrice?: number | undefined
									description?: string | undefined
									reasoningEffort?: "low" | "medium" | "high" | "minimal" | "none" | undefined
									minTokensPerCachePoint?: number | undefined
									maxCachePoints?: number | undefined
									cachableFields?: string[] | undefined
									displayName?: string | null | undefined
									preferredIndex?: number | null | undefined
									deprecated?: boolean | undefined
									isFree?: boolean | undefined
									supportsNativeTools?: boolean | undefined
									tiers?:
										| {
												contextWindow: number
												name?: "default" | "flex" | "priority" | undefined
												inputPrice?: number | undefined
												outputPrice?: number | undefined
												cacheWritesPrice?: number | undefined
												cacheReadsPrice?: number | undefined
										  }[]
										| undefined
							  }
							| null
							| undefined
					}
			  >
			| undefined
	}
>
export type OrganizationSettings = z.infer<typeof organizationSettingsSchema>
/**
 * User Settings Schemas
 */
export declare const userFeaturesSchema: z.ZodObject<
	{
		roomoteControlEnabled: z.ZodOptional<z.ZodBoolean>
	},
	"strip",
	z.ZodTypeAny,
	{
		roomoteControlEnabled?: boolean | undefined
	},
	{
		roomoteControlEnabled?: boolean | undefined
	}
>
export type UserFeatures = z.infer<typeof userFeaturesSchema>
export declare const userSettingsConfigSchema: z.ZodObject<
	{
		extensionBridgeEnabled: z.ZodOptional<z.ZodBoolean>
		taskSyncEnabled: z.ZodOptional<z.ZodBoolean>
	},
	"strip",
	z.ZodTypeAny,
	{
		extensionBridgeEnabled?: boolean | undefined
		taskSyncEnabled?: boolean | undefined
	},
	{
		extensionBridgeEnabled?: boolean | undefined
		taskSyncEnabled?: boolean | undefined
	}
>
export type UserSettingsConfig = z.infer<typeof userSettingsConfigSchema>
export declare const userSettingsDataSchema: z.ZodObject<
	{
		features: z.ZodObject<
			{
				roomoteControlEnabled: z.ZodOptional<z.ZodBoolean>
			},
			"strip",
			z.ZodTypeAny,
			{
				roomoteControlEnabled?: boolean | undefined
			},
			{
				roomoteControlEnabled?: boolean | undefined
			}
		>
		settings: z.ZodObject<
			{
				extensionBridgeEnabled: z.ZodOptional<z.ZodBoolean>
				taskSyncEnabled: z.ZodOptional<z.ZodBoolean>
			},
			"strip",
			z.ZodTypeAny,
			{
				extensionBridgeEnabled?: boolean | undefined
				taskSyncEnabled?: boolean | undefined
			},
			{
				extensionBridgeEnabled?: boolean | undefined
				taskSyncEnabled?: boolean | undefined
			}
		>
		version: z.ZodNumber
	},
	"strip",
	z.ZodTypeAny,
	{
		version: number
		features: {
			roomoteControlEnabled?: boolean | undefined
		}
		settings: {
			extensionBridgeEnabled?: boolean | undefined
			taskSyncEnabled?: boolean | undefined
		}
	},
	{
		version: number
		features: {
			roomoteControlEnabled?: boolean | undefined
		}
		settings: {
			extensionBridgeEnabled?: boolean | undefined
			taskSyncEnabled?: boolean | undefined
		}
	}
>
export type UserSettingsData = z.infer<typeof userSettingsDataSchema>
/**
 * Constants
 */
export declare const ORGANIZATION_ALLOW_ALL: OrganizationAllowList
export declare const ORGANIZATION_DEFAULT: OrganizationSettings
/**
 * ShareVisibility
 */
export type ShareVisibility = "organization" | "public"
/**
 * ShareResponse
 */
export declare const shareResponseSchema: z.ZodObject<
	{
		success: z.ZodBoolean
		shareUrl: z.ZodOptional<z.ZodString>
		error: z.ZodOptional<z.ZodString>
		isNewShare: z.ZodOptional<z.ZodBoolean>
		manageUrl: z.ZodOptional<z.ZodString>
	},
	"strip",
	z.ZodTypeAny,
	{
		success: boolean
		error?: string | undefined
		shareUrl?: string | undefined
		isNewShare?: boolean | undefined
		manageUrl?: string | undefined
	},
	{
		success: boolean
		error?: string | undefined
		shareUrl?: string | undefined
		isNewShare?: boolean | undefined
		manageUrl?: string | undefined
	}
>
export type ShareResponse = z.infer<typeof shareResponseSchema>
/**
 * AuthService
 */
export type AuthState = "initializing" | "logged-out" | "active-session" | "attempting-session" | "inactive-session"
export interface AuthService extends EventEmitter<AuthServiceEvents> {
	initialize(): Promise<void>
	broadcast(): void
	login(landingPageSlug?: string): Promise<void>
	logout(): Promise<void>
	handleCallback(code: string | null, state: string | null, organizationId?: string | null): Promise<void>
	switchOrganization(organizationId: string | null): Promise<void>
	getState(): AuthState
	isAuthenticated(): boolean
	hasActiveSession(): boolean
	hasOrIsAcquiringActiveSession(): boolean
	getSessionToken(): string | undefined
	getUserInfo(): CloudUserInfo | null
	getStoredOrganizationId(): string | null
	getOrganizationMemberships(): Promise<CloudOrganizationMembership[]>
}
/**
 * AuthServiceEvents
 */
export interface AuthServiceEvents {
	"auth-state-changed": [
		data: {
			state: AuthState
			previousState: AuthState
		},
	]
	"user-info": [
		data: {
			userInfo: CloudUserInfo
		},
	]
}
/**
 * SettingsService
 */
/**
 * Interface for settings services that provide organization settings
 */
export interface SettingsService {
	/**
	 * Get the organization allow list
	 * @returns The organization allow list or default if none available
	 */
	getAllowList(): OrganizationAllowList
	/**
	 * Get the current organization settings
	 * @returns The organization settings or undefined if none available
	 */
	getSettings(): OrganizationSettings | undefined
	/**
	 * Get the current user settings
	 * @returns The user settings data or undefined if none available
	 */
	getUserSettings(): UserSettingsData | undefined
	/**
	 * Get the current user features
	 * @returns The user features or empty object if none available
	 */
	getUserFeatures(): UserFeatures
	/**
	 * Get the current user settings configuration
	 * @returns The user settings configuration or empty object if none available
	 */
	getUserSettingsConfig(): UserSettingsConfig
	/**
	 * Update user settings with partial configuration
	 * @param settings Partial user settings configuration to update
	 * @returns Promise that resolves to true if successful, false otherwise
	 */
	updateUserSettings(settings: Partial<UserSettingsConfig>): Promise<boolean>
	/**
	 * Determines if task sync/recording is enabled based on organization and user settings
	 * Organization settings take precedence over user settings.
	 * User settings default to true if unspecified.
	 * @returns true if task sync is enabled, false otherwise
	 */
	isTaskSyncEnabled(): boolean
	/**
	 * Dispose of the settings service and clean up resources
	 */
	dispose(): void
}
/**
 * SettingsServiceEvents
 */
export interface SettingsServiceEvents {
	"settings-updated": [data: Record<string, never>]
}
/**
 * CloudServiceEvents
 */
export type CloudServiceEvents = AuthServiceEvents & SettingsServiceEvents
/**
 * ConnectionState
 */
export declare enum ConnectionState {
	DISCONNECTED = "disconnected",
	CONNECTING = "connecting",
	CONNECTED = "connected",
	RETRYING = "retrying",
	FAILED = "failed",
}
/**
 * RetryConfig
 */
export interface RetryConfig {
	maxInitialAttempts: number
	initialDelay: number
	maxDelay: number
	backoffMultiplier: number
}
/**
 * Constants
 */
export declare const HEARTBEAT_INTERVAL_MS = 20000
export declare const INSTANCE_TTL_SECONDS = 60
/**
 * ExtensionTask
 */
declare const extensionTaskSchema: z.ZodObject<
	{
		task: z.ZodOptional<z.ZodString>
		images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
		taskId: z.ZodString
		taskStatus: z.ZodNativeEnum<typeof TaskStatus>
		taskAsk: z.ZodOptional<
			z.ZodObject<
				{
					ts: z.ZodNumber
					type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
					ask: z.ZodOptional<
						z.ZodEnum<
							[
								"followup",
								"command",
								"command_output",
								"completion_result",
								"tool",
								"api_req_failed",
								"resume_task",
								"resume_completed_task",
								"mistake_limit_reached",
								"browser_action_launch",
								"use_mcp_server",
								"auto_approval_max_req_reached",
								"payment_required_prompt",
								"invalid_model",
								"report_bug",
								"condense",
								"checkpoint_restore",
							]
						>
					>
					say: z.ZodOptional<
						z.ZodEnum<
							[
								"error",
								"api_req_started",
								"api_req_finished",
								"api_req_retried",
								"api_req_retry_delayed",
								"api_req_deleted",
								"text",
								"image",
								"reasoning",
								"completion_result",
								"user_feedback",
								"user_feedback_diff",
								"command_output",
								"shell_integration_warning",
								"browser_action",
								"browser_action_result",
								"mcp_server_request_started",
								"mcp_server_response",
								"subtask_result",
								"checkpoint_saved",
								"rooignore_error",
								"diff_error",
								"condense_context",
								"condense_context_error",
								"codebase_search_result",
								"user_edit_todos",
							]
						>
					>
					text: z.ZodOptional<z.ZodString>
					images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
					partial: z.ZodOptional<z.ZodBoolean>
					reasoning: z.ZodOptional<z.ZodString>
					conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
					checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
					progressStatus: z.ZodOptional<
						z.ZodObject<
							{
								icon: z.ZodOptional<z.ZodString>
								text: z.ZodOptional<z.ZodString>
							},
							"strip",
							z.ZodTypeAny,
							{
								text?: string | undefined
								icon?: string | undefined
							},
							{
								text?: string | undefined
								icon?: string | undefined
							}
						>
					>
					contextCondense: z.ZodOptional<
						z.ZodObject<
							{
								cost: z.ZodNumber
								prevContextTokens: z.ZodNumber
								newContextTokens: z.ZodNumber
								summary: z.ZodString
							},
							"strip",
							z.ZodTypeAny,
							{
								cost: number
								prevContextTokens: number
								newContextTokens: number
								summary: string
							},
							{
								cost: number
								prevContextTokens: number
								newContextTokens: number
								summary: string
							}
						>
					>
					isProtected: z.ZodOptional<z.ZodBoolean>
					apiProtocol: z.ZodOptional<z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>>
					isAnswered: z.ZodOptional<z.ZodBoolean>
					metadata: z.ZodOptional<
						z.ZodObject<
							{
								kiloCode: z.ZodOptional<
									z.ZodObject<
										{
											commitRange: z.ZodOptional<
												z.ZodObject<
													{
														from: z.ZodString
														fromTimeStamp: z.ZodOptional<z.ZodNumber>
														to: z.ZodString
													},
													"strip",
													z.ZodTypeAny,
													{
														from: string
														to: string
														fromTimeStamp?: number | undefined
													},
													{
														from: string
														to: string
														fromTimeStamp?: number | undefined
													}
												>
											>
										},
										"strip",
										z.ZodTypeAny,
										{
											commitRange?:
												| {
														from: string
														to: string
														fromTimeStamp?: number | undefined
												  }
												| undefined
										},
										{
											commitRange?:
												| {
														from: string
														to: string
														fromTimeStamp?: number | undefined
												  }
												| undefined
										}
									>
								>
							},
							"strip",
							z.ZodTypeAny,
							{
								kiloCode?:
									| {
											commitRange?:
												| {
														from: string
														to: string
														fromTimeStamp?: number | undefined
												  }
												| undefined
									  }
									| undefined
							},
							{
								kiloCode?:
									| {
											commitRange?:
												| {
														from: string
														to: string
														fromTimeStamp?: number | undefined
												  }
												| undefined
									  }
									| undefined
							}
						>
					>
				},
				"strip",
				z.ZodTypeAny,
				{
					type: "ask" | "say"
					ts: number
					text?: string | undefined
					reasoning?: string | undefined
					ask?:
						| "followup"
						| "command"
						| "command_output"
						| "completion_result"
						| "tool"
						| "api_req_failed"
						| "resume_task"
						| "resume_completed_task"
						| "mistake_limit_reached"
						| "browser_action_launch"
						| "use_mcp_server"
						| "auto_approval_max_req_reached"
						| "payment_required_prompt"
						| "invalid_model"
						| "report_bug"
						| "condense"
						| "checkpoint_restore"
						| undefined
					say?:
						| "command_output"
						| "completion_result"
						| "error"
						| "api_req_started"
						| "api_req_finished"
						| "api_req_retried"
						| "api_req_retry_delayed"
						| "api_req_deleted"
						| "text"
						| "image"
						| "reasoning"
						| "user_feedback"
						| "user_feedback_diff"
						| "shell_integration_warning"
						| "browser_action"
						| "browser_action_result"
						| "mcp_server_request_started"
						| "mcp_server_response"
						| "subtask_result"
						| "checkpoint_saved"
						| "rooignore_error"
						| "diff_error"
						| "condense_context"
						| "condense_context_error"
						| "codebase_search_result"
						| "user_edit_todos"
						| undefined
					images?: string[] | undefined
					partial?: boolean | undefined
					conversationHistoryIndex?: number | undefined
					checkpoint?: Record<string, unknown> | undefined
					progressStatus?:
						| {
								text?: string | undefined
								icon?: string | undefined
						  }
						| undefined
					contextCondense?:
						| {
								cost: number
								prevContextTokens: number
								newContextTokens: number
								summary: string
						  }
						| undefined
					isProtected?: boolean | undefined
					apiProtocol?: "openai" | "anthropic" | undefined
					isAnswered?: boolean | undefined
					metadata?:
						| {
								kiloCode?:
									| {
											commitRange?:
												| {
														from: string
														to: string
														fromTimeStamp?: number | undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
				},
				{
					type: "ask" | "say"
					ts: number
					text?: string | undefined
					reasoning?: string | undefined
					ask?:
						| "followup"
						| "command"
						| "command_output"
						| "completion_result"
						| "tool"
						| "api_req_failed"
						| "resume_task"
						| "resume_completed_task"
						| "mistake_limit_reached"
						| "browser_action_launch"
						| "use_mcp_server"
						| "auto_approval_max_req_reached"
						| "payment_required_prompt"
						| "invalid_model"
						| "report_bug"
						| "condense"
						| "checkpoint_restore"
						| undefined
					say?:
						| "command_output"
						| "completion_result"
						| "error"
						| "api_req_started"
						| "api_req_finished"
						| "api_req_retried"
						| "api_req_retry_delayed"
						| "api_req_deleted"
						| "text"
						| "image"
						| "reasoning"
						| "user_feedback"
						| "user_feedback_diff"
						| "shell_integration_warning"
						| "browser_action"
						| "browser_action_result"
						| "mcp_server_request_started"
						| "mcp_server_response"
						| "subtask_result"
						| "checkpoint_saved"
						| "rooignore_error"
						| "diff_error"
						| "condense_context"
						| "condense_context_error"
						| "codebase_search_result"
						| "user_edit_todos"
						| undefined
					images?: string[] | undefined
					partial?: boolean | undefined
					conversationHistoryIndex?: number | undefined
					checkpoint?: Record<string, unknown> | undefined
					progressStatus?:
						| {
								text?: string | undefined
								icon?: string | undefined
						  }
						| undefined
					contextCondense?:
						| {
								cost: number
								prevContextTokens: number
								newContextTokens: number
								summary: string
						  }
						| undefined
					isProtected?: boolean | undefined
					apiProtocol?: "openai" | "anthropic" | undefined
					isAnswered?: boolean | undefined
					metadata?:
						| {
								kiloCode?:
									| {
											commitRange?:
												| {
														from: string
														to: string
														fromTimeStamp?: number | undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
				}
			>
		>
		queuedMessages: z.ZodOptional<
			z.ZodArray<
				z.ZodObject<
					{
						timestamp: z.ZodNumber
						id: z.ZodString
						text: z.ZodString
						images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
					},
					"strip",
					z.ZodTypeAny,
					{
						text: string
						timestamp: number
						id: string
						images?: string[] | undefined
					},
					{
						text: string
						timestamp: number
						id: string
						images?: string[] | undefined
					}
				>,
				"many"
			>
		>
		parentTaskId: z.ZodOptional<z.ZodString>
		childTaskId: z.ZodOptional<z.ZodString>
		tokenUsage: z.ZodOptional<
			z.ZodObject<
				{
					totalTokensIn: z.ZodNumber
					totalTokensOut: z.ZodNumber
					totalCacheWrites: z.ZodOptional<z.ZodNumber>
					totalCacheReads: z.ZodOptional<z.ZodNumber>
					totalCost: z.ZodNumber
					contextTokens: z.ZodNumber
				},
				"strip",
				z.ZodTypeAny,
				{
					totalTokensIn: number
					totalTokensOut: number
					totalCost: number
					contextTokens: number
					totalCacheWrites?: number | undefined
					totalCacheReads?: number | undefined
				},
				{
					totalTokensIn: number
					totalTokensOut: number
					totalCost: number
					contextTokens: number
					totalCacheWrites?: number | undefined
					totalCacheReads?: number | undefined
				}
			>
		>
	},
	"strip",
	z.ZodTypeAny,
	{
		taskId: string
		taskStatus: TaskStatus
		images?: string[] | undefined
		parentTaskId?: string | undefined
		task?: string | undefined
		taskAsk?:
			| {
					type: "ask" | "say"
					ts: number
					text?: string | undefined
					reasoning?: string | undefined
					ask?:
						| "followup"
						| "command"
						| "command_output"
						| "completion_result"
						| "tool"
						| "api_req_failed"
						| "resume_task"
						| "resume_completed_task"
						| "mistake_limit_reached"
						| "browser_action_launch"
						| "use_mcp_server"
						| "auto_approval_max_req_reached"
						| "payment_required_prompt"
						| "invalid_model"
						| "report_bug"
						| "condense"
						| "checkpoint_restore"
						| undefined
					say?:
						| "command_output"
						| "completion_result"
						| "error"
						| "api_req_started"
						| "api_req_finished"
						| "api_req_retried"
						| "api_req_retry_delayed"
						| "api_req_deleted"
						| "text"
						| "image"
						| "reasoning"
						| "user_feedback"
						| "user_feedback_diff"
						| "shell_integration_warning"
						| "browser_action"
						| "browser_action_result"
						| "mcp_server_request_started"
						| "mcp_server_response"
						| "subtask_result"
						| "checkpoint_saved"
						| "rooignore_error"
						| "diff_error"
						| "condense_context"
						| "condense_context_error"
						| "codebase_search_result"
						| "user_edit_todos"
						| undefined
					images?: string[] | undefined
					partial?: boolean | undefined
					conversationHistoryIndex?: number | undefined
					checkpoint?: Record<string, unknown> | undefined
					progressStatus?:
						| {
								text?: string | undefined
								icon?: string | undefined
						  }
						| undefined
					contextCondense?:
						| {
								cost: number
								prevContextTokens: number
								newContextTokens: number
								summary: string
						  }
						| undefined
					isProtected?: boolean | undefined
					apiProtocol?: "openai" | "anthropic" | undefined
					isAnswered?: boolean | undefined
					metadata?:
						| {
								kiloCode?:
									| {
											commitRange?:
												| {
														from: string
														to: string
														fromTimeStamp?: number | undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
			  }
			| undefined
		queuedMessages?:
			| {
					text: string
					timestamp: number
					id: string
					images?: string[] | undefined
			  }[]
			| undefined
		childTaskId?: string | undefined
		tokenUsage?:
			| {
					totalTokensIn: number
					totalTokensOut: number
					totalCost: number
					contextTokens: number
					totalCacheWrites?: number | undefined
					totalCacheReads?: number | undefined
			  }
			| undefined
	},
	{
		taskId: string
		taskStatus: TaskStatus
		images?: string[] | undefined
		parentTaskId?: string | undefined
		task?: string | undefined
		taskAsk?:
			| {
					type: "ask" | "say"
					ts: number
					text?: string | undefined
					reasoning?: string | undefined
					ask?:
						| "followup"
						| "command"
						| "command_output"
						| "completion_result"
						| "tool"
						| "api_req_failed"
						| "resume_task"
						| "resume_completed_task"
						| "mistake_limit_reached"
						| "browser_action_launch"
						| "use_mcp_server"
						| "auto_approval_max_req_reached"
						| "payment_required_prompt"
						| "invalid_model"
						| "report_bug"
						| "condense"
						| "checkpoint_restore"
						| undefined
					say?:
						| "command_output"
						| "completion_result"
						| "error"
						| "api_req_started"
						| "api_req_finished"
						| "api_req_retried"
						| "api_req_retry_delayed"
						| "api_req_deleted"
						| "text"
						| "image"
						| "reasoning"
						| "user_feedback"
						| "user_feedback_diff"
						| "shell_integration_warning"
						| "browser_action"
						| "browser_action_result"
						| "mcp_server_request_started"
						| "mcp_server_response"
						| "subtask_result"
						| "checkpoint_saved"
						| "rooignore_error"
						| "diff_error"
						| "condense_context"
						| "condense_context_error"
						| "codebase_search_result"
						| "user_edit_todos"
						| undefined
					images?: string[] | undefined
					partial?: boolean | undefined
					conversationHistoryIndex?: number | undefined
					checkpoint?: Record<string, unknown> | undefined
					progressStatus?:
						| {
								text?: string | undefined
								icon?: string | undefined
						  }
						| undefined
					contextCondense?:
						| {
								cost: number
								prevContextTokens: number
								newContextTokens: number
								summary: string
						  }
						| undefined
					isProtected?: boolean | undefined
					apiProtocol?: "openai" | "anthropic" | undefined
					isAnswered?: boolean | undefined
					metadata?:
						| {
								kiloCode?:
									| {
											commitRange?:
												| {
														from: string
														to: string
														fromTimeStamp?: number | undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
			  }
			| undefined
		queuedMessages?:
			| {
					text: string
					timestamp: number
					id: string
					images?: string[] | undefined
			  }[]
			| undefined
		childTaskId?: string | undefined
		tokenUsage?:
			| {
					totalTokensIn: number
					totalTokensOut: number
					totalCost: number
					contextTokens: number
					totalCacheWrites?: number | undefined
					totalCacheReads?: number | undefined
			  }
			| undefined
	}
>
export type ExtensionTask = z.infer<typeof extensionTaskSchema>
/**
 * ExtensionInstance
 */
export declare const extensionInstanceSchema: z.ZodObject<
	{
		instanceId: z.ZodString
		userId: z.ZodString
		workspacePath: z.ZodString
		appProperties: z.ZodObject<
			{
				appName: z.ZodString
				appVersion: z.ZodString
				vscodeVersion: z.ZodString
				platform: z.ZodString
				editorName: z.ZodString
				wrapped: z.ZodBoolean
				wrapper: z.ZodNullable<z.ZodString>
				wrapperTitle: z.ZodNullable<z.ZodString>
				wrapperCode: z.ZodNullable<z.ZodString>
				wrapperVersion: z.ZodNullable<z.ZodString>
				hostname: z.ZodOptional<z.ZodString>
			},
			"strip",
			z.ZodTypeAny,
			{
				appName: string
				appVersion: string
				vscodeVersion: string
				platform: string
				editorName: string
				wrapped: boolean
				wrapper: string | null
				wrapperTitle: string | null
				wrapperCode: string | null
				wrapperVersion: string | null
				hostname?: string | undefined
			},
			{
				appName: string
				appVersion: string
				vscodeVersion: string
				platform: string
				editorName: string
				wrapped: boolean
				wrapper: string | null
				wrapperTitle: string | null
				wrapperCode: string | null
				wrapperVersion: string | null
				hostname?: string | undefined
			}
		>
		gitProperties: z.ZodOptional<
			z.ZodObject<
				{
					repositoryUrl: z.ZodOptional<z.ZodString>
					repositoryName: z.ZodOptional<z.ZodString>
					defaultBranch: z.ZodOptional<z.ZodString>
				},
				"strip",
				z.ZodTypeAny,
				{
					repositoryUrl?: string | undefined
					repositoryName?: string | undefined
					defaultBranch?: string | undefined
				},
				{
					repositoryUrl?: string | undefined
					repositoryName?: string | undefined
					defaultBranch?: string | undefined
				}
			>
		>
		lastHeartbeat: z.ZodNumber
		task: z.ZodObject<
			{
				task: z.ZodOptional<z.ZodString>
				images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
				taskId: z.ZodString
				taskStatus: z.ZodNativeEnum<typeof TaskStatus>
				taskAsk: z.ZodOptional<
					z.ZodObject<
						{
							ts: z.ZodNumber
							type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
							ask: z.ZodOptional<
								z.ZodEnum<
									[
										"followup",
										"command",
										"command_output",
										"completion_result",
										"tool",
										"api_req_failed",
										"resume_task",
										"resume_completed_task",
										"mistake_limit_reached",
										"browser_action_launch",
										"use_mcp_server",
										"auto_approval_max_req_reached",
										"payment_required_prompt",
										"invalid_model",
										"report_bug",
										"condense",
										"checkpoint_restore",
									]
								>
							>
							say: z.ZodOptional<
								z.ZodEnum<
									[
										"error",
										"api_req_started",
										"api_req_finished",
										"api_req_retried",
										"api_req_retry_delayed",
										"api_req_deleted",
										"text",
										"image",
										"reasoning",
										"completion_result",
										"user_feedback",
										"user_feedback_diff",
										"command_output",
										"shell_integration_warning",
										"browser_action",
										"browser_action_result",
										"mcp_server_request_started",
										"mcp_server_response",
										"subtask_result",
										"checkpoint_saved",
										"rooignore_error",
										"diff_error",
										"condense_context",
										"condense_context_error",
										"codebase_search_result",
										"user_edit_todos",
									]
								>
							>
							text: z.ZodOptional<z.ZodString>
							images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
							partial: z.ZodOptional<z.ZodBoolean>
							reasoning: z.ZodOptional<z.ZodString>
							conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
							checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
							progressStatus: z.ZodOptional<
								z.ZodObject<
									{
										icon: z.ZodOptional<z.ZodString>
										text: z.ZodOptional<z.ZodString>
									},
									"strip",
									z.ZodTypeAny,
									{
										text?: string | undefined
										icon?: string | undefined
									},
									{
										text?: string | undefined
										icon?: string | undefined
									}
								>
							>
							contextCondense: z.ZodOptional<
								z.ZodObject<
									{
										cost: z.ZodNumber
										prevContextTokens: z.ZodNumber
										newContextTokens: z.ZodNumber
										summary: z.ZodString
									},
									"strip",
									z.ZodTypeAny,
									{
										cost: number
										prevContextTokens: number
										newContextTokens: number
										summary: string
									},
									{
										cost: number
										prevContextTokens: number
										newContextTokens: number
										summary: string
									}
								>
							>
							isProtected: z.ZodOptional<z.ZodBoolean>
							apiProtocol: z.ZodOptional<z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>>
							isAnswered: z.ZodOptional<z.ZodBoolean>
							metadata: z.ZodOptional<
								z.ZodObject<
									{
										kiloCode: z.ZodOptional<
											z.ZodObject<
												{
													commitRange: z.ZodOptional<
														z.ZodObject<
															{
																from: z.ZodString
																fromTimeStamp: z.ZodOptional<z.ZodNumber>
																to: z.ZodString
															},
															"strip",
															z.ZodTypeAny,
															{
																from: string
																to: string
																fromTimeStamp?: number | undefined
															},
															{
																from: string
																to: string
																fromTimeStamp?: number | undefined
															}
														>
													>
												},
												"strip",
												z.ZodTypeAny,
												{
													commitRange?:
														| {
																from: string
																to: string
																fromTimeStamp?: number | undefined
														  }
														| undefined
												},
												{
													commitRange?:
														| {
																from: string
																to: string
																fromTimeStamp?: number | undefined
														  }
														| undefined
												}
											>
										>
									},
									"strip",
									z.ZodTypeAny,
									{
										kiloCode?:
											| {
													commitRange?:
														| {
																from: string
																to: string
																fromTimeStamp?: number | undefined
														  }
														| undefined
											  }
											| undefined
									},
									{
										kiloCode?:
											| {
													commitRange?:
														| {
																from: string
																to: string
																fromTimeStamp?: number | undefined
														  }
														| undefined
											  }
											| undefined
									}
								>
							>
						},
						"strip",
						z.ZodTypeAny,
						{
							type: "ask" | "say"
							ts: number
							text?: string | undefined
							reasoning?: string | undefined
							ask?:
								| "followup"
								| "command"
								| "command_output"
								| "completion_result"
								| "tool"
								| "api_req_failed"
								| "resume_task"
								| "resume_completed_task"
								| "mistake_limit_reached"
								| "browser_action_launch"
								| "use_mcp_server"
								| "auto_approval_max_req_reached"
								| "payment_required_prompt"
								| "invalid_model"
								| "report_bug"
								| "condense"
								| "checkpoint_restore"
								| undefined
							say?:
								| "command_output"
								| "completion_result"
								| "error"
								| "api_req_started"
								| "api_req_finished"
								| "api_req_retried"
								| "api_req_retry_delayed"
								| "api_req_deleted"
								| "text"
								| "image"
								| "reasoning"
								| "user_feedback"
								| "user_feedback_diff"
								| "shell_integration_warning"
								| "browser_action"
								| "browser_action_result"
								| "mcp_server_request_started"
								| "mcp_server_response"
								| "subtask_result"
								| "checkpoint_saved"
								| "rooignore_error"
								| "diff_error"
								| "condense_context"
								| "condense_context_error"
								| "codebase_search_result"
								| "user_edit_todos"
								| undefined
							images?: string[] | undefined
							partial?: boolean | undefined
							conversationHistoryIndex?: number | undefined
							checkpoint?: Record<string, unknown> | undefined
							progressStatus?:
								| {
										text?: string | undefined
										icon?: string | undefined
								  }
								| undefined
							contextCondense?:
								| {
										cost: number
										prevContextTokens: number
										newContextTokens: number
										summary: string
								  }
								| undefined
							isProtected?: boolean | undefined
							apiProtocol?: "openai" | "anthropic" | undefined
							isAnswered?: boolean | undefined
							metadata?:
								| {
										kiloCode?:
											| {
													commitRange?:
														| {
																from: string
																to: string
																fromTimeStamp?: number | undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
						},
						{
							type: "ask" | "say"
							ts: number
							text?: string | undefined
							reasoning?: string | undefined
							ask?:
								| "followup"
								| "command"
								| "command_output"
								| "completion_result"
								| "tool"
								| "api_req_failed"
								| "resume_task"
								| "resume_completed_task"
								| "mistake_limit_reached"
								| "browser_action_launch"
								| "use_mcp_server"
								| "auto_approval_max_req_reached"
								| "payment_required_prompt"
								| "invalid_model"
								| "report_bug"
								| "condense"
								| "checkpoint_restore"
								| undefined
							say?:
								| "command_output"
								| "completion_result"
								| "error"
								| "api_req_started"
								| "api_req_finished"
								| "api_req_retried"
								| "api_req_retry_delayed"
								| "api_req_deleted"
								| "text"
								| "image"
								| "reasoning"
								| "user_feedback"
								| "user_feedback_diff"
								| "shell_integration_warning"
								| "browser_action"
								| "browser_action_result"
								| "mcp_server_request_started"
								| "mcp_server_response"
								| "subtask_result"
								| "checkpoint_saved"
								| "rooignore_error"
								| "diff_error"
								| "condense_context"
								| "condense_context_error"
								| "codebase_search_result"
								| "user_edit_todos"
								| undefined
							images?: string[] | undefined
							partial?: boolean | undefined
							conversationHistoryIndex?: number | undefined
							checkpoint?: Record<string, unknown> | undefined
							progressStatus?:
								| {
										text?: string | undefined
										icon?: string | undefined
								  }
								| undefined
							contextCondense?:
								| {
										cost: number
										prevContextTokens: number
										newContextTokens: number
										summary: string
								  }
								| undefined
							isProtected?: boolean | undefined
							apiProtocol?: "openai" | "anthropic" | undefined
							isAnswered?: boolean | undefined
							metadata?:
								| {
										kiloCode?:
											| {
													commitRange?:
														| {
																from: string
																to: string
																fromTimeStamp?: number | undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
						}
					>
				>
				queuedMessages: z.ZodOptional<
					z.ZodArray<
						z.ZodObject<
							{
								timestamp: z.ZodNumber
								id: z.ZodString
								text: z.ZodString
								images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
							},
							"strip",
							z.ZodTypeAny,
							{
								text: string
								timestamp: number
								id: string
								images?: string[] | undefined
							},
							{
								text: string
								timestamp: number
								id: string
								images?: string[] | undefined
							}
						>,
						"many"
					>
				>
				parentTaskId: z.ZodOptional<z.ZodString>
				childTaskId: z.ZodOptional<z.ZodString>
				tokenUsage: z.ZodOptional<
					z.ZodObject<
						{
							totalTokensIn: z.ZodNumber
							totalTokensOut: z.ZodNumber
							totalCacheWrites: z.ZodOptional<z.ZodNumber>
							totalCacheReads: z.ZodOptional<z.ZodNumber>
							totalCost: z.ZodNumber
							contextTokens: z.ZodNumber
						},
						"strip",
						z.ZodTypeAny,
						{
							totalTokensIn: number
							totalTokensOut: number
							totalCost: number
							contextTokens: number
							totalCacheWrites?: number | undefined
							totalCacheReads?: number | undefined
						},
						{
							totalTokensIn: number
							totalTokensOut: number
							totalCost: number
							contextTokens: number
							totalCacheWrites?: number | undefined
							totalCacheReads?: number | undefined
						}
					>
				>
			},
			"strip",
			z.ZodTypeAny,
			{
				taskId: string
				taskStatus: TaskStatus
				images?: string[] | undefined
				parentTaskId?: string | undefined
				task?: string | undefined
				taskAsk?:
					| {
							type: "ask" | "say"
							ts: number
							text?: string | undefined
							reasoning?: string | undefined
							ask?:
								| "followup"
								| "command"
								| "command_output"
								| "completion_result"
								| "tool"
								| "api_req_failed"
								| "resume_task"
								| "resume_completed_task"
								| "mistake_limit_reached"
								| "browser_action_launch"
								| "use_mcp_server"
								| "auto_approval_max_req_reached"
								| "payment_required_prompt"
								| "invalid_model"
								| "report_bug"
								| "condense"
								| "checkpoint_restore"
								| undefined
							say?:
								| "command_output"
								| "completion_result"
								| "error"
								| "api_req_started"
								| "api_req_finished"
								| "api_req_retried"
								| "api_req_retry_delayed"
								| "api_req_deleted"
								| "text"
								| "image"
								| "reasoning"
								| "user_feedback"
								| "user_feedback_diff"
								| "shell_integration_warning"
								| "browser_action"
								| "browser_action_result"
								| "mcp_server_request_started"
								| "mcp_server_response"
								| "subtask_result"
								| "checkpoint_saved"
								| "rooignore_error"
								| "diff_error"
								| "condense_context"
								| "condense_context_error"
								| "codebase_search_result"
								| "user_edit_todos"
								| undefined
							images?: string[] | undefined
							partial?: boolean | undefined
							conversationHistoryIndex?: number | undefined
							checkpoint?: Record<string, unknown> | undefined
							progressStatus?:
								| {
										text?: string | undefined
										icon?: string | undefined
								  }
								| undefined
							contextCondense?:
								| {
										cost: number
										prevContextTokens: number
										newContextTokens: number
										summary: string
								  }
								| undefined
							isProtected?: boolean | undefined
							apiProtocol?: "openai" | "anthropic" | undefined
							isAnswered?: boolean | undefined
							metadata?:
								| {
										kiloCode?:
											| {
													commitRange?:
														| {
																from: string
																to: string
																fromTimeStamp?: number | undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
					  }
					| undefined
				queuedMessages?:
					| {
							text: string
							timestamp: number
							id: string
							images?: string[] | undefined
					  }[]
					| undefined
				childTaskId?: string | undefined
				tokenUsage?:
					| {
							totalTokensIn: number
							totalTokensOut: number
							totalCost: number
							contextTokens: number
							totalCacheWrites?: number | undefined
							totalCacheReads?: number | undefined
					  }
					| undefined
			},
			{
				taskId: string
				taskStatus: TaskStatus
				images?: string[] | undefined
				parentTaskId?: string | undefined
				task?: string | undefined
				taskAsk?:
					| {
							type: "ask" | "say"
							ts: number
							text?: string | undefined
							reasoning?: string | undefined
							ask?:
								| "followup"
								| "command"
								| "command_output"
								| "completion_result"
								| "tool"
								| "api_req_failed"
								| "resume_task"
								| "resume_completed_task"
								| "mistake_limit_reached"
								| "browser_action_launch"
								| "use_mcp_server"
								| "auto_approval_max_req_reached"
								| "payment_required_prompt"
								| "invalid_model"
								| "report_bug"
								| "condense"
								| "checkpoint_restore"
								| undefined
							say?:
								| "command_output"
								| "completion_result"
								| "error"
								| "api_req_started"
								| "api_req_finished"
								| "api_req_retried"
								| "api_req_retry_delayed"
								| "api_req_deleted"
								| "text"
								| "image"
								| "reasoning"
								| "user_feedback"
								| "user_feedback_diff"
								| "shell_integration_warning"
								| "browser_action"
								| "browser_action_result"
								| "mcp_server_request_started"
								| "mcp_server_response"
								| "subtask_result"
								| "checkpoint_saved"
								| "rooignore_error"
								| "diff_error"
								| "condense_context"
								| "condense_context_error"
								| "codebase_search_result"
								| "user_edit_todos"
								| undefined
							images?: string[] | undefined
							partial?: boolean | undefined
							conversationHistoryIndex?: number | undefined
							checkpoint?: Record<string, unknown> | undefined
							progressStatus?:
								| {
										text?: string | undefined
										icon?: string | undefined
								  }
								| undefined
							contextCondense?:
								| {
										cost: number
										prevContextTokens: number
										newContextTokens: number
										summary: string
								  }
								| undefined
							isProtected?: boolean | undefined
							apiProtocol?: "openai" | "anthropic" | undefined
							isAnswered?: boolean | undefined
							metadata?:
								| {
										kiloCode?:
											| {
													commitRange?:
														| {
																from: string
																to: string
																fromTimeStamp?: number | undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
					  }
					| undefined
				queuedMessages?:
					| {
							text: string
							timestamp: number
							id: string
							images?: string[] | undefined
					  }[]
					| undefined
				childTaskId?: string | undefined
				tokenUsage?:
					| {
							totalTokensIn: number
							totalTokensOut: number
							totalCost: number
							contextTokens: number
							totalCacheWrites?: number | undefined
							totalCacheReads?: number | undefined
					  }
					| undefined
			}
		>
		taskAsk: z.ZodOptional<
			z.ZodObject<
				{
					ts: z.ZodNumber
					type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
					ask: z.ZodOptional<
						z.ZodEnum<
							[
								"followup",
								"command",
								"command_output",
								"completion_result",
								"tool",
								"api_req_failed",
								"resume_task",
								"resume_completed_task",
								"mistake_limit_reached",
								"browser_action_launch",
								"use_mcp_server",
								"auto_approval_max_req_reached",
								"payment_required_prompt",
								"invalid_model",
								"report_bug",
								"condense",
								"checkpoint_restore",
							]
						>
					>
					say: z.ZodOptional<
						z.ZodEnum<
							[
								"error",
								"api_req_started",
								"api_req_finished",
								"api_req_retried",
								"api_req_retry_delayed",
								"api_req_deleted",
								"text",
								"image",
								"reasoning",
								"completion_result",
								"user_feedback",
								"user_feedback_diff",
								"command_output",
								"shell_integration_warning",
								"browser_action",
								"browser_action_result",
								"mcp_server_request_started",
								"mcp_server_response",
								"subtask_result",
								"checkpoint_saved",
								"rooignore_error",
								"diff_error",
								"condense_context",
								"condense_context_error",
								"codebase_search_result",
								"user_edit_todos",
							]
						>
					>
					text: z.ZodOptional<z.ZodString>
					images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
					partial: z.ZodOptional<z.ZodBoolean>
					reasoning: z.ZodOptional<z.ZodString>
					conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
					checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
					progressStatus: z.ZodOptional<
						z.ZodObject<
							{
								icon: z.ZodOptional<z.ZodString>
								text: z.ZodOptional<z.ZodString>
							},
							"strip",
							z.ZodTypeAny,
							{
								text?: string | undefined
								icon?: string | undefined
							},
							{
								text?: string | undefined
								icon?: string | undefined
							}
						>
					>
					contextCondense: z.ZodOptional<
						z.ZodObject<
							{
								cost: z.ZodNumber
								prevContextTokens: z.ZodNumber
								newContextTokens: z.ZodNumber
								summary: z.ZodString
							},
							"strip",
							z.ZodTypeAny,
							{
								cost: number
								prevContextTokens: number
								newContextTokens: number
								summary: string
							},
							{
								cost: number
								prevContextTokens: number
								newContextTokens: number
								summary: string
							}
						>
					>
					isProtected: z.ZodOptional<z.ZodBoolean>
					apiProtocol: z.ZodOptional<z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>>
					isAnswered: z.ZodOptional<z.ZodBoolean>
					metadata: z.ZodOptional<
						z.ZodObject<
							{
								kiloCode: z.ZodOptional<
									z.ZodObject<
										{
											commitRange: z.ZodOptional<
												z.ZodObject<
													{
														from: z.ZodString
														fromTimeStamp: z.ZodOptional<z.ZodNumber>
														to: z.ZodString
													},
													"strip",
													z.ZodTypeAny,
													{
														from: string
														to: string
														fromTimeStamp?: number | undefined
													},
													{
														from: string
														to: string
														fromTimeStamp?: number | undefined
													}
												>
											>
										},
										"strip",
										z.ZodTypeAny,
										{
											commitRange?:
												| {
														from: string
														to: string
														fromTimeStamp?: number | undefined
												  }
												| undefined
										},
										{
											commitRange?:
												| {
														from: string
														to: string
														fromTimeStamp?: number | undefined
												  }
												| undefined
										}
									>
								>
							},
							"strip",
							z.ZodTypeAny,
							{
								kiloCode?:
									| {
											commitRange?:
												| {
														from: string
														to: string
														fromTimeStamp?: number | undefined
												  }
												| undefined
									  }
									| undefined
							},
							{
								kiloCode?:
									| {
											commitRange?:
												| {
														from: string
														to: string
														fromTimeStamp?: number | undefined
												  }
												| undefined
									  }
									| undefined
							}
						>
					>
				},
				"strip",
				z.ZodTypeAny,
				{
					type: "ask" | "say"
					ts: number
					text?: string | undefined
					reasoning?: string | undefined
					ask?:
						| "followup"
						| "command"
						| "command_output"
						| "completion_result"
						| "tool"
						| "api_req_failed"
						| "resume_task"
						| "resume_completed_task"
						| "mistake_limit_reached"
						| "browser_action_launch"
						| "use_mcp_server"
						| "auto_approval_max_req_reached"
						| "payment_required_prompt"
						| "invalid_model"
						| "report_bug"
						| "condense"
						| "checkpoint_restore"
						| undefined
					say?:
						| "command_output"
						| "completion_result"
						| "error"
						| "api_req_started"
						| "api_req_finished"
						| "api_req_retried"
						| "api_req_retry_delayed"
						| "api_req_deleted"
						| "text"
						| "image"
						| "reasoning"
						| "user_feedback"
						| "user_feedback_diff"
						| "shell_integration_warning"
						| "browser_action"
						| "browser_action_result"
						| "mcp_server_request_started"
						| "mcp_server_response"
						| "subtask_result"
						| "checkpoint_saved"
						| "rooignore_error"
						| "diff_error"
						| "condense_context"
						| "condense_context_error"
						| "codebase_search_result"
						| "user_edit_todos"
						| undefined
					images?: string[] | undefined
					partial?: boolean | undefined
					conversationHistoryIndex?: number | undefined
					checkpoint?: Record<string, unknown> | undefined
					progressStatus?:
						| {
								text?: string | undefined
								icon?: string | undefined
						  }
						| undefined
					contextCondense?:
						| {
								cost: number
								prevContextTokens: number
								newContextTokens: number
								summary: string
						  }
						| undefined
					isProtected?: boolean | undefined
					apiProtocol?: "openai" | "anthropic" | undefined
					isAnswered?: boolean | undefined
					metadata?:
						| {
								kiloCode?:
									| {
											commitRange?:
												| {
														from: string
														to: string
														fromTimeStamp?: number | undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
				},
				{
					type: "ask" | "say"
					ts: number
					text?: string | undefined
					reasoning?: string | undefined
					ask?:
						| "followup"
						| "command"
						| "command_output"
						| "completion_result"
						| "tool"
						| "api_req_failed"
						| "resume_task"
						| "resume_completed_task"
						| "mistake_limit_reached"
						| "browser_action_launch"
						| "use_mcp_server"
						| "auto_approval_max_req_reached"
						| "payment_required_prompt"
						| "invalid_model"
						| "report_bug"
						| "condense"
						| "checkpoint_restore"
						| undefined
					say?:
						| "command_output"
						| "completion_result"
						| "error"
						| "api_req_started"
						| "api_req_finished"
						| "api_req_retried"
						| "api_req_retry_delayed"
						| "api_req_deleted"
						| "text"
						| "image"
						| "reasoning"
						| "user_feedback"
						| "user_feedback_diff"
						| "shell_integration_warning"
						| "browser_action"
						| "browser_action_result"
						| "mcp_server_request_started"
						| "mcp_server_response"
						| "subtask_result"
						| "checkpoint_saved"
						| "rooignore_error"
						| "diff_error"
						| "condense_context"
						| "condense_context_error"
						| "codebase_search_result"
						| "user_edit_todos"
						| undefined
					images?: string[] | undefined
					partial?: boolean | undefined
					conversationHistoryIndex?: number | undefined
					checkpoint?: Record<string, unknown> | undefined
					progressStatus?:
						| {
								text?: string | undefined
								icon?: string | undefined
						  }
						| undefined
					contextCondense?:
						| {
								cost: number
								prevContextTokens: number
								newContextTokens: number
								summary: string
						  }
						| undefined
					isProtected?: boolean | undefined
					apiProtocol?: "openai" | "anthropic" | undefined
					isAnswered?: boolean | undefined
					metadata?:
						| {
								kiloCode?:
									| {
											commitRange?:
												| {
														from: string
														to: string
														fromTimeStamp?: number | undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
				}
			>
		>
		taskHistory: z.ZodArray<z.ZodString, "many">
		mode: z.ZodOptional<z.ZodString>
		modes: z.ZodOptional<
			z.ZodArray<
				z.ZodObject<
					{
						slug: z.ZodString
						name: z.ZodString
					},
					"strip",
					z.ZodTypeAny,
					{
						name: string
						slug: string
					},
					{
						name: string
						slug: string
					}
				>,
				"many"
			>
		>
		providerProfile: z.ZodOptional<z.ZodString>
		providerProfiles: z.ZodOptional<
			z.ZodArray<
				z.ZodObject<
					{
						name: z.ZodString
						provider: z.ZodOptional<z.ZodString>
					},
					"strip",
					z.ZodTypeAny,
					{
						name: string
						provider?: string | undefined
					},
					{
						name: string
						provider?: string | undefined
					}
				>,
				"many"
			>
		>
		isCloudAgent: z.ZodOptional<z.ZodBoolean>
	},
	"strip",
	z.ZodTypeAny,
	{
		task: {
			taskId: string
			taskStatus: TaskStatus
			images?: string[] | undefined
			parentTaskId?: string | undefined
			task?: string | undefined
			taskAsk?:
				| {
						type: "ask" | "say"
						ts: number
						text?: string | undefined
						reasoning?: string | undefined
						ask?:
							| "followup"
							| "command"
							| "command_output"
							| "completion_result"
							| "tool"
							| "api_req_failed"
							| "resume_task"
							| "resume_completed_task"
							| "mistake_limit_reached"
							| "browser_action_launch"
							| "use_mcp_server"
							| "auto_approval_max_req_reached"
							| "payment_required_prompt"
							| "invalid_model"
							| "report_bug"
							| "condense"
							| "checkpoint_restore"
							| undefined
						say?:
							| "command_output"
							| "completion_result"
							| "error"
							| "api_req_started"
							| "api_req_finished"
							| "api_req_retried"
							| "api_req_retry_delayed"
							| "api_req_deleted"
							| "text"
							| "image"
							| "reasoning"
							| "user_feedback"
							| "user_feedback_diff"
							| "shell_integration_warning"
							| "browser_action"
							| "browser_action_result"
							| "mcp_server_request_started"
							| "mcp_server_response"
							| "subtask_result"
							| "checkpoint_saved"
							| "rooignore_error"
							| "diff_error"
							| "condense_context"
							| "condense_context_error"
							| "codebase_search_result"
							| "user_edit_todos"
							| undefined
						images?: string[] | undefined
						partial?: boolean | undefined
						conversationHistoryIndex?: number | undefined
						checkpoint?: Record<string, unknown> | undefined
						progressStatus?:
							| {
									text?: string | undefined
									icon?: string | undefined
							  }
							| undefined
						contextCondense?:
							| {
									cost: number
									prevContextTokens: number
									newContextTokens: number
									summary: string
							  }
							| undefined
						isProtected?: boolean | undefined
						apiProtocol?: "openai" | "anthropic" | undefined
						isAnswered?: boolean | undefined
						metadata?:
							| {
									kiloCode?:
										| {
												commitRange?:
													| {
															from: string
															to: string
															fromTimeStamp?: number | undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
				  }
				| undefined
			queuedMessages?:
				| {
						text: string
						timestamp: number
						id: string
						images?: string[] | undefined
				  }[]
				| undefined
			childTaskId?: string | undefined
			tokenUsage?:
				| {
						totalTokensIn: number
						totalTokensOut: number
						totalCost: number
						contextTokens: number
						totalCacheWrites?: number | undefined
						totalCacheReads?: number | undefined
				  }
				| undefined
		}
		taskHistory: string[]
		instanceId: string
		userId: string
		workspacePath: string
		appProperties: {
			appName: string
			appVersion: string
			vscodeVersion: string
			platform: string
			editorName: string
			wrapped: boolean
			wrapper: string | null
			wrapperTitle: string | null
			wrapperCode: string | null
			wrapperVersion: string | null
			hostname?: string | undefined
		}
		lastHeartbeat: number
		modes?:
			| {
					name: string
					slug: string
			  }[]
			| undefined
		mode?: string | undefined
		providerProfiles?:
			| {
					name: string
					provider?: string | undefined
			  }[]
			| undefined
		taskAsk?:
			| {
					type: "ask" | "say"
					ts: number
					text?: string | undefined
					reasoning?: string | undefined
					ask?:
						| "followup"
						| "command"
						| "command_output"
						| "completion_result"
						| "tool"
						| "api_req_failed"
						| "resume_task"
						| "resume_completed_task"
						| "mistake_limit_reached"
						| "browser_action_launch"
						| "use_mcp_server"
						| "auto_approval_max_req_reached"
						| "payment_required_prompt"
						| "invalid_model"
						| "report_bug"
						| "condense"
						| "checkpoint_restore"
						| undefined
					say?:
						| "command_output"
						| "completion_result"
						| "error"
						| "api_req_started"
						| "api_req_finished"
						| "api_req_retried"
						| "api_req_retry_delayed"
						| "api_req_deleted"
						| "text"
						| "image"
						| "reasoning"
						| "user_feedback"
						| "user_feedback_diff"
						| "shell_integration_warning"
						| "browser_action"
						| "browser_action_result"
						| "mcp_server_request_started"
						| "mcp_server_response"
						| "subtask_result"
						| "checkpoint_saved"
						| "rooignore_error"
						| "diff_error"
						| "condense_context"
						| "condense_context_error"
						| "codebase_search_result"
						| "user_edit_todos"
						| undefined
					images?: string[] | undefined
					partial?: boolean | undefined
					conversationHistoryIndex?: number | undefined
					checkpoint?: Record<string, unknown> | undefined
					progressStatus?:
						| {
								text?: string | undefined
								icon?: string | undefined
						  }
						| undefined
					contextCondense?:
						| {
								cost: number
								prevContextTokens: number
								newContextTokens: number
								summary: string
						  }
						| undefined
					isProtected?: boolean | undefined
					apiProtocol?: "openai" | "anthropic" | undefined
					isAnswered?: boolean | undefined
					metadata?:
						| {
								kiloCode?:
									| {
											commitRange?:
												| {
														from: string
														to: string
														fromTimeStamp?: number | undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
			  }
			| undefined
		gitProperties?:
			| {
					repositoryUrl?: string | undefined
					repositoryName?: string | undefined
					defaultBranch?: string | undefined
			  }
			| undefined
		providerProfile?: string | undefined
		isCloudAgent?: boolean | undefined
	},
	{
		task: {
			taskId: string
			taskStatus: TaskStatus
			images?: string[] | undefined
			parentTaskId?: string | undefined
			task?: string | undefined
			taskAsk?:
				| {
						type: "ask" | "say"
						ts: number
						text?: string | undefined
						reasoning?: string | undefined
						ask?:
							| "followup"
							| "command"
							| "command_output"
							| "completion_result"
							| "tool"
							| "api_req_failed"
							| "resume_task"
							| "resume_completed_task"
							| "mistake_limit_reached"
							| "browser_action_launch"
							| "use_mcp_server"
							| "auto_approval_max_req_reached"
							| "payment_required_prompt"
							| "invalid_model"
							| "report_bug"
							| "condense"
							| "checkpoint_restore"
							| undefined
						say?:
							| "command_output"
							| "completion_result"
							| "error"
							| "api_req_started"
							| "api_req_finished"
							| "api_req_retried"
							| "api_req_retry_delayed"
							| "api_req_deleted"
							| "text"
							| "image"
							| "reasoning"
							| "user_feedback"
							| "user_feedback_diff"
							| "shell_integration_warning"
							| "browser_action"
							| "browser_action_result"
							| "mcp_server_request_started"
							| "mcp_server_response"
							| "subtask_result"
							| "checkpoint_saved"
							| "rooignore_error"
							| "diff_error"
							| "condense_context"
							| "condense_context_error"
							| "codebase_search_result"
							| "user_edit_todos"
							| undefined
						images?: string[] | undefined
						partial?: boolean | undefined
						conversationHistoryIndex?: number | undefined
						checkpoint?: Record<string, unknown> | undefined
						progressStatus?:
							| {
									text?: string | undefined
									icon?: string | undefined
							  }
							| undefined
						contextCondense?:
							| {
									cost: number
									prevContextTokens: number
									newContextTokens: number
									summary: string
							  }
							| undefined
						isProtected?: boolean | undefined
						apiProtocol?: "openai" | "anthropic" | undefined
						isAnswered?: boolean | undefined
						metadata?:
							| {
									kiloCode?:
										| {
												commitRange?:
													| {
															from: string
															to: string
															fromTimeStamp?: number | undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
				  }
				| undefined
			queuedMessages?:
				| {
						text: string
						timestamp: number
						id: string
						images?: string[] | undefined
				  }[]
				| undefined
			childTaskId?: string | undefined
			tokenUsage?:
				| {
						totalTokensIn: number
						totalTokensOut: number
						totalCost: number
						contextTokens: number
						totalCacheWrites?: number | undefined
						totalCacheReads?: number | undefined
				  }
				| undefined
		}
		taskHistory: string[]
		instanceId: string
		userId: string
		workspacePath: string
		appProperties: {
			appName: string
			appVersion: string
			vscodeVersion: string
			platform: string
			editorName: string
			wrapped: boolean
			wrapper: string | null
			wrapperTitle: string | null
			wrapperCode: string | null
			wrapperVersion: string | null
			hostname?: string | undefined
		}
		lastHeartbeat: number
		modes?:
			| {
					name: string
					slug: string
			  }[]
			| undefined
		mode?: string | undefined
		providerProfiles?:
			| {
					name: string
					provider?: string | undefined
			  }[]
			| undefined
		taskAsk?:
			| {
					type: "ask" | "say"
					ts: number
					text?: string | undefined
					reasoning?: string | undefined
					ask?:
						| "followup"
						| "command"
						| "command_output"
						| "completion_result"
						| "tool"
						| "api_req_failed"
						| "resume_task"
						| "resume_completed_task"
						| "mistake_limit_reached"
						| "browser_action_launch"
						| "use_mcp_server"
						| "auto_approval_max_req_reached"
						| "payment_required_prompt"
						| "invalid_model"
						| "report_bug"
						| "condense"
						| "checkpoint_restore"
						| undefined
					say?:
						| "command_output"
						| "completion_result"
						| "error"
						| "api_req_started"
						| "api_req_finished"
						| "api_req_retried"
						| "api_req_retry_delayed"
						| "api_req_deleted"
						| "text"
						| "image"
						| "reasoning"
						| "user_feedback"
						| "user_feedback_diff"
						| "shell_integration_warning"
						| "browser_action"
						| "browser_action_result"
						| "mcp_server_request_started"
						| "mcp_server_response"
						| "subtask_result"
						| "checkpoint_saved"
						| "rooignore_error"
						| "diff_error"
						| "condense_context"
						| "condense_context_error"
						| "codebase_search_result"
						| "user_edit_todos"
						| undefined
					images?: string[] | undefined
					partial?: boolean | undefined
					conversationHistoryIndex?: number | undefined
					checkpoint?: Record<string, unknown> | undefined
					progressStatus?:
						| {
								text?: string | undefined
								icon?: string | undefined
						  }
						| undefined
					contextCondense?:
						| {
								cost: number
								prevContextTokens: number
								newContextTokens: number
								summary: string
						  }
						| undefined
					isProtected?: boolean | undefined
					apiProtocol?: "openai" | "anthropic" | undefined
					isAnswered?: boolean | undefined
					metadata?:
						| {
								kiloCode?:
									| {
											commitRange?:
												| {
														from: string
														to: string
														fromTimeStamp?: number | undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
			  }
			| undefined
		gitProperties?:
			| {
					repositoryUrl?: string | undefined
					repositoryName?: string | undefined
					defaultBranch?: string | undefined
			  }
			| undefined
		providerProfile?: string | undefined
		isCloudAgent?: boolean | undefined
	}
>
export type ExtensionInstance = z.infer<typeof extensionInstanceSchema>
/**
 * ExtensionBridgeEvent
 */
export declare enum ExtensionBridgeEventName {
	TaskCreated = "taskCreated",
	TaskStarted = "taskStarted",
	TaskCompleted = "taskCompleted",
	TaskAborted = "taskAborted",
	TaskFocused = "taskFocused",
	TaskUnfocused = "taskUnfocused",
	TaskActive = "taskActive",
	TaskInteractive = "taskInteractive",
	TaskResumable = "taskResumable",
	TaskIdle = "taskIdle",
	TaskPaused = "taskPaused",
	TaskUnpaused = "taskUnpaused",
	TaskSpawned = "taskSpawned",
	TaskUserMessage = "taskUserMessage",
	TaskTokenUsageUpdated = "taskTokenUsageUpdated",
	ModeChanged = "modeChanged",
	ProviderProfileChanged = "providerProfileChanged",
	InstanceRegistered = "instance_registered",
	InstanceUnregistered = "instance_unregistered",
	HeartbeatUpdated = "heartbeat_updated",
}
export declare const extensionBridgeEventSchema: z.ZodDiscriminatedUnion<
	"type",
	[
		z.ZodObject<
			{
				type: z.ZodLiteral<ExtensionBridgeEventName.TaskCreated>
				instance: z.ZodObject<
					{
						instanceId: z.ZodString
						userId: z.ZodString
						workspacePath: z.ZodString
						appProperties: z.ZodObject<
							{
								appName: z.ZodString
								appVersion: z.ZodString
								vscodeVersion: z.ZodString
								platform: z.ZodString
								editorName: z.ZodString
								wrapped: z.ZodBoolean
								wrapper: z.ZodNullable<z.ZodString>
								wrapperTitle: z.ZodNullable<z.ZodString>
								wrapperCode: z.ZodNullable<z.ZodString>
								wrapperVersion: z.ZodNullable<z.ZodString>
								hostname: z.ZodOptional<z.ZodString>
							},
							"strip",
							z.ZodTypeAny,
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							},
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							}
						>
						gitProperties: z.ZodOptional<
							z.ZodObject<
								{
									repositoryUrl: z.ZodOptional<z.ZodString>
									repositoryName: z.ZodOptional<z.ZodString>
									defaultBranch: z.ZodOptional<z.ZodString>
								},
								"strip",
								z.ZodTypeAny,
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								},
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								}
							>
						>
						lastHeartbeat: z.ZodNumber
						task: z.ZodObject<
							{
								task: z.ZodOptional<z.ZodString>
								images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
								taskId: z.ZodString
								taskStatus: z.ZodNativeEnum<typeof TaskStatus>
								taskAsk: z.ZodOptional<
									z.ZodObject<
										{
											ts: z.ZodNumber
											type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
											ask: z.ZodOptional<
												z.ZodEnum<
													[
														"followup",
														"command",
														"command_output",
														"completion_result",
														"tool",
														"api_req_failed",
														"resume_task",
														"resume_completed_task",
														"mistake_limit_reached",
														"browser_action_launch",
														"use_mcp_server",
														"auto_approval_max_req_reached",
														"payment_required_prompt",
														"invalid_model",
														"report_bug",
														"condense",
														"checkpoint_restore",
													]
												>
											>
											say: z.ZodOptional<
												z.ZodEnum<
													[
														"error",
														"api_req_started",
														"api_req_finished",
														"api_req_retried",
														"api_req_retry_delayed",
														"api_req_deleted",
														"text",
														"image",
														"reasoning",
														"completion_result",
														"user_feedback",
														"user_feedback_diff",
														"command_output",
														"shell_integration_warning",
														"browser_action",
														"browser_action_result",
														"mcp_server_request_started",
														"mcp_server_response",
														"subtask_result",
														"checkpoint_saved",
														"rooignore_error",
														"diff_error",
														"condense_context",
														"condense_context_error",
														"codebase_search_result",
														"user_edit_todos",
													]
												>
											>
											text: z.ZodOptional<z.ZodString>
											images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											partial: z.ZodOptional<z.ZodBoolean>
											reasoning: z.ZodOptional<z.ZodString>
											conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
											checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
											progressStatus: z.ZodOptional<
												z.ZodObject<
													{
														icon: z.ZodOptional<z.ZodString>
														text: z.ZodOptional<z.ZodString>
													},
													"strip",
													z.ZodTypeAny,
													{
														text?: string | undefined
														icon?: string | undefined
													},
													{
														text?: string | undefined
														icon?: string | undefined
													}
												>
											>
											contextCondense: z.ZodOptional<
												z.ZodObject<
													{
														cost: z.ZodNumber
														prevContextTokens: z.ZodNumber
														newContextTokens: z.ZodNumber
														summary: z.ZodString
													},
													"strip",
													z.ZodTypeAny,
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													},
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													}
												>
											>
											isProtected: z.ZodOptional<z.ZodBoolean>
											apiProtocol: z.ZodOptional<
												z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
											>
											isAnswered: z.ZodOptional<z.ZodBoolean>
											metadata: z.ZodOptional<
												z.ZodObject<
													{
														kiloCode: z.ZodOptional<
															z.ZodObject<
																{
																	commitRange: z.ZodOptional<
																		z.ZodObject<
																			{
																				from: z.ZodString
																				fromTimeStamp: z.ZodOptional<z.ZodNumber>
																				to: z.ZodString
																			},
																			"strip",
																			z.ZodTypeAny,
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			},
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			}
																		>
																	>
																},
																"strip",
																z.ZodTypeAny,
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																},
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																}
															>
														>
													},
													"strip",
													z.ZodTypeAny,
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													},
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													}
												>
											>
										},
										"strip",
										z.ZodTypeAny,
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										},
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										}
									>
								>
								queuedMessages: z.ZodOptional<
									z.ZodArray<
										z.ZodObject<
											{
												timestamp: z.ZodNumber
												id: z.ZodString
												text: z.ZodString
												images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											},
											"strip",
											z.ZodTypeAny,
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											},
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											}
										>,
										"many"
									>
								>
								parentTaskId: z.ZodOptional<z.ZodString>
								childTaskId: z.ZodOptional<z.ZodString>
								tokenUsage: z.ZodOptional<
									z.ZodObject<
										{
											totalTokensIn: z.ZodNumber
											totalTokensOut: z.ZodNumber
											totalCacheWrites: z.ZodOptional<z.ZodNumber>
											totalCacheReads: z.ZodOptional<z.ZodNumber>
											totalCost: z.ZodNumber
											contextTokens: z.ZodNumber
										},
										"strip",
										z.ZodTypeAny,
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										},
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										}
									>
								>
							},
							"strip",
							z.ZodTypeAny,
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							},
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							}
						>
						taskAsk: z.ZodOptional<
							z.ZodObject<
								{
									ts: z.ZodNumber
									type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
									ask: z.ZodOptional<
										z.ZodEnum<
											[
												"followup",
												"command",
												"command_output",
												"completion_result",
												"tool",
												"api_req_failed",
												"resume_task",
												"resume_completed_task",
												"mistake_limit_reached",
												"browser_action_launch",
												"use_mcp_server",
												"auto_approval_max_req_reached",
												"payment_required_prompt",
												"invalid_model",
												"report_bug",
												"condense",
												"checkpoint_restore",
											]
										>
									>
									say: z.ZodOptional<
										z.ZodEnum<
											[
												"error",
												"api_req_started",
												"api_req_finished",
												"api_req_retried",
												"api_req_retry_delayed",
												"api_req_deleted",
												"text",
												"image",
												"reasoning",
												"completion_result",
												"user_feedback",
												"user_feedback_diff",
												"command_output",
												"shell_integration_warning",
												"browser_action",
												"browser_action_result",
												"mcp_server_request_started",
												"mcp_server_response",
												"subtask_result",
												"checkpoint_saved",
												"rooignore_error",
												"diff_error",
												"condense_context",
												"condense_context_error",
												"codebase_search_result",
												"user_edit_todos",
											]
										>
									>
									text: z.ZodOptional<z.ZodString>
									images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
									partial: z.ZodOptional<z.ZodBoolean>
									reasoning: z.ZodOptional<z.ZodString>
									conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
									checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
									progressStatus: z.ZodOptional<
										z.ZodObject<
											{
												icon: z.ZodOptional<z.ZodString>
												text: z.ZodOptional<z.ZodString>
											},
											"strip",
											z.ZodTypeAny,
											{
												text?: string | undefined
												icon?: string | undefined
											},
											{
												text?: string | undefined
												icon?: string | undefined
											}
										>
									>
									contextCondense: z.ZodOptional<
										z.ZodObject<
											{
												cost: z.ZodNumber
												prevContextTokens: z.ZodNumber
												newContextTokens: z.ZodNumber
												summary: z.ZodString
											},
											"strip",
											z.ZodTypeAny,
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											},
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											}
										>
									>
									isProtected: z.ZodOptional<z.ZodBoolean>
									apiProtocol: z.ZodOptional<
										z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
									>
									isAnswered: z.ZodOptional<z.ZodBoolean>
									metadata: z.ZodOptional<
										z.ZodObject<
											{
												kiloCode: z.ZodOptional<
													z.ZodObject<
														{
															commitRange: z.ZodOptional<
																z.ZodObject<
																	{
																		from: z.ZodString
																		fromTimeStamp: z.ZodOptional<z.ZodNumber>
																		to: z.ZodString
																	},
																	"strip",
																	z.ZodTypeAny,
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	},
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	}
																>
															>
														},
														"strip",
														z.ZodTypeAny,
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														},
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														}
													>
												>
											},
											"strip",
											z.ZodTypeAny,
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											},
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											}
										>
									>
								},
								"strip",
								z.ZodTypeAny,
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								},
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								}
							>
						>
						taskHistory: z.ZodArray<z.ZodString, "many">
						mode: z.ZodOptional<z.ZodString>
						modes: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										slug: z.ZodString
										name: z.ZodString
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										slug: string
									},
									{
										name: string
										slug: string
									}
								>,
								"many"
							>
						>
						providerProfile: z.ZodOptional<z.ZodString>
						providerProfiles: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										name: z.ZodString
										provider: z.ZodOptional<z.ZodString>
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										provider?: string | undefined
									},
									{
										name: string
										provider?: string | undefined
									}
								>,
								"many"
							>
						>
						isCloudAgent: z.ZodOptional<z.ZodBoolean>
					},
					"strip",
					z.ZodTypeAny,
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					},
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					}
				>
				timestamp: z.ZodNumber
			},
			"strip",
			z.ZodTypeAny,
			{
				type: ExtensionBridgeEventName.TaskCreated
				timestamp: number
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			},
			{
				type: ExtensionBridgeEventName.TaskCreated
				timestamp: number
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			}
		>,
		z.ZodObject<
			{
				type: z.ZodLiteral<ExtensionBridgeEventName.TaskStarted>
				instance: z.ZodObject<
					{
						instanceId: z.ZodString
						userId: z.ZodString
						workspacePath: z.ZodString
						appProperties: z.ZodObject<
							{
								appName: z.ZodString
								appVersion: z.ZodString
								vscodeVersion: z.ZodString
								platform: z.ZodString
								editorName: z.ZodString
								wrapped: z.ZodBoolean
								wrapper: z.ZodNullable<z.ZodString>
								wrapperTitle: z.ZodNullable<z.ZodString>
								wrapperCode: z.ZodNullable<z.ZodString>
								wrapperVersion: z.ZodNullable<z.ZodString>
								hostname: z.ZodOptional<z.ZodString>
							},
							"strip",
							z.ZodTypeAny,
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							},
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							}
						>
						gitProperties: z.ZodOptional<
							z.ZodObject<
								{
									repositoryUrl: z.ZodOptional<z.ZodString>
									repositoryName: z.ZodOptional<z.ZodString>
									defaultBranch: z.ZodOptional<z.ZodString>
								},
								"strip",
								z.ZodTypeAny,
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								},
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								}
							>
						>
						lastHeartbeat: z.ZodNumber
						task: z.ZodObject<
							{
								task: z.ZodOptional<z.ZodString>
								images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
								taskId: z.ZodString
								taskStatus: z.ZodNativeEnum<typeof TaskStatus>
								taskAsk: z.ZodOptional<
									z.ZodObject<
										{
											ts: z.ZodNumber
											type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
											ask: z.ZodOptional<
												z.ZodEnum<
													[
														"followup",
														"command",
														"command_output",
														"completion_result",
														"tool",
														"api_req_failed",
														"resume_task",
														"resume_completed_task",
														"mistake_limit_reached",
														"browser_action_launch",
														"use_mcp_server",
														"auto_approval_max_req_reached",
														"payment_required_prompt",
														"invalid_model",
														"report_bug",
														"condense",
														"checkpoint_restore",
													]
												>
											>
											say: z.ZodOptional<
												z.ZodEnum<
													[
														"error",
														"api_req_started",
														"api_req_finished",
														"api_req_retried",
														"api_req_retry_delayed",
														"api_req_deleted",
														"text",
														"image",
														"reasoning",
														"completion_result",
														"user_feedback",
														"user_feedback_diff",
														"command_output",
														"shell_integration_warning",
														"browser_action",
														"browser_action_result",
														"mcp_server_request_started",
														"mcp_server_response",
														"subtask_result",
														"checkpoint_saved",
														"rooignore_error",
														"diff_error",
														"condense_context",
														"condense_context_error",
														"codebase_search_result",
														"user_edit_todos",
													]
												>
											>
											text: z.ZodOptional<z.ZodString>
											images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											partial: z.ZodOptional<z.ZodBoolean>
											reasoning: z.ZodOptional<z.ZodString>
											conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
											checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
											progressStatus: z.ZodOptional<
												z.ZodObject<
													{
														icon: z.ZodOptional<z.ZodString>
														text: z.ZodOptional<z.ZodString>
													},
													"strip",
													z.ZodTypeAny,
													{
														text?: string | undefined
														icon?: string | undefined
													},
													{
														text?: string | undefined
														icon?: string | undefined
													}
												>
											>
											contextCondense: z.ZodOptional<
												z.ZodObject<
													{
														cost: z.ZodNumber
														prevContextTokens: z.ZodNumber
														newContextTokens: z.ZodNumber
														summary: z.ZodString
													},
													"strip",
													z.ZodTypeAny,
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													},
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													}
												>
											>
											isProtected: z.ZodOptional<z.ZodBoolean>
											apiProtocol: z.ZodOptional<
												z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
											>
											isAnswered: z.ZodOptional<z.ZodBoolean>
											metadata: z.ZodOptional<
												z.ZodObject<
													{
														kiloCode: z.ZodOptional<
															z.ZodObject<
																{
																	commitRange: z.ZodOptional<
																		z.ZodObject<
																			{
																				from: z.ZodString
																				fromTimeStamp: z.ZodOptional<z.ZodNumber>
																				to: z.ZodString
																			},
																			"strip",
																			z.ZodTypeAny,
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			},
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			}
																		>
																	>
																},
																"strip",
																z.ZodTypeAny,
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																},
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																}
															>
														>
													},
													"strip",
													z.ZodTypeAny,
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													},
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													}
												>
											>
										},
										"strip",
										z.ZodTypeAny,
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										},
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										}
									>
								>
								queuedMessages: z.ZodOptional<
									z.ZodArray<
										z.ZodObject<
											{
												timestamp: z.ZodNumber
												id: z.ZodString
												text: z.ZodString
												images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											},
											"strip",
											z.ZodTypeAny,
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											},
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											}
										>,
										"many"
									>
								>
								parentTaskId: z.ZodOptional<z.ZodString>
								childTaskId: z.ZodOptional<z.ZodString>
								tokenUsage: z.ZodOptional<
									z.ZodObject<
										{
											totalTokensIn: z.ZodNumber
											totalTokensOut: z.ZodNumber
											totalCacheWrites: z.ZodOptional<z.ZodNumber>
											totalCacheReads: z.ZodOptional<z.ZodNumber>
											totalCost: z.ZodNumber
											contextTokens: z.ZodNumber
										},
										"strip",
										z.ZodTypeAny,
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										},
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										}
									>
								>
							},
							"strip",
							z.ZodTypeAny,
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							},
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							}
						>
						taskAsk: z.ZodOptional<
							z.ZodObject<
								{
									ts: z.ZodNumber
									type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
									ask: z.ZodOptional<
										z.ZodEnum<
											[
												"followup",
												"command",
												"command_output",
												"completion_result",
												"tool",
												"api_req_failed",
												"resume_task",
												"resume_completed_task",
												"mistake_limit_reached",
												"browser_action_launch",
												"use_mcp_server",
												"auto_approval_max_req_reached",
												"payment_required_prompt",
												"invalid_model",
												"report_bug",
												"condense",
												"checkpoint_restore",
											]
										>
									>
									say: z.ZodOptional<
										z.ZodEnum<
											[
												"error",
												"api_req_started",
												"api_req_finished",
												"api_req_retried",
												"api_req_retry_delayed",
												"api_req_deleted",
												"text",
												"image",
												"reasoning",
												"completion_result",
												"user_feedback",
												"user_feedback_diff",
												"command_output",
												"shell_integration_warning",
												"browser_action",
												"browser_action_result",
												"mcp_server_request_started",
												"mcp_server_response",
												"subtask_result",
												"checkpoint_saved",
												"rooignore_error",
												"diff_error",
												"condense_context",
												"condense_context_error",
												"codebase_search_result",
												"user_edit_todos",
											]
										>
									>
									text: z.ZodOptional<z.ZodString>
									images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
									partial: z.ZodOptional<z.ZodBoolean>
									reasoning: z.ZodOptional<z.ZodString>
									conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
									checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
									progressStatus: z.ZodOptional<
										z.ZodObject<
											{
												icon: z.ZodOptional<z.ZodString>
												text: z.ZodOptional<z.ZodString>
											},
											"strip",
											z.ZodTypeAny,
											{
												text?: string | undefined
												icon?: string | undefined
											},
											{
												text?: string | undefined
												icon?: string | undefined
											}
										>
									>
									contextCondense: z.ZodOptional<
										z.ZodObject<
											{
												cost: z.ZodNumber
												prevContextTokens: z.ZodNumber
												newContextTokens: z.ZodNumber
												summary: z.ZodString
											},
											"strip",
											z.ZodTypeAny,
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											},
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											}
										>
									>
									isProtected: z.ZodOptional<z.ZodBoolean>
									apiProtocol: z.ZodOptional<
										z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
									>
									isAnswered: z.ZodOptional<z.ZodBoolean>
									metadata: z.ZodOptional<
										z.ZodObject<
											{
												kiloCode: z.ZodOptional<
													z.ZodObject<
														{
															commitRange: z.ZodOptional<
																z.ZodObject<
																	{
																		from: z.ZodString
																		fromTimeStamp: z.ZodOptional<z.ZodNumber>
																		to: z.ZodString
																	},
																	"strip",
																	z.ZodTypeAny,
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	},
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	}
																>
															>
														},
														"strip",
														z.ZodTypeAny,
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														},
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														}
													>
												>
											},
											"strip",
											z.ZodTypeAny,
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											},
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											}
										>
									>
								},
								"strip",
								z.ZodTypeAny,
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								},
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								}
							>
						>
						taskHistory: z.ZodArray<z.ZodString, "many">
						mode: z.ZodOptional<z.ZodString>
						modes: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										slug: z.ZodString
										name: z.ZodString
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										slug: string
									},
									{
										name: string
										slug: string
									}
								>,
								"many"
							>
						>
						providerProfile: z.ZodOptional<z.ZodString>
						providerProfiles: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										name: z.ZodString
										provider: z.ZodOptional<z.ZodString>
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										provider?: string | undefined
									},
									{
										name: string
										provider?: string | undefined
									}
								>,
								"many"
							>
						>
						isCloudAgent: z.ZodOptional<z.ZodBoolean>
					},
					"strip",
					z.ZodTypeAny,
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					},
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					}
				>
				timestamp: z.ZodNumber
			},
			"strip",
			z.ZodTypeAny,
			{
				type: ExtensionBridgeEventName.TaskStarted
				timestamp: number
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			},
			{
				type: ExtensionBridgeEventName.TaskStarted
				timestamp: number
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			}
		>,
		z.ZodObject<
			{
				type: z.ZodLiteral<ExtensionBridgeEventName.TaskCompleted>
				instance: z.ZodObject<
					{
						instanceId: z.ZodString
						userId: z.ZodString
						workspacePath: z.ZodString
						appProperties: z.ZodObject<
							{
								appName: z.ZodString
								appVersion: z.ZodString
								vscodeVersion: z.ZodString
								platform: z.ZodString
								editorName: z.ZodString
								wrapped: z.ZodBoolean
								wrapper: z.ZodNullable<z.ZodString>
								wrapperTitle: z.ZodNullable<z.ZodString>
								wrapperCode: z.ZodNullable<z.ZodString>
								wrapperVersion: z.ZodNullable<z.ZodString>
								hostname: z.ZodOptional<z.ZodString>
							},
							"strip",
							z.ZodTypeAny,
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							},
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							}
						>
						gitProperties: z.ZodOptional<
							z.ZodObject<
								{
									repositoryUrl: z.ZodOptional<z.ZodString>
									repositoryName: z.ZodOptional<z.ZodString>
									defaultBranch: z.ZodOptional<z.ZodString>
								},
								"strip",
								z.ZodTypeAny,
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								},
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								}
							>
						>
						lastHeartbeat: z.ZodNumber
						task: z.ZodObject<
							{
								task: z.ZodOptional<z.ZodString>
								images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
								taskId: z.ZodString
								taskStatus: z.ZodNativeEnum<typeof TaskStatus>
								taskAsk: z.ZodOptional<
									z.ZodObject<
										{
											ts: z.ZodNumber
											type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
											ask: z.ZodOptional<
												z.ZodEnum<
													[
														"followup",
														"command",
														"command_output",
														"completion_result",
														"tool",
														"api_req_failed",
														"resume_task",
														"resume_completed_task",
														"mistake_limit_reached",
														"browser_action_launch",
														"use_mcp_server",
														"auto_approval_max_req_reached",
														"payment_required_prompt",
														"invalid_model",
														"report_bug",
														"condense",
														"checkpoint_restore",
													]
												>
											>
											say: z.ZodOptional<
												z.ZodEnum<
													[
														"error",
														"api_req_started",
														"api_req_finished",
														"api_req_retried",
														"api_req_retry_delayed",
														"api_req_deleted",
														"text",
														"image",
														"reasoning",
														"completion_result",
														"user_feedback",
														"user_feedback_diff",
														"command_output",
														"shell_integration_warning",
														"browser_action",
														"browser_action_result",
														"mcp_server_request_started",
														"mcp_server_response",
														"subtask_result",
														"checkpoint_saved",
														"rooignore_error",
														"diff_error",
														"condense_context",
														"condense_context_error",
														"codebase_search_result",
														"user_edit_todos",
													]
												>
											>
											text: z.ZodOptional<z.ZodString>
											images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											partial: z.ZodOptional<z.ZodBoolean>
											reasoning: z.ZodOptional<z.ZodString>
											conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
											checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
											progressStatus: z.ZodOptional<
												z.ZodObject<
													{
														icon: z.ZodOptional<z.ZodString>
														text: z.ZodOptional<z.ZodString>
													},
													"strip",
													z.ZodTypeAny,
													{
														text?: string | undefined
														icon?: string | undefined
													},
													{
														text?: string | undefined
														icon?: string | undefined
													}
												>
											>
											contextCondense: z.ZodOptional<
												z.ZodObject<
													{
														cost: z.ZodNumber
														prevContextTokens: z.ZodNumber
														newContextTokens: z.ZodNumber
														summary: z.ZodString
													},
													"strip",
													z.ZodTypeAny,
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													},
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													}
												>
											>
											isProtected: z.ZodOptional<z.ZodBoolean>
											apiProtocol: z.ZodOptional<
												z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
											>
											isAnswered: z.ZodOptional<z.ZodBoolean>
											metadata: z.ZodOptional<
												z.ZodObject<
													{
														kiloCode: z.ZodOptional<
															z.ZodObject<
																{
																	commitRange: z.ZodOptional<
																		z.ZodObject<
																			{
																				from: z.ZodString
																				fromTimeStamp: z.ZodOptional<z.ZodNumber>
																				to: z.ZodString
																			},
																			"strip",
																			z.ZodTypeAny,
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			},
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			}
																		>
																	>
																},
																"strip",
																z.ZodTypeAny,
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																},
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																}
															>
														>
													},
													"strip",
													z.ZodTypeAny,
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													},
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													}
												>
											>
										},
										"strip",
										z.ZodTypeAny,
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										},
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										}
									>
								>
								queuedMessages: z.ZodOptional<
									z.ZodArray<
										z.ZodObject<
											{
												timestamp: z.ZodNumber
												id: z.ZodString
												text: z.ZodString
												images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											},
											"strip",
											z.ZodTypeAny,
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											},
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											}
										>,
										"many"
									>
								>
								parentTaskId: z.ZodOptional<z.ZodString>
								childTaskId: z.ZodOptional<z.ZodString>
								tokenUsage: z.ZodOptional<
									z.ZodObject<
										{
											totalTokensIn: z.ZodNumber
											totalTokensOut: z.ZodNumber
											totalCacheWrites: z.ZodOptional<z.ZodNumber>
											totalCacheReads: z.ZodOptional<z.ZodNumber>
											totalCost: z.ZodNumber
											contextTokens: z.ZodNumber
										},
										"strip",
										z.ZodTypeAny,
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										},
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										}
									>
								>
							},
							"strip",
							z.ZodTypeAny,
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							},
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							}
						>
						taskAsk: z.ZodOptional<
							z.ZodObject<
								{
									ts: z.ZodNumber
									type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
									ask: z.ZodOptional<
										z.ZodEnum<
											[
												"followup",
												"command",
												"command_output",
												"completion_result",
												"tool",
												"api_req_failed",
												"resume_task",
												"resume_completed_task",
												"mistake_limit_reached",
												"browser_action_launch",
												"use_mcp_server",
												"auto_approval_max_req_reached",
												"payment_required_prompt",
												"invalid_model",
												"report_bug",
												"condense",
												"checkpoint_restore",
											]
										>
									>
									say: z.ZodOptional<
										z.ZodEnum<
											[
												"error",
												"api_req_started",
												"api_req_finished",
												"api_req_retried",
												"api_req_retry_delayed",
												"api_req_deleted",
												"text",
												"image",
												"reasoning",
												"completion_result",
												"user_feedback",
												"user_feedback_diff",
												"command_output",
												"shell_integration_warning",
												"browser_action",
												"browser_action_result",
												"mcp_server_request_started",
												"mcp_server_response",
												"subtask_result",
												"checkpoint_saved",
												"rooignore_error",
												"diff_error",
												"condense_context",
												"condense_context_error",
												"codebase_search_result",
												"user_edit_todos",
											]
										>
									>
									text: z.ZodOptional<z.ZodString>
									images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
									partial: z.ZodOptional<z.ZodBoolean>
									reasoning: z.ZodOptional<z.ZodString>
									conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
									checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
									progressStatus: z.ZodOptional<
										z.ZodObject<
											{
												icon: z.ZodOptional<z.ZodString>
												text: z.ZodOptional<z.ZodString>
											},
											"strip",
											z.ZodTypeAny,
											{
												text?: string | undefined
												icon?: string | undefined
											},
											{
												text?: string | undefined
												icon?: string | undefined
											}
										>
									>
									contextCondense: z.ZodOptional<
										z.ZodObject<
											{
												cost: z.ZodNumber
												prevContextTokens: z.ZodNumber
												newContextTokens: z.ZodNumber
												summary: z.ZodString
											},
											"strip",
											z.ZodTypeAny,
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											},
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											}
										>
									>
									isProtected: z.ZodOptional<z.ZodBoolean>
									apiProtocol: z.ZodOptional<
										z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
									>
									isAnswered: z.ZodOptional<z.ZodBoolean>
									metadata: z.ZodOptional<
										z.ZodObject<
											{
												kiloCode: z.ZodOptional<
													z.ZodObject<
														{
															commitRange: z.ZodOptional<
																z.ZodObject<
																	{
																		from: z.ZodString
																		fromTimeStamp: z.ZodOptional<z.ZodNumber>
																		to: z.ZodString
																	},
																	"strip",
																	z.ZodTypeAny,
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	},
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	}
																>
															>
														},
														"strip",
														z.ZodTypeAny,
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														},
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														}
													>
												>
											},
											"strip",
											z.ZodTypeAny,
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											},
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											}
										>
									>
								},
								"strip",
								z.ZodTypeAny,
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								},
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								}
							>
						>
						taskHistory: z.ZodArray<z.ZodString, "many">
						mode: z.ZodOptional<z.ZodString>
						modes: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										slug: z.ZodString
										name: z.ZodString
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										slug: string
									},
									{
										name: string
										slug: string
									}
								>,
								"many"
							>
						>
						providerProfile: z.ZodOptional<z.ZodString>
						providerProfiles: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										name: z.ZodString
										provider: z.ZodOptional<z.ZodString>
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										provider?: string | undefined
									},
									{
										name: string
										provider?: string | undefined
									}
								>,
								"many"
							>
						>
						isCloudAgent: z.ZodOptional<z.ZodBoolean>
					},
					"strip",
					z.ZodTypeAny,
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					},
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					}
				>
				timestamp: z.ZodNumber
			},
			"strip",
			z.ZodTypeAny,
			{
				type: ExtensionBridgeEventName.TaskCompleted
				timestamp: number
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			},
			{
				type: ExtensionBridgeEventName.TaskCompleted
				timestamp: number
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			}
		>,
		z.ZodObject<
			{
				type: z.ZodLiteral<ExtensionBridgeEventName.TaskAborted>
				instance: z.ZodObject<
					{
						instanceId: z.ZodString
						userId: z.ZodString
						workspacePath: z.ZodString
						appProperties: z.ZodObject<
							{
								appName: z.ZodString
								appVersion: z.ZodString
								vscodeVersion: z.ZodString
								platform: z.ZodString
								editorName: z.ZodString
								wrapped: z.ZodBoolean
								wrapper: z.ZodNullable<z.ZodString>
								wrapperTitle: z.ZodNullable<z.ZodString>
								wrapperCode: z.ZodNullable<z.ZodString>
								wrapperVersion: z.ZodNullable<z.ZodString>
								hostname: z.ZodOptional<z.ZodString>
							},
							"strip",
							z.ZodTypeAny,
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							},
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							}
						>
						gitProperties: z.ZodOptional<
							z.ZodObject<
								{
									repositoryUrl: z.ZodOptional<z.ZodString>
									repositoryName: z.ZodOptional<z.ZodString>
									defaultBranch: z.ZodOptional<z.ZodString>
								},
								"strip",
								z.ZodTypeAny,
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								},
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								}
							>
						>
						lastHeartbeat: z.ZodNumber
						task: z.ZodObject<
							{
								task: z.ZodOptional<z.ZodString>
								images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
								taskId: z.ZodString
								taskStatus: z.ZodNativeEnum<typeof TaskStatus>
								taskAsk: z.ZodOptional<
									z.ZodObject<
										{
											ts: z.ZodNumber
											type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
											ask: z.ZodOptional<
												z.ZodEnum<
													[
														"followup",
														"command",
														"command_output",
														"completion_result",
														"tool",
														"api_req_failed",
														"resume_task",
														"resume_completed_task",
														"mistake_limit_reached",
														"browser_action_launch",
														"use_mcp_server",
														"auto_approval_max_req_reached",
														"payment_required_prompt",
														"invalid_model",
														"report_bug",
														"condense",
														"checkpoint_restore",
													]
												>
											>
											say: z.ZodOptional<
												z.ZodEnum<
													[
														"error",
														"api_req_started",
														"api_req_finished",
														"api_req_retried",
														"api_req_retry_delayed",
														"api_req_deleted",
														"text",
														"image",
														"reasoning",
														"completion_result",
														"user_feedback",
														"user_feedback_diff",
														"command_output",
														"shell_integration_warning",
														"browser_action",
														"browser_action_result",
														"mcp_server_request_started",
														"mcp_server_response",
														"subtask_result",
														"checkpoint_saved",
														"rooignore_error",
														"diff_error",
														"condense_context",
														"condense_context_error",
														"codebase_search_result",
														"user_edit_todos",
													]
												>
											>
											text: z.ZodOptional<z.ZodString>
											images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											partial: z.ZodOptional<z.ZodBoolean>
											reasoning: z.ZodOptional<z.ZodString>
											conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
											checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
											progressStatus: z.ZodOptional<
												z.ZodObject<
													{
														icon: z.ZodOptional<z.ZodString>
														text: z.ZodOptional<z.ZodString>
													},
													"strip",
													z.ZodTypeAny,
													{
														text?: string | undefined
														icon?: string | undefined
													},
													{
														text?: string | undefined
														icon?: string | undefined
													}
												>
											>
											contextCondense: z.ZodOptional<
												z.ZodObject<
													{
														cost: z.ZodNumber
														prevContextTokens: z.ZodNumber
														newContextTokens: z.ZodNumber
														summary: z.ZodString
													},
													"strip",
													z.ZodTypeAny,
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													},
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													}
												>
											>
											isProtected: z.ZodOptional<z.ZodBoolean>
											apiProtocol: z.ZodOptional<
												z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
											>
											isAnswered: z.ZodOptional<z.ZodBoolean>
											metadata: z.ZodOptional<
												z.ZodObject<
													{
														kiloCode: z.ZodOptional<
															z.ZodObject<
																{
																	commitRange: z.ZodOptional<
																		z.ZodObject<
																			{
																				from: z.ZodString
																				fromTimeStamp: z.ZodOptional<z.ZodNumber>
																				to: z.ZodString
																			},
																			"strip",
																			z.ZodTypeAny,
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			},
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			}
																		>
																	>
																},
																"strip",
																z.ZodTypeAny,
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																},
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																}
															>
														>
													},
													"strip",
													z.ZodTypeAny,
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													},
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													}
												>
											>
										},
										"strip",
										z.ZodTypeAny,
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										},
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										}
									>
								>
								queuedMessages: z.ZodOptional<
									z.ZodArray<
										z.ZodObject<
											{
												timestamp: z.ZodNumber
												id: z.ZodString
												text: z.ZodString
												images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											},
											"strip",
											z.ZodTypeAny,
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											},
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											}
										>,
										"many"
									>
								>
								parentTaskId: z.ZodOptional<z.ZodString>
								childTaskId: z.ZodOptional<z.ZodString>
								tokenUsage: z.ZodOptional<
									z.ZodObject<
										{
											totalTokensIn: z.ZodNumber
											totalTokensOut: z.ZodNumber
											totalCacheWrites: z.ZodOptional<z.ZodNumber>
											totalCacheReads: z.ZodOptional<z.ZodNumber>
											totalCost: z.ZodNumber
											contextTokens: z.ZodNumber
										},
										"strip",
										z.ZodTypeAny,
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										},
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										}
									>
								>
							},
							"strip",
							z.ZodTypeAny,
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							},
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							}
						>
						taskAsk: z.ZodOptional<
							z.ZodObject<
								{
									ts: z.ZodNumber
									type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
									ask: z.ZodOptional<
										z.ZodEnum<
											[
												"followup",
												"command",
												"command_output",
												"completion_result",
												"tool",
												"api_req_failed",
												"resume_task",
												"resume_completed_task",
												"mistake_limit_reached",
												"browser_action_launch",
												"use_mcp_server",
												"auto_approval_max_req_reached",
												"payment_required_prompt",
												"invalid_model",
												"report_bug",
												"condense",
												"checkpoint_restore",
											]
										>
									>
									say: z.ZodOptional<
										z.ZodEnum<
											[
												"error",
												"api_req_started",
												"api_req_finished",
												"api_req_retried",
												"api_req_retry_delayed",
												"api_req_deleted",
												"text",
												"image",
												"reasoning",
												"completion_result",
												"user_feedback",
												"user_feedback_diff",
												"command_output",
												"shell_integration_warning",
												"browser_action",
												"browser_action_result",
												"mcp_server_request_started",
												"mcp_server_response",
												"subtask_result",
												"checkpoint_saved",
												"rooignore_error",
												"diff_error",
												"condense_context",
												"condense_context_error",
												"codebase_search_result",
												"user_edit_todos",
											]
										>
									>
									text: z.ZodOptional<z.ZodString>
									images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
									partial: z.ZodOptional<z.ZodBoolean>
									reasoning: z.ZodOptional<z.ZodString>
									conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
									checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
									progressStatus: z.ZodOptional<
										z.ZodObject<
											{
												icon: z.ZodOptional<z.ZodString>
												text: z.ZodOptional<z.ZodString>
											},
											"strip",
											z.ZodTypeAny,
											{
												text?: string | undefined
												icon?: string | undefined
											},
											{
												text?: string | undefined
												icon?: string | undefined
											}
										>
									>
									contextCondense: z.ZodOptional<
										z.ZodObject<
											{
												cost: z.ZodNumber
												prevContextTokens: z.ZodNumber
												newContextTokens: z.ZodNumber
												summary: z.ZodString
											},
											"strip",
											z.ZodTypeAny,
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											},
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											}
										>
									>
									isProtected: z.ZodOptional<z.ZodBoolean>
									apiProtocol: z.ZodOptional<
										z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
									>
									isAnswered: z.ZodOptional<z.ZodBoolean>
									metadata: z.ZodOptional<
										z.ZodObject<
											{
												kiloCode: z.ZodOptional<
													z.ZodObject<
														{
															commitRange: z.ZodOptional<
																z.ZodObject<
																	{
																		from: z.ZodString
																		fromTimeStamp: z.ZodOptional<z.ZodNumber>
																		to: z.ZodString
																	},
																	"strip",
																	z.ZodTypeAny,
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	},
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	}
																>
															>
														},
														"strip",
														z.ZodTypeAny,
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														},
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														}
													>
												>
											},
											"strip",
											z.ZodTypeAny,
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											},
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											}
										>
									>
								},
								"strip",
								z.ZodTypeAny,
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								},
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								}
							>
						>
						taskHistory: z.ZodArray<z.ZodString, "many">
						mode: z.ZodOptional<z.ZodString>
						modes: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										slug: z.ZodString
										name: z.ZodString
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										slug: string
									},
									{
										name: string
										slug: string
									}
								>,
								"many"
							>
						>
						providerProfile: z.ZodOptional<z.ZodString>
						providerProfiles: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										name: z.ZodString
										provider: z.ZodOptional<z.ZodString>
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										provider?: string | undefined
									},
									{
										name: string
										provider?: string | undefined
									}
								>,
								"many"
							>
						>
						isCloudAgent: z.ZodOptional<z.ZodBoolean>
					},
					"strip",
					z.ZodTypeAny,
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					},
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					}
				>
				timestamp: z.ZodNumber
			},
			"strip",
			z.ZodTypeAny,
			{
				type: ExtensionBridgeEventName.TaskAborted
				timestamp: number
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			},
			{
				type: ExtensionBridgeEventName.TaskAborted
				timestamp: number
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			}
		>,
		z.ZodObject<
			{
				type: z.ZodLiteral<ExtensionBridgeEventName.TaskFocused>
				instance: z.ZodObject<
					{
						instanceId: z.ZodString
						userId: z.ZodString
						workspacePath: z.ZodString
						appProperties: z.ZodObject<
							{
								appName: z.ZodString
								appVersion: z.ZodString
								vscodeVersion: z.ZodString
								platform: z.ZodString
								editorName: z.ZodString
								wrapped: z.ZodBoolean
								wrapper: z.ZodNullable<z.ZodString>
								wrapperTitle: z.ZodNullable<z.ZodString>
								wrapperCode: z.ZodNullable<z.ZodString>
								wrapperVersion: z.ZodNullable<z.ZodString>
								hostname: z.ZodOptional<z.ZodString>
							},
							"strip",
							z.ZodTypeAny,
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							},
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							}
						>
						gitProperties: z.ZodOptional<
							z.ZodObject<
								{
									repositoryUrl: z.ZodOptional<z.ZodString>
									repositoryName: z.ZodOptional<z.ZodString>
									defaultBranch: z.ZodOptional<z.ZodString>
								},
								"strip",
								z.ZodTypeAny,
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								},
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								}
							>
						>
						lastHeartbeat: z.ZodNumber
						task: z.ZodObject<
							{
								task: z.ZodOptional<z.ZodString>
								images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
								taskId: z.ZodString
								taskStatus: z.ZodNativeEnum<typeof TaskStatus>
								taskAsk: z.ZodOptional<
									z.ZodObject<
										{
											ts: z.ZodNumber
											type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
											ask: z.ZodOptional<
												z.ZodEnum<
													[
														"followup",
														"command",
														"command_output",
														"completion_result",
														"tool",
														"api_req_failed",
														"resume_task",
														"resume_completed_task",
														"mistake_limit_reached",
														"browser_action_launch",
														"use_mcp_server",
														"auto_approval_max_req_reached",
														"payment_required_prompt",
														"invalid_model",
														"report_bug",
														"condense",
														"checkpoint_restore",
													]
												>
											>
											say: z.ZodOptional<
												z.ZodEnum<
													[
														"error",
														"api_req_started",
														"api_req_finished",
														"api_req_retried",
														"api_req_retry_delayed",
														"api_req_deleted",
														"text",
														"image",
														"reasoning",
														"completion_result",
														"user_feedback",
														"user_feedback_diff",
														"command_output",
														"shell_integration_warning",
														"browser_action",
														"browser_action_result",
														"mcp_server_request_started",
														"mcp_server_response",
														"subtask_result",
														"checkpoint_saved",
														"rooignore_error",
														"diff_error",
														"condense_context",
														"condense_context_error",
														"codebase_search_result",
														"user_edit_todos",
													]
												>
											>
											text: z.ZodOptional<z.ZodString>
											images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											partial: z.ZodOptional<z.ZodBoolean>
											reasoning: z.ZodOptional<z.ZodString>
											conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
											checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
											progressStatus: z.ZodOptional<
												z.ZodObject<
													{
														icon: z.ZodOptional<z.ZodString>
														text: z.ZodOptional<z.ZodString>
													},
													"strip",
													z.ZodTypeAny,
													{
														text?: string | undefined
														icon?: string | undefined
													},
													{
														text?: string | undefined
														icon?: string | undefined
													}
												>
											>
											contextCondense: z.ZodOptional<
												z.ZodObject<
													{
														cost: z.ZodNumber
														prevContextTokens: z.ZodNumber
														newContextTokens: z.ZodNumber
														summary: z.ZodString
													},
													"strip",
													z.ZodTypeAny,
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													},
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													}
												>
											>
											isProtected: z.ZodOptional<z.ZodBoolean>
											apiProtocol: z.ZodOptional<
												z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
											>
											isAnswered: z.ZodOptional<z.ZodBoolean>
											metadata: z.ZodOptional<
												z.ZodObject<
													{
														kiloCode: z.ZodOptional<
															z.ZodObject<
																{
																	commitRange: z.ZodOptional<
																		z.ZodObject<
																			{
																				from: z.ZodString
																				fromTimeStamp: z.ZodOptional<z.ZodNumber>
																				to: z.ZodString
																			},
																			"strip",
																			z.ZodTypeAny,
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			},
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			}
																		>
																	>
																},
																"strip",
																z.ZodTypeAny,
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																},
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																}
															>
														>
													},
													"strip",
													z.ZodTypeAny,
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													},
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													}
												>
											>
										},
										"strip",
										z.ZodTypeAny,
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										},
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										}
									>
								>
								queuedMessages: z.ZodOptional<
									z.ZodArray<
										z.ZodObject<
											{
												timestamp: z.ZodNumber
												id: z.ZodString
												text: z.ZodString
												images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											},
											"strip",
											z.ZodTypeAny,
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											},
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											}
										>,
										"many"
									>
								>
								parentTaskId: z.ZodOptional<z.ZodString>
								childTaskId: z.ZodOptional<z.ZodString>
								tokenUsage: z.ZodOptional<
									z.ZodObject<
										{
											totalTokensIn: z.ZodNumber
											totalTokensOut: z.ZodNumber
											totalCacheWrites: z.ZodOptional<z.ZodNumber>
											totalCacheReads: z.ZodOptional<z.ZodNumber>
											totalCost: z.ZodNumber
											contextTokens: z.ZodNumber
										},
										"strip",
										z.ZodTypeAny,
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										},
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										}
									>
								>
							},
							"strip",
							z.ZodTypeAny,
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							},
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							}
						>
						taskAsk: z.ZodOptional<
							z.ZodObject<
								{
									ts: z.ZodNumber
									type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
									ask: z.ZodOptional<
										z.ZodEnum<
											[
												"followup",
												"command",
												"command_output",
												"completion_result",
												"tool",
												"api_req_failed",
												"resume_task",
												"resume_completed_task",
												"mistake_limit_reached",
												"browser_action_launch",
												"use_mcp_server",
												"auto_approval_max_req_reached",
												"payment_required_prompt",
												"invalid_model",
												"report_bug",
												"condense",
												"checkpoint_restore",
											]
										>
									>
									say: z.ZodOptional<
										z.ZodEnum<
											[
												"error",
												"api_req_started",
												"api_req_finished",
												"api_req_retried",
												"api_req_retry_delayed",
												"api_req_deleted",
												"text",
												"image",
												"reasoning",
												"completion_result",
												"user_feedback",
												"user_feedback_diff",
												"command_output",
												"shell_integration_warning",
												"browser_action",
												"browser_action_result",
												"mcp_server_request_started",
												"mcp_server_response",
												"subtask_result",
												"checkpoint_saved",
												"rooignore_error",
												"diff_error",
												"condense_context",
												"condense_context_error",
												"codebase_search_result",
												"user_edit_todos",
											]
										>
									>
									text: z.ZodOptional<z.ZodString>
									images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
									partial: z.ZodOptional<z.ZodBoolean>
									reasoning: z.ZodOptional<z.ZodString>
									conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
									checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
									progressStatus: z.ZodOptional<
										z.ZodObject<
											{
												icon: z.ZodOptional<z.ZodString>
												text: z.ZodOptional<z.ZodString>
											},
											"strip",
											z.ZodTypeAny,
											{
												text?: string | undefined
												icon?: string | undefined
											},
											{
												text?: string | undefined
												icon?: string | undefined
											}
										>
									>
									contextCondense: z.ZodOptional<
										z.ZodObject<
											{
												cost: z.ZodNumber
												prevContextTokens: z.ZodNumber
												newContextTokens: z.ZodNumber
												summary: z.ZodString
											},
											"strip",
											z.ZodTypeAny,
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											},
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											}
										>
									>
									isProtected: z.ZodOptional<z.ZodBoolean>
									apiProtocol: z.ZodOptional<
										z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
									>
									isAnswered: z.ZodOptional<z.ZodBoolean>
									metadata: z.ZodOptional<
										z.ZodObject<
											{
												kiloCode: z.ZodOptional<
													z.ZodObject<
														{
															commitRange: z.ZodOptional<
																z.ZodObject<
																	{
																		from: z.ZodString
																		fromTimeStamp: z.ZodOptional<z.ZodNumber>
																		to: z.ZodString
																	},
																	"strip",
																	z.ZodTypeAny,
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	},
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	}
																>
															>
														},
														"strip",
														z.ZodTypeAny,
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														},
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														}
													>
												>
											},
											"strip",
											z.ZodTypeAny,
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											},
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											}
										>
									>
								},
								"strip",
								z.ZodTypeAny,
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								},
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								}
							>
						>
						taskHistory: z.ZodArray<z.ZodString, "many">
						mode: z.ZodOptional<z.ZodString>
						modes: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										slug: z.ZodString
										name: z.ZodString
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										slug: string
									},
									{
										name: string
										slug: string
									}
								>,
								"many"
							>
						>
						providerProfile: z.ZodOptional<z.ZodString>
						providerProfiles: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										name: z.ZodString
										provider: z.ZodOptional<z.ZodString>
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										provider?: string | undefined
									},
									{
										name: string
										provider?: string | undefined
									}
								>,
								"many"
							>
						>
						isCloudAgent: z.ZodOptional<z.ZodBoolean>
					},
					"strip",
					z.ZodTypeAny,
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					},
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					}
				>
				timestamp: z.ZodNumber
			},
			"strip",
			z.ZodTypeAny,
			{
				type: ExtensionBridgeEventName.TaskFocused
				timestamp: number
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			},
			{
				type: ExtensionBridgeEventName.TaskFocused
				timestamp: number
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			}
		>,
		z.ZodObject<
			{
				type: z.ZodLiteral<ExtensionBridgeEventName.TaskUnfocused>
				instance: z.ZodObject<
					{
						instanceId: z.ZodString
						userId: z.ZodString
						workspacePath: z.ZodString
						appProperties: z.ZodObject<
							{
								appName: z.ZodString
								appVersion: z.ZodString
								vscodeVersion: z.ZodString
								platform: z.ZodString
								editorName: z.ZodString
								wrapped: z.ZodBoolean
								wrapper: z.ZodNullable<z.ZodString>
								wrapperTitle: z.ZodNullable<z.ZodString>
								wrapperCode: z.ZodNullable<z.ZodString>
								wrapperVersion: z.ZodNullable<z.ZodString>
								hostname: z.ZodOptional<z.ZodString>
							},
							"strip",
							z.ZodTypeAny,
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							},
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							}
						>
						gitProperties: z.ZodOptional<
							z.ZodObject<
								{
									repositoryUrl: z.ZodOptional<z.ZodString>
									repositoryName: z.ZodOptional<z.ZodString>
									defaultBranch: z.ZodOptional<z.ZodString>
								},
								"strip",
								z.ZodTypeAny,
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								},
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								}
							>
						>
						lastHeartbeat: z.ZodNumber
						task: z.ZodObject<
							{
								task: z.ZodOptional<z.ZodString>
								images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
								taskId: z.ZodString
								taskStatus: z.ZodNativeEnum<typeof TaskStatus>
								taskAsk: z.ZodOptional<
									z.ZodObject<
										{
											ts: z.ZodNumber
											type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
											ask: z.ZodOptional<
												z.ZodEnum<
													[
														"followup",
														"command",
														"command_output",
														"completion_result",
														"tool",
														"api_req_failed",
														"resume_task",
														"resume_completed_task",
														"mistake_limit_reached",
														"browser_action_launch",
														"use_mcp_server",
														"auto_approval_max_req_reached",
														"payment_required_prompt",
														"invalid_model",
														"report_bug",
														"condense",
														"checkpoint_restore",
													]
												>
											>
											say: z.ZodOptional<
												z.ZodEnum<
													[
														"error",
														"api_req_started",
														"api_req_finished",
														"api_req_retried",
														"api_req_retry_delayed",
														"api_req_deleted",
														"text",
														"image",
														"reasoning",
														"completion_result",
														"user_feedback",
														"user_feedback_diff",
														"command_output",
														"shell_integration_warning",
														"browser_action",
														"browser_action_result",
														"mcp_server_request_started",
														"mcp_server_response",
														"subtask_result",
														"checkpoint_saved",
														"rooignore_error",
														"diff_error",
														"condense_context",
														"condense_context_error",
														"codebase_search_result",
														"user_edit_todos",
													]
												>
											>
											text: z.ZodOptional<z.ZodString>
											images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											partial: z.ZodOptional<z.ZodBoolean>
											reasoning: z.ZodOptional<z.ZodString>
											conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
											checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
											progressStatus: z.ZodOptional<
												z.ZodObject<
													{
														icon: z.ZodOptional<z.ZodString>
														text: z.ZodOptional<z.ZodString>
													},
													"strip",
													z.ZodTypeAny,
													{
														text?: string | undefined
														icon?: string | undefined
													},
													{
														text?: string | undefined
														icon?: string | undefined
													}
												>
											>
											contextCondense: z.ZodOptional<
												z.ZodObject<
													{
														cost: z.ZodNumber
														prevContextTokens: z.ZodNumber
														newContextTokens: z.ZodNumber
														summary: z.ZodString
													},
													"strip",
													z.ZodTypeAny,
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													},
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													}
												>
											>
											isProtected: z.ZodOptional<z.ZodBoolean>
											apiProtocol: z.ZodOptional<
												z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
											>
											isAnswered: z.ZodOptional<z.ZodBoolean>
											metadata: z.ZodOptional<
												z.ZodObject<
													{
														kiloCode: z.ZodOptional<
															z.ZodObject<
																{
																	commitRange: z.ZodOptional<
																		z.ZodObject<
																			{
																				from: z.ZodString
																				fromTimeStamp: z.ZodOptional<z.ZodNumber>
																				to: z.ZodString
																			},
																			"strip",
																			z.ZodTypeAny,
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			},
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			}
																		>
																	>
																},
																"strip",
																z.ZodTypeAny,
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																},
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																}
															>
														>
													},
													"strip",
													z.ZodTypeAny,
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													},
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													}
												>
											>
										},
										"strip",
										z.ZodTypeAny,
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										},
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										}
									>
								>
								queuedMessages: z.ZodOptional<
									z.ZodArray<
										z.ZodObject<
											{
												timestamp: z.ZodNumber
												id: z.ZodString
												text: z.ZodString
												images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											},
											"strip",
											z.ZodTypeAny,
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											},
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											}
										>,
										"many"
									>
								>
								parentTaskId: z.ZodOptional<z.ZodString>
								childTaskId: z.ZodOptional<z.ZodString>
								tokenUsage: z.ZodOptional<
									z.ZodObject<
										{
											totalTokensIn: z.ZodNumber
											totalTokensOut: z.ZodNumber
											totalCacheWrites: z.ZodOptional<z.ZodNumber>
											totalCacheReads: z.ZodOptional<z.ZodNumber>
											totalCost: z.ZodNumber
											contextTokens: z.ZodNumber
										},
										"strip",
										z.ZodTypeAny,
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										},
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										}
									>
								>
							},
							"strip",
							z.ZodTypeAny,
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							},
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							}
						>
						taskAsk: z.ZodOptional<
							z.ZodObject<
								{
									ts: z.ZodNumber
									type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
									ask: z.ZodOptional<
										z.ZodEnum<
											[
												"followup",
												"command",
												"command_output",
												"completion_result",
												"tool",
												"api_req_failed",
												"resume_task",
												"resume_completed_task",
												"mistake_limit_reached",
												"browser_action_launch",
												"use_mcp_server",
												"auto_approval_max_req_reached",
												"payment_required_prompt",
												"invalid_model",
												"report_bug",
												"condense",
												"checkpoint_restore",
											]
										>
									>
									say: z.ZodOptional<
										z.ZodEnum<
											[
												"error",
												"api_req_started",
												"api_req_finished",
												"api_req_retried",
												"api_req_retry_delayed",
												"api_req_deleted",
												"text",
												"image",
												"reasoning",
												"completion_result",
												"user_feedback",
												"user_feedback_diff",
												"command_output",
												"shell_integration_warning",
												"browser_action",
												"browser_action_result",
												"mcp_server_request_started",
												"mcp_server_response",
												"subtask_result",
												"checkpoint_saved",
												"rooignore_error",
												"diff_error",
												"condense_context",
												"condense_context_error",
												"codebase_search_result",
												"user_edit_todos",
											]
										>
									>
									text: z.ZodOptional<z.ZodString>
									images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
									partial: z.ZodOptional<z.ZodBoolean>
									reasoning: z.ZodOptional<z.ZodString>
									conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
									checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
									progressStatus: z.ZodOptional<
										z.ZodObject<
											{
												icon: z.ZodOptional<z.ZodString>
												text: z.ZodOptional<z.ZodString>
											},
											"strip",
											z.ZodTypeAny,
											{
												text?: string | undefined
												icon?: string | undefined
											},
											{
												text?: string | undefined
												icon?: string | undefined
											}
										>
									>
									contextCondense: z.ZodOptional<
										z.ZodObject<
											{
												cost: z.ZodNumber
												prevContextTokens: z.ZodNumber
												newContextTokens: z.ZodNumber
												summary: z.ZodString
											},
											"strip",
											z.ZodTypeAny,
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											},
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											}
										>
									>
									isProtected: z.ZodOptional<z.ZodBoolean>
									apiProtocol: z.ZodOptional<
										z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
									>
									isAnswered: z.ZodOptional<z.ZodBoolean>
									metadata: z.ZodOptional<
										z.ZodObject<
											{
												kiloCode: z.ZodOptional<
													z.ZodObject<
														{
															commitRange: z.ZodOptional<
																z.ZodObject<
																	{
																		from: z.ZodString
																		fromTimeStamp: z.ZodOptional<z.ZodNumber>
																		to: z.ZodString
																	},
																	"strip",
																	z.ZodTypeAny,
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	},
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	}
																>
															>
														},
														"strip",
														z.ZodTypeAny,
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														},
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														}
													>
												>
											},
											"strip",
											z.ZodTypeAny,
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											},
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											}
										>
									>
								},
								"strip",
								z.ZodTypeAny,
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								},
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								}
							>
						>
						taskHistory: z.ZodArray<z.ZodString, "many">
						mode: z.ZodOptional<z.ZodString>
						modes: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										slug: z.ZodString
										name: z.ZodString
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										slug: string
									},
									{
										name: string
										slug: string
									}
								>,
								"many"
							>
						>
						providerProfile: z.ZodOptional<z.ZodString>
						providerProfiles: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										name: z.ZodString
										provider: z.ZodOptional<z.ZodString>
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										provider?: string | undefined
									},
									{
										name: string
										provider?: string | undefined
									}
								>,
								"many"
							>
						>
						isCloudAgent: z.ZodOptional<z.ZodBoolean>
					},
					"strip",
					z.ZodTypeAny,
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					},
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					}
				>
				timestamp: z.ZodNumber
			},
			"strip",
			z.ZodTypeAny,
			{
				type: ExtensionBridgeEventName.TaskUnfocused
				timestamp: number
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			},
			{
				type: ExtensionBridgeEventName.TaskUnfocused
				timestamp: number
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			}
		>,
		z.ZodObject<
			{
				type: z.ZodLiteral<ExtensionBridgeEventName.TaskActive>
				instance: z.ZodObject<
					{
						instanceId: z.ZodString
						userId: z.ZodString
						workspacePath: z.ZodString
						appProperties: z.ZodObject<
							{
								appName: z.ZodString
								appVersion: z.ZodString
								vscodeVersion: z.ZodString
								platform: z.ZodString
								editorName: z.ZodString
								wrapped: z.ZodBoolean
								wrapper: z.ZodNullable<z.ZodString>
								wrapperTitle: z.ZodNullable<z.ZodString>
								wrapperCode: z.ZodNullable<z.ZodString>
								wrapperVersion: z.ZodNullable<z.ZodString>
								hostname: z.ZodOptional<z.ZodString>
							},
							"strip",
							z.ZodTypeAny,
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							},
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							}
						>
						gitProperties: z.ZodOptional<
							z.ZodObject<
								{
									repositoryUrl: z.ZodOptional<z.ZodString>
									repositoryName: z.ZodOptional<z.ZodString>
									defaultBranch: z.ZodOptional<z.ZodString>
								},
								"strip",
								z.ZodTypeAny,
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								},
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								}
							>
						>
						lastHeartbeat: z.ZodNumber
						task: z.ZodObject<
							{
								task: z.ZodOptional<z.ZodString>
								images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
								taskId: z.ZodString
								taskStatus: z.ZodNativeEnum<typeof TaskStatus>
								taskAsk: z.ZodOptional<
									z.ZodObject<
										{
											ts: z.ZodNumber
											type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
											ask: z.ZodOptional<
												z.ZodEnum<
													[
														"followup",
														"command",
														"command_output",
														"completion_result",
														"tool",
														"api_req_failed",
														"resume_task",
														"resume_completed_task",
														"mistake_limit_reached",
														"browser_action_launch",
														"use_mcp_server",
														"auto_approval_max_req_reached",
														"payment_required_prompt",
														"invalid_model",
														"report_bug",
														"condense",
														"checkpoint_restore",
													]
												>
											>
											say: z.ZodOptional<
												z.ZodEnum<
													[
														"error",
														"api_req_started",
														"api_req_finished",
														"api_req_retried",
														"api_req_retry_delayed",
														"api_req_deleted",
														"text",
														"image",
														"reasoning",
														"completion_result",
														"user_feedback",
														"user_feedback_diff",
														"command_output",
														"shell_integration_warning",
														"browser_action",
														"browser_action_result",
														"mcp_server_request_started",
														"mcp_server_response",
														"subtask_result",
														"checkpoint_saved",
														"rooignore_error",
														"diff_error",
														"condense_context",
														"condense_context_error",
														"codebase_search_result",
														"user_edit_todos",
													]
												>
											>
											text: z.ZodOptional<z.ZodString>
											images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											partial: z.ZodOptional<z.ZodBoolean>
											reasoning: z.ZodOptional<z.ZodString>
											conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
											checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
											progressStatus: z.ZodOptional<
												z.ZodObject<
													{
														icon: z.ZodOptional<z.ZodString>
														text: z.ZodOptional<z.ZodString>
													},
													"strip",
													z.ZodTypeAny,
													{
														text?: string | undefined
														icon?: string | undefined
													},
													{
														text?: string | undefined
														icon?: string | undefined
													}
												>
											>
											contextCondense: z.ZodOptional<
												z.ZodObject<
													{
														cost: z.ZodNumber
														prevContextTokens: z.ZodNumber
														newContextTokens: z.ZodNumber
														summary: z.ZodString
													},
													"strip",
													z.ZodTypeAny,
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													},
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													}
												>
											>
											isProtected: z.ZodOptional<z.ZodBoolean>
											apiProtocol: z.ZodOptional<
												z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
											>
											isAnswered: z.ZodOptional<z.ZodBoolean>
											metadata: z.ZodOptional<
												z.ZodObject<
													{
														kiloCode: z.ZodOptional<
															z.ZodObject<
																{
																	commitRange: z.ZodOptional<
																		z.ZodObject<
																			{
																				from: z.ZodString
																				fromTimeStamp: z.ZodOptional<z.ZodNumber>
																				to: z.ZodString
																			},
																			"strip",
																			z.ZodTypeAny,
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			},
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			}
																		>
																	>
																},
																"strip",
																z.ZodTypeAny,
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																},
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																}
															>
														>
													},
													"strip",
													z.ZodTypeAny,
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													},
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													}
												>
											>
										},
										"strip",
										z.ZodTypeAny,
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										},
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										}
									>
								>
								queuedMessages: z.ZodOptional<
									z.ZodArray<
										z.ZodObject<
											{
												timestamp: z.ZodNumber
												id: z.ZodString
												text: z.ZodString
												images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											},
											"strip",
											z.ZodTypeAny,
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											},
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											}
										>,
										"many"
									>
								>
								parentTaskId: z.ZodOptional<z.ZodString>
								childTaskId: z.ZodOptional<z.ZodString>
								tokenUsage: z.ZodOptional<
									z.ZodObject<
										{
											totalTokensIn: z.ZodNumber
											totalTokensOut: z.ZodNumber
											totalCacheWrites: z.ZodOptional<z.ZodNumber>
											totalCacheReads: z.ZodOptional<z.ZodNumber>
											totalCost: z.ZodNumber
											contextTokens: z.ZodNumber
										},
										"strip",
										z.ZodTypeAny,
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										},
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										}
									>
								>
							},
							"strip",
							z.ZodTypeAny,
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							},
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							}
						>
						taskAsk: z.ZodOptional<
							z.ZodObject<
								{
									ts: z.ZodNumber
									type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
									ask: z.ZodOptional<
										z.ZodEnum<
											[
												"followup",
												"command",
												"command_output",
												"completion_result",
												"tool",
												"api_req_failed",
												"resume_task",
												"resume_completed_task",
												"mistake_limit_reached",
												"browser_action_launch",
												"use_mcp_server",
												"auto_approval_max_req_reached",
												"payment_required_prompt",
												"invalid_model",
												"report_bug",
												"condense",
												"checkpoint_restore",
											]
										>
									>
									say: z.ZodOptional<
										z.ZodEnum<
											[
												"error",
												"api_req_started",
												"api_req_finished",
												"api_req_retried",
												"api_req_retry_delayed",
												"api_req_deleted",
												"text",
												"image",
												"reasoning",
												"completion_result",
												"user_feedback",
												"user_feedback_diff",
												"command_output",
												"shell_integration_warning",
												"browser_action",
												"browser_action_result",
												"mcp_server_request_started",
												"mcp_server_response",
												"subtask_result",
												"checkpoint_saved",
												"rooignore_error",
												"diff_error",
												"condense_context",
												"condense_context_error",
												"codebase_search_result",
												"user_edit_todos",
											]
										>
									>
									text: z.ZodOptional<z.ZodString>
									images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
									partial: z.ZodOptional<z.ZodBoolean>
									reasoning: z.ZodOptional<z.ZodString>
									conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
									checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
									progressStatus: z.ZodOptional<
										z.ZodObject<
											{
												icon: z.ZodOptional<z.ZodString>
												text: z.ZodOptional<z.ZodString>
											},
											"strip",
											z.ZodTypeAny,
											{
												text?: string | undefined
												icon?: string | undefined
											},
											{
												text?: string | undefined
												icon?: string | undefined
											}
										>
									>
									contextCondense: z.ZodOptional<
										z.ZodObject<
											{
												cost: z.ZodNumber
												prevContextTokens: z.ZodNumber
												newContextTokens: z.ZodNumber
												summary: z.ZodString
											},
											"strip",
											z.ZodTypeAny,
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											},
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											}
										>
									>
									isProtected: z.ZodOptional<z.ZodBoolean>
									apiProtocol: z.ZodOptional<
										z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
									>
									isAnswered: z.ZodOptional<z.ZodBoolean>
									metadata: z.ZodOptional<
										z.ZodObject<
											{
												kiloCode: z.ZodOptional<
													z.ZodObject<
														{
															commitRange: z.ZodOptional<
																z.ZodObject<
																	{
																		from: z.ZodString
																		fromTimeStamp: z.ZodOptional<z.ZodNumber>
																		to: z.ZodString
																	},
																	"strip",
																	z.ZodTypeAny,
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	},
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	}
																>
															>
														},
														"strip",
														z.ZodTypeAny,
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														},
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														}
													>
												>
											},
											"strip",
											z.ZodTypeAny,
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											},
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											}
										>
									>
								},
								"strip",
								z.ZodTypeAny,
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								},
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								}
							>
						>
						taskHistory: z.ZodArray<z.ZodString, "many">
						mode: z.ZodOptional<z.ZodString>
						modes: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										slug: z.ZodString
										name: z.ZodString
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										slug: string
									},
									{
										name: string
										slug: string
									}
								>,
								"many"
							>
						>
						providerProfile: z.ZodOptional<z.ZodString>
						providerProfiles: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										name: z.ZodString
										provider: z.ZodOptional<z.ZodString>
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										provider?: string | undefined
									},
									{
										name: string
										provider?: string | undefined
									}
								>,
								"many"
							>
						>
						isCloudAgent: z.ZodOptional<z.ZodBoolean>
					},
					"strip",
					z.ZodTypeAny,
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					},
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					}
				>
				timestamp: z.ZodNumber
			},
			"strip",
			z.ZodTypeAny,
			{
				type: ExtensionBridgeEventName.TaskActive
				timestamp: number
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			},
			{
				type: ExtensionBridgeEventName.TaskActive
				timestamp: number
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			}
		>,
		z.ZodObject<
			{
				type: z.ZodLiteral<ExtensionBridgeEventName.TaskInteractive>
				instance: z.ZodObject<
					{
						instanceId: z.ZodString
						userId: z.ZodString
						workspacePath: z.ZodString
						appProperties: z.ZodObject<
							{
								appName: z.ZodString
								appVersion: z.ZodString
								vscodeVersion: z.ZodString
								platform: z.ZodString
								editorName: z.ZodString
								wrapped: z.ZodBoolean
								wrapper: z.ZodNullable<z.ZodString>
								wrapperTitle: z.ZodNullable<z.ZodString>
								wrapperCode: z.ZodNullable<z.ZodString>
								wrapperVersion: z.ZodNullable<z.ZodString>
								hostname: z.ZodOptional<z.ZodString>
							},
							"strip",
							z.ZodTypeAny,
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							},
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							}
						>
						gitProperties: z.ZodOptional<
							z.ZodObject<
								{
									repositoryUrl: z.ZodOptional<z.ZodString>
									repositoryName: z.ZodOptional<z.ZodString>
									defaultBranch: z.ZodOptional<z.ZodString>
								},
								"strip",
								z.ZodTypeAny,
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								},
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								}
							>
						>
						lastHeartbeat: z.ZodNumber
						task: z.ZodObject<
							{
								task: z.ZodOptional<z.ZodString>
								images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
								taskId: z.ZodString
								taskStatus: z.ZodNativeEnum<typeof TaskStatus>
								taskAsk: z.ZodOptional<
									z.ZodObject<
										{
											ts: z.ZodNumber
											type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
											ask: z.ZodOptional<
												z.ZodEnum<
													[
														"followup",
														"command",
														"command_output",
														"completion_result",
														"tool",
														"api_req_failed",
														"resume_task",
														"resume_completed_task",
														"mistake_limit_reached",
														"browser_action_launch",
														"use_mcp_server",
														"auto_approval_max_req_reached",
														"payment_required_prompt",
														"invalid_model",
														"report_bug",
														"condense",
														"checkpoint_restore",
													]
												>
											>
											say: z.ZodOptional<
												z.ZodEnum<
													[
														"error",
														"api_req_started",
														"api_req_finished",
														"api_req_retried",
														"api_req_retry_delayed",
														"api_req_deleted",
														"text",
														"image",
														"reasoning",
														"completion_result",
														"user_feedback",
														"user_feedback_diff",
														"command_output",
														"shell_integration_warning",
														"browser_action",
														"browser_action_result",
														"mcp_server_request_started",
														"mcp_server_response",
														"subtask_result",
														"checkpoint_saved",
														"rooignore_error",
														"diff_error",
														"condense_context",
														"condense_context_error",
														"codebase_search_result",
														"user_edit_todos",
													]
												>
											>
											text: z.ZodOptional<z.ZodString>
											images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											partial: z.ZodOptional<z.ZodBoolean>
											reasoning: z.ZodOptional<z.ZodString>
											conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
											checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
											progressStatus: z.ZodOptional<
												z.ZodObject<
													{
														icon: z.ZodOptional<z.ZodString>
														text: z.ZodOptional<z.ZodString>
													},
													"strip",
													z.ZodTypeAny,
													{
														text?: string | undefined
														icon?: string | undefined
													},
													{
														text?: string | undefined
														icon?: string | undefined
													}
												>
											>
											contextCondense: z.ZodOptional<
												z.ZodObject<
													{
														cost: z.ZodNumber
														prevContextTokens: z.ZodNumber
														newContextTokens: z.ZodNumber
														summary: z.ZodString
													},
													"strip",
													z.ZodTypeAny,
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													},
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													}
												>
											>
											isProtected: z.ZodOptional<z.ZodBoolean>
											apiProtocol: z.ZodOptional<
												z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
											>
											isAnswered: z.ZodOptional<z.ZodBoolean>
											metadata: z.ZodOptional<
												z.ZodObject<
													{
														kiloCode: z.ZodOptional<
															z.ZodObject<
																{
																	commitRange: z.ZodOptional<
																		z.ZodObject<
																			{
																				from: z.ZodString
																				fromTimeStamp: z.ZodOptional<z.ZodNumber>
																				to: z.ZodString
																			},
																			"strip",
																			z.ZodTypeAny,
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			},
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			}
																		>
																	>
																},
																"strip",
																z.ZodTypeAny,
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																},
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																}
															>
														>
													},
													"strip",
													z.ZodTypeAny,
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													},
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													}
												>
											>
										},
										"strip",
										z.ZodTypeAny,
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										},
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										}
									>
								>
								queuedMessages: z.ZodOptional<
									z.ZodArray<
										z.ZodObject<
											{
												timestamp: z.ZodNumber
												id: z.ZodString
												text: z.ZodString
												images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											},
											"strip",
											z.ZodTypeAny,
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											},
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											}
										>,
										"many"
									>
								>
								parentTaskId: z.ZodOptional<z.ZodString>
								childTaskId: z.ZodOptional<z.ZodString>
								tokenUsage: z.ZodOptional<
									z.ZodObject<
										{
											totalTokensIn: z.ZodNumber
											totalTokensOut: z.ZodNumber
											totalCacheWrites: z.ZodOptional<z.ZodNumber>
											totalCacheReads: z.ZodOptional<z.ZodNumber>
											totalCost: z.ZodNumber
											contextTokens: z.ZodNumber
										},
										"strip",
										z.ZodTypeAny,
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										},
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										}
									>
								>
							},
							"strip",
							z.ZodTypeAny,
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							},
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							}
						>
						taskAsk: z.ZodOptional<
							z.ZodObject<
								{
									ts: z.ZodNumber
									type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
									ask: z.ZodOptional<
										z.ZodEnum<
											[
												"followup",
												"command",
												"command_output",
												"completion_result",
												"tool",
												"api_req_failed",
												"resume_task",
												"resume_completed_task",
												"mistake_limit_reached",
												"browser_action_launch",
												"use_mcp_server",
												"auto_approval_max_req_reached",
												"payment_required_prompt",
												"invalid_model",
												"report_bug",
												"condense",
												"checkpoint_restore",
											]
										>
									>
									say: z.ZodOptional<
										z.ZodEnum<
											[
												"error",
												"api_req_started",
												"api_req_finished",
												"api_req_retried",
												"api_req_retry_delayed",
												"api_req_deleted",
												"text",
												"image",
												"reasoning",
												"completion_result",
												"user_feedback",
												"user_feedback_diff",
												"command_output",
												"shell_integration_warning",
												"browser_action",
												"browser_action_result",
												"mcp_server_request_started",
												"mcp_server_response",
												"subtask_result",
												"checkpoint_saved",
												"rooignore_error",
												"diff_error",
												"condense_context",
												"condense_context_error",
												"codebase_search_result",
												"user_edit_todos",
											]
										>
									>
									text: z.ZodOptional<z.ZodString>
									images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
									partial: z.ZodOptional<z.ZodBoolean>
									reasoning: z.ZodOptional<z.ZodString>
									conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
									checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
									progressStatus: z.ZodOptional<
										z.ZodObject<
											{
												icon: z.ZodOptional<z.ZodString>
												text: z.ZodOptional<z.ZodString>
											},
											"strip",
											z.ZodTypeAny,
											{
												text?: string | undefined
												icon?: string | undefined
											},
											{
												text?: string | undefined
												icon?: string | undefined
											}
										>
									>
									contextCondense: z.ZodOptional<
										z.ZodObject<
											{
												cost: z.ZodNumber
												prevContextTokens: z.ZodNumber
												newContextTokens: z.ZodNumber
												summary: z.ZodString
											},
											"strip",
											z.ZodTypeAny,
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											},
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											}
										>
									>
									isProtected: z.ZodOptional<z.ZodBoolean>
									apiProtocol: z.ZodOptional<
										z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
									>
									isAnswered: z.ZodOptional<z.ZodBoolean>
									metadata: z.ZodOptional<
										z.ZodObject<
											{
												kiloCode: z.ZodOptional<
													z.ZodObject<
														{
															commitRange: z.ZodOptional<
																z.ZodObject<
																	{
																		from: z.ZodString
																		fromTimeStamp: z.ZodOptional<z.ZodNumber>
																		to: z.ZodString
																	},
																	"strip",
																	z.ZodTypeAny,
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	},
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	}
																>
															>
														},
														"strip",
														z.ZodTypeAny,
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														},
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														}
													>
												>
											},
											"strip",
											z.ZodTypeAny,
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											},
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											}
										>
									>
								},
								"strip",
								z.ZodTypeAny,
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								},
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								}
							>
						>
						taskHistory: z.ZodArray<z.ZodString, "many">
						mode: z.ZodOptional<z.ZodString>
						modes: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										slug: z.ZodString
										name: z.ZodString
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										slug: string
									},
									{
										name: string
										slug: string
									}
								>,
								"many"
							>
						>
						providerProfile: z.ZodOptional<z.ZodString>
						providerProfiles: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										name: z.ZodString
										provider: z.ZodOptional<z.ZodString>
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										provider?: string | undefined
									},
									{
										name: string
										provider?: string | undefined
									}
								>,
								"many"
							>
						>
						isCloudAgent: z.ZodOptional<z.ZodBoolean>
					},
					"strip",
					z.ZodTypeAny,
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					},
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					}
				>
				timestamp: z.ZodNumber
			},
			"strip",
			z.ZodTypeAny,
			{
				type: ExtensionBridgeEventName.TaskInteractive
				timestamp: number
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			},
			{
				type: ExtensionBridgeEventName.TaskInteractive
				timestamp: number
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			}
		>,
		z.ZodObject<
			{
				type: z.ZodLiteral<ExtensionBridgeEventName.TaskResumable>
				instance: z.ZodObject<
					{
						instanceId: z.ZodString
						userId: z.ZodString
						workspacePath: z.ZodString
						appProperties: z.ZodObject<
							{
								appName: z.ZodString
								appVersion: z.ZodString
								vscodeVersion: z.ZodString
								platform: z.ZodString
								editorName: z.ZodString
								wrapped: z.ZodBoolean
								wrapper: z.ZodNullable<z.ZodString>
								wrapperTitle: z.ZodNullable<z.ZodString>
								wrapperCode: z.ZodNullable<z.ZodString>
								wrapperVersion: z.ZodNullable<z.ZodString>
								hostname: z.ZodOptional<z.ZodString>
							},
							"strip",
							z.ZodTypeAny,
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							},
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							}
						>
						gitProperties: z.ZodOptional<
							z.ZodObject<
								{
									repositoryUrl: z.ZodOptional<z.ZodString>
									repositoryName: z.ZodOptional<z.ZodString>
									defaultBranch: z.ZodOptional<z.ZodString>
								},
								"strip",
								z.ZodTypeAny,
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								},
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								}
							>
						>
						lastHeartbeat: z.ZodNumber
						task: z.ZodObject<
							{
								task: z.ZodOptional<z.ZodString>
								images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
								taskId: z.ZodString
								taskStatus: z.ZodNativeEnum<typeof TaskStatus>
								taskAsk: z.ZodOptional<
									z.ZodObject<
										{
											ts: z.ZodNumber
											type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
											ask: z.ZodOptional<
												z.ZodEnum<
													[
														"followup",
														"command",
														"command_output",
														"completion_result",
														"tool",
														"api_req_failed",
														"resume_task",
														"resume_completed_task",
														"mistake_limit_reached",
														"browser_action_launch",
														"use_mcp_server",
														"auto_approval_max_req_reached",
														"payment_required_prompt",
														"invalid_model",
														"report_bug",
														"condense",
														"checkpoint_restore",
													]
												>
											>
											say: z.ZodOptional<
												z.ZodEnum<
													[
														"error",
														"api_req_started",
														"api_req_finished",
														"api_req_retried",
														"api_req_retry_delayed",
														"api_req_deleted",
														"text",
														"image",
														"reasoning",
														"completion_result",
														"user_feedback",
														"user_feedback_diff",
														"command_output",
														"shell_integration_warning",
														"browser_action",
														"browser_action_result",
														"mcp_server_request_started",
														"mcp_server_response",
														"subtask_result",
														"checkpoint_saved",
														"rooignore_error",
														"diff_error",
														"condense_context",
														"condense_context_error",
														"codebase_search_result",
														"user_edit_todos",
													]
												>
											>
											text: z.ZodOptional<z.ZodString>
											images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											partial: z.ZodOptional<z.ZodBoolean>
											reasoning: z.ZodOptional<z.ZodString>
											conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
											checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
											progressStatus: z.ZodOptional<
												z.ZodObject<
													{
														icon: z.ZodOptional<z.ZodString>
														text: z.ZodOptional<z.ZodString>
													},
													"strip",
													z.ZodTypeAny,
													{
														text?: string | undefined
														icon?: string | undefined
													},
													{
														text?: string | undefined
														icon?: string | undefined
													}
												>
											>
											contextCondense: z.ZodOptional<
												z.ZodObject<
													{
														cost: z.ZodNumber
														prevContextTokens: z.ZodNumber
														newContextTokens: z.ZodNumber
														summary: z.ZodString
													},
													"strip",
													z.ZodTypeAny,
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													},
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													}
												>
											>
											isProtected: z.ZodOptional<z.ZodBoolean>
											apiProtocol: z.ZodOptional<
												z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
											>
											isAnswered: z.ZodOptional<z.ZodBoolean>
											metadata: z.ZodOptional<
												z.ZodObject<
													{
														kiloCode: z.ZodOptional<
															z.ZodObject<
																{
																	commitRange: z.ZodOptional<
																		z.ZodObject<
																			{
																				from: z.ZodString
																				fromTimeStamp: z.ZodOptional<z.ZodNumber>
																				to: z.ZodString
																			},
																			"strip",
																			z.ZodTypeAny,
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			},
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			}
																		>
																	>
																},
																"strip",
																z.ZodTypeAny,
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																},
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																}
															>
														>
													},
													"strip",
													z.ZodTypeAny,
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													},
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													}
												>
											>
										},
										"strip",
										z.ZodTypeAny,
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										},
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										}
									>
								>
								queuedMessages: z.ZodOptional<
									z.ZodArray<
										z.ZodObject<
											{
												timestamp: z.ZodNumber
												id: z.ZodString
												text: z.ZodString
												images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											},
											"strip",
											z.ZodTypeAny,
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											},
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											}
										>,
										"many"
									>
								>
								parentTaskId: z.ZodOptional<z.ZodString>
								childTaskId: z.ZodOptional<z.ZodString>
								tokenUsage: z.ZodOptional<
									z.ZodObject<
										{
											totalTokensIn: z.ZodNumber
											totalTokensOut: z.ZodNumber
											totalCacheWrites: z.ZodOptional<z.ZodNumber>
											totalCacheReads: z.ZodOptional<z.ZodNumber>
											totalCost: z.ZodNumber
											contextTokens: z.ZodNumber
										},
										"strip",
										z.ZodTypeAny,
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										},
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										}
									>
								>
							},
							"strip",
							z.ZodTypeAny,
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							},
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							}
						>
						taskAsk: z.ZodOptional<
							z.ZodObject<
								{
									ts: z.ZodNumber
									type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
									ask: z.ZodOptional<
										z.ZodEnum<
											[
												"followup",
												"command",
												"command_output",
												"completion_result",
												"tool",
												"api_req_failed",
												"resume_task",
												"resume_completed_task",
												"mistake_limit_reached",
												"browser_action_launch",
												"use_mcp_server",
												"auto_approval_max_req_reached",
												"payment_required_prompt",
												"invalid_model",
												"report_bug",
												"condense",
												"checkpoint_restore",
											]
										>
									>
									say: z.ZodOptional<
										z.ZodEnum<
											[
												"error",
												"api_req_started",
												"api_req_finished",
												"api_req_retried",
												"api_req_retry_delayed",
												"api_req_deleted",
												"text",
												"image",
												"reasoning",
												"completion_result",
												"user_feedback",
												"user_feedback_diff",
												"command_output",
												"shell_integration_warning",
												"browser_action",
												"browser_action_result",
												"mcp_server_request_started",
												"mcp_server_response",
												"subtask_result",
												"checkpoint_saved",
												"rooignore_error",
												"diff_error",
												"condense_context",
												"condense_context_error",
												"codebase_search_result",
												"user_edit_todos",
											]
										>
									>
									text: z.ZodOptional<z.ZodString>
									images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
									partial: z.ZodOptional<z.ZodBoolean>
									reasoning: z.ZodOptional<z.ZodString>
									conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
									checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
									progressStatus: z.ZodOptional<
										z.ZodObject<
											{
												icon: z.ZodOptional<z.ZodString>
												text: z.ZodOptional<z.ZodString>
											},
											"strip",
											z.ZodTypeAny,
											{
												text?: string | undefined
												icon?: string | undefined
											},
											{
												text?: string | undefined
												icon?: string | undefined
											}
										>
									>
									contextCondense: z.ZodOptional<
										z.ZodObject<
											{
												cost: z.ZodNumber
												prevContextTokens: z.ZodNumber
												newContextTokens: z.ZodNumber
												summary: z.ZodString
											},
											"strip",
											z.ZodTypeAny,
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											},
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											}
										>
									>
									isProtected: z.ZodOptional<z.ZodBoolean>
									apiProtocol: z.ZodOptional<
										z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
									>
									isAnswered: z.ZodOptional<z.ZodBoolean>
									metadata: z.ZodOptional<
										z.ZodObject<
											{
												kiloCode: z.ZodOptional<
													z.ZodObject<
														{
															commitRange: z.ZodOptional<
																z.ZodObject<
																	{
																		from: z.ZodString
																		fromTimeStamp: z.ZodOptional<z.ZodNumber>
																		to: z.ZodString
																	},
																	"strip",
																	z.ZodTypeAny,
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	},
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	}
																>
															>
														},
														"strip",
														z.ZodTypeAny,
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														},
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														}
													>
												>
											},
											"strip",
											z.ZodTypeAny,
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											},
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											}
										>
									>
								},
								"strip",
								z.ZodTypeAny,
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								},
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								}
							>
						>
						taskHistory: z.ZodArray<z.ZodString, "many">
						mode: z.ZodOptional<z.ZodString>
						modes: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										slug: z.ZodString
										name: z.ZodString
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										slug: string
									},
									{
										name: string
										slug: string
									}
								>,
								"many"
							>
						>
						providerProfile: z.ZodOptional<z.ZodString>
						providerProfiles: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										name: z.ZodString
										provider: z.ZodOptional<z.ZodString>
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										provider?: string | undefined
									},
									{
										name: string
										provider?: string | undefined
									}
								>,
								"many"
							>
						>
						isCloudAgent: z.ZodOptional<z.ZodBoolean>
					},
					"strip",
					z.ZodTypeAny,
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					},
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					}
				>
				timestamp: z.ZodNumber
			},
			"strip",
			z.ZodTypeAny,
			{
				type: ExtensionBridgeEventName.TaskResumable
				timestamp: number
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			},
			{
				type: ExtensionBridgeEventName.TaskResumable
				timestamp: number
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			}
		>,
		z.ZodObject<
			{
				type: z.ZodLiteral<ExtensionBridgeEventName.TaskIdle>
				instance: z.ZodObject<
					{
						instanceId: z.ZodString
						userId: z.ZodString
						workspacePath: z.ZodString
						appProperties: z.ZodObject<
							{
								appName: z.ZodString
								appVersion: z.ZodString
								vscodeVersion: z.ZodString
								platform: z.ZodString
								editorName: z.ZodString
								wrapped: z.ZodBoolean
								wrapper: z.ZodNullable<z.ZodString>
								wrapperTitle: z.ZodNullable<z.ZodString>
								wrapperCode: z.ZodNullable<z.ZodString>
								wrapperVersion: z.ZodNullable<z.ZodString>
								hostname: z.ZodOptional<z.ZodString>
							},
							"strip",
							z.ZodTypeAny,
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							},
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							}
						>
						gitProperties: z.ZodOptional<
							z.ZodObject<
								{
									repositoryUrl: z.ZodOptional<z.ZodString>
									repositoryName: z.ZodOptional<z.ZodString>
									defaultBranch: z.ZodOptional<z.ZodString>
								},
								"strip",
								z.ZodTypeAny,
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								},
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								}
							>
						>
						lastHeartbeat: z.ZodNumber
						task: z.ZodObject<
							{
								task: z.ZodOptional<z.ZodString>
								images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
								taskId: z.ZodString
								taskStatus: z.ZodNativeEnum<typeof TaskStatus>
								taskAsk: z.ZodOptional<
									z.ZodObject<
										{
											ts: z.ZodNumber
											type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
											ask: z.ZodOptional<
												z.ZodEnum<
													[
														"followup",
														"command",
														"command_output",
														"completion_result",
														"tool",
														"api_req_failed",
														"resume_task",
														"resume_completed_task",
														"mistake_limit_reached",
														"browser_action_launch",
														"use_mcp_server",
														"auto_approval_max_req_reached",
														"payment_required_prompt",
														"invalid_model",
														"report_bug",
														"condense",
														"checkpoint_restore",
													]
												>
											>
											say: z.ZodOptional<
												z.ZodEnum<
													[
														"error",
														"api_req_started",
														"api_req_finished",
														"api_req_retried",
														"api_req_retry_delayed",
														"api_req_deleted",
														"text",
														"image",
														"reasoning",
														"completion_result",
														"user_feedback",
														"user_feedback_diff",
														"command_output",
														"shell_integration_warning",
														"browser_action",
														"browser_action_result",
														"mcp_server_request_started",
														"mcp_server_response",
														"subtask_result",
														"checkpoint_saved",
														"rooignore_error",
														"diff_error",
														"condense_context",
														"condense_context_error",
														"codebase_search_result",
														"user_edit_todos",
													]
												>
											>
											text: z.ZodOptional<z.ZodString>
											images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											partial: z.ZodOptional<z.ZodBoolean>
											reasoning: z.ZodOptional<z.ZodString>
											conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
											checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
											progressStatus: z.ZodOptional<
												z.ZodObject<
													{
														icon: z.ZodOptional<z.ZodString>
														text: z.ZodOptional<z.ZodString>
													},
													"strip",
													z.ZodTypeAny,
													{
														text?: string | undefined
														icon?: string | undefined
													},
													{
														text?: string | undefined
														icon?: string | undefined
													}
												>
											>
											contextCondense: z.ZodOptional<
												z.ZodObject<
													{
														cost: z.ZodNumber
														prevContextTokens: z.ZodNumber
														newContextTokens: z.ZodNumber
														summary: z.ZodString
													},
													"strip",
													z.ZodTypeAny,
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													},
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													}
												>
											>
											isProtected: z.ZodOptional<z.ZodBoolean>
											apiProtocol: z.ZodOptional<
												z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
											>
											isAnswered: z.ZodOptional<z.ZodBoolean>
											metadata: z.ZodOptional<
												z.ZodObject<
													{
														kiloCode: z.ZodOptional<
															z.ZodObject<
																{
																	commitRange: z.ZodOptional<
																		z.ZodObject<
																			{
																				from: z.ZodString
																				fromTimeStamp: z.ZodOptional<z.ZodNumber>
																				to: z.ZodString
																			},
																			"strip",
																			z.ZodTypeAny,
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			},
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			}
																		>
																	>
																},
																"strip",
																z.ZodTypeAny,
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																},
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																}
															>
														>
													},
													"strip",
													z.ZodTypeAny,
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													},
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													}
												>
											>
										},
										"strip",
										z.ZodTypeAny,
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										},
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										}
									>
								>
								queuedMessages: z.ZodOptional<
									z.ZodArray<
										z.ZodObject<
											{
												timestamp: z.ZodNumber
												id: z.ZodString
												text: z.ZodString
												images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											},
											"strip",
											z.ZodTypeAny,
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											},
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											}
										>,
										"many"
									>
								>
								parentTaskId: z.ZodOptional<z.ZodString>
								childTaskId: z.ZodOptional<z.ZodString>
								tokenUsage: z.ZodOptional<
									z.ZodObject<
										{
											totalTokensIn: z.ZodNumber
											totalTokensOut: z.ZodNumber
											totalCacheWrites: z.ZodOptional<z.ZodNumber>
											totalCacheReads: z.ZodOptional<z.ZodNumber>
											totalCost: z.ZodNumber
											contextTokens: z.ZodNumber
										},
										"strip",
										z.ZodTypeAny,
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										},
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										}
									>
								>
							},
							"strip",
							z.ZodTypeAny,
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							},
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							}
						>
						taskAsk: z.ZodOptional<
							z.ZodObject<
								{
									ts: z.ZodNumber
									type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
									ask: z.ZodOptional<
										z.ZodEnum<
											[
												"followup",
												"command",
												"command_output",
												"completion_result",
												"tool",
												"api_req_failed",
												"resume_task",
												"resume_completed_task",
												"mistake_limit_reached",
												"browser_action_launch",
												"use_mcp_server",
												"auto_approval_max_req_reached",
												"payment_required_prompt",
												"invalid_model",
												"report_bug",
												"condense",
												"checkpoint_restore",
											]
										>
									>
									say: z.ZodOptional<
										z.ZodEnum<
											[
												"error",
												"api_req_started",
												"api_req_finished",
												"api_req_retried",
												"api_req_retry_delayed",
												"api_req_deleted",
												"text",
												"image",
												"reasoning",
												"completion_result",
												"user_feedback",
												"user_feedback_diff",
												"command_output",
												"shell_integration_warning",
												"browser_action",
												"browser_action_result",
												"mcp_server_request_started",
												"mcp_server_response",
												"subtask_result",
												"checkpoint_saved",
												"rooignore_error",
												"diff_error",
												"condense_context",
												"condense_context_error",
												"codebase_search_result",
												"user_edit_todos",
											]
										>
									>
									text: z.ZodOptional<z.ZodString>
									images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
									partial: z.ZodOptional<z.ZodBoolean>
									reasoning: z.ZodOptional<z.ZodString>
									conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
									checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
									progressStatus: z.ZodOptional<
										z.ZodObject<
											{
												icon: z.ZodOptional<z.ZodString>
												text: z.ZodOptional<z.ZodString>
											},
											"strip",
											z.ZodTypeAny,
											{
												text?: string | undefined
												icon?: string | undefined
											},
											{
												text?: string | undefined
												icon?: string | undefined
											}
										>
									>
									contextCondense: z.ZodOptional<
										z.ZodObject<
											{
												cost: z.ZodNumber
												prevContextTokens: z.ZodNumber
												newContextTokens: z.ZodNumber
												summary: z.ZodString
											},
											"strip",
											z.ZodTypeAny,
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											},
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											}
										>
									>
									isProtected: z.ZodOptional<z.ZodBoolean>
									apiProtocol: z.ZodOptional<
										z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
									>
									isAnswered: z.ZodOptional<z.ZodBoolean>
									metadata: z.ZodOptional<
										z.ZodObject<
											{
												kiloCode: z.ZodOptional<
													z.ZodObject<
														{
															commitRange: z.ZodOptional<
																z.ZodObject<
																	{
																		from: z.ZodString
																		fromTimeStamp: z.ZodOptional<z.ZodNumber>
																		to: z.ZodString
																	},
																	"strip",
																	z.ZodTypeAny,
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	},
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	}
																>
															>
														},
														"strip",
														z.ZodTypeAny,
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														},
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														}
													>
												>
											},
											"strip",
											z.ZodTypeAny,
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											},
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											}
										>
									>
								},
								"strip",
								z.ZodTypeAny,
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								},
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								}
							>
						>
						taskHistory: z.ZodArray<z.ZodString, "many">
						mode: z.ZodOptional<z.ZodString>
						modes: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										slug: z.ZodString
										name: z.ZodString
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										slug: string
									},
									{
										name: string
										slug: string
									}
								>,
								"many"
							>
						>
						providerProfile: z.ZodOptional<z.ZodString>
						providerProfiles: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										name: z.ZodString
										provider: z.ZodOptional<z.ZodString>
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										provider?: string | undefined
									},
									{
										name: string
										provider?: string | undefined
									}
								>,
								"many"
							>
						>
						isCloudAgent: z.ZodOptional<z.ZodBoolean>
					},
					"strip",
					z.ZodTypeAny,
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					},
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					}
				>
				timestamp: z.ZodNumber
			},
			"strip",
			z.ZodTypeAny,
			{
				type: ExtensionBridgeEventName.TaskIdle
				timestamp: number
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			},
			{
				type: ExtensionBridgeEventName.TaskIdle
				timestamp: number
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			}
		>,
		z.ZodObject<
			{
				type: z.ZodLiteral<ExtensionBridgeEventName.TaskPaused>
				instance: z.ZodObject<
					{
						instanceId: z.ZodString
						userId: z.ZodString
						workspacePath: z.ZodString
						appProperties: z.ZodObject<
							{
								appName: z.ZodString
								appVersion: z.ZodString
								vscodeVersion: z.ZodString
								platform: z.ZodString
								editorName: z.ZodString
								wrapped: z.ZodBoolean
								wrapper: z.ZodNullable<z.ZodString>
								wrapperTitle: z.ZodNullable<z.ZodString>
								wrapperCode: z.ZodNullable<z.ZodString>
								wrapperVersion: z.ZodNullable<z.ZodString>
								hostname: z.ZodOptional<z.ZodString>
							},
							"strip",
							z.ZodTypeAny,
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							},
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							}
						>
						gitProperties: z.ZodOptional<
							z.ZodObject<
								{
									repositoryUrl: z.ZodOptional<z.ZodString>
									repositoryName: z.ZodOptional<z.ZodString>
									defaultBranch: z.ZodOptional<z.ZodString>
								},
								"strip",
								z.ZodTypeAny,
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								},
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								}
							>
						>
						lastHeartbeat: z.ZodNumber
						task: z.ZodObject<
							{
								task: z.ZodOptional<z.ZodString>
								images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
								taskId: z.ZodString
								taskStatus: z.ZodNativeEnum<typeof TaskStatus>
								taskAsk: z.ZodOptional<
									z.ZodObject<
										{
											ts: z.ZodNumber
											type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
											ask: z.ZodOptional<
												z.ZodEnum<
													[
														"followup",
														"command",
														"command_output",
														"completion_result",
														"tool",
														"api_req_failed",
														"resume_task",
														"resume_completed_task",
														"mistake_limit_reached",
														"browser_action_launch",
														"use_mcp_server",
														"auto_approval_max_req_reached",
														"payment_required_prompt",
														"invalid_model",
														"report_bug",
														"condense",
														"checkpoint_restore",
													]
												>
											>
											say: z.ZodOptional<
												z.ZodEnum<
													[
														"error",
														"api_req_started",
														"api_req_finished",
														"api_req_retried",
														"api_req_retry_delayed",
														"api_req_deleted",
														"text",
														"image",
														"reasoning",
														"completion_result",
														"user_feedback",
														"user_feedback_diff",
														"command_output",
														"shell_integration_warning",
														"browser_action",
														"browser_action_result",
														"mcp_server_request_started",
														"mcp_server_response",
														"subtask_result",
														"checkpoint_saved",
														"rooignore_error",
														"diff_error",
														"condense_context",
														"condense_context_error",
														"codebase_search_result",
														"user_edit_todos",
													]
												>
											>
											text: z.ZodOptional<z.ZodString>
											images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											partial: z.ZodOptional<z.ZodBoolean>
											reasoning: z.ZodOptional<z.ZodString>
											conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
											checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
											progressStatus: z.ZodOptional<
												z.ZodObject<
													{
														icon: z.ZodOptional<z.ZodString>
														text: z.ZodOptional<z.ZodString>
													},
													"strip",
													z.ZodTypeAny,
													{
														text?: string | undefined
														icon?: string | undefined
													},
													{
														text?: string | undefined
														icon?: string | undefined
													}
												>
											>
											contextCondense: z.ZodOptional<
												z.ZodObject<
													{
														cost: z.ZodNumber
														prevContextTokens: z.ZodNumber
														newContextTokens: z.ZodNumber
														summary: z.ZodString
													},
													"strip",
													z.ZodTypeAny,
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													},
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													}
												>
											>
											isProtected: z.ZodOptional<z.ZodBoolean>
											apiProtocol: z.ZodOptional<
												z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
											>
											isAnswered: z.ZodOptional<z.ZodBoolean>
											metadata: z.ZodOptional<
												z.ZodObject<
													{
														kiloCode: z.ZodOptional<
															z.ZodObject<
																{
																	commitRange: z.ZodOptional<
																		z.ZodObject<
																			{
																				from: z.ZodString
																				fromTimeStamp: z.ZodOptional<z.ZodNumber>
																				to: z.ZodString
																			},
																			"strip",
																			z.ZodTypeAny,
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			},
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			}
																		>
																	>
																},
																"strip",
																z.ZodTypeAny,
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																},
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																}
															>
														>
													},
													"strip",
													z.ZodTypeAny,
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													},
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													}
												>
											>
										},
										"strip",
										z.ZodTypeAny,
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										},
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										}
									>
								>
								queuedMessages: z.ZodOptional<
									z.ZodArray<
										z.ZodObject<
											{
												timestamp: z.ZodNumber
												id: z.ZodString
												text: z.ZodString
												images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											},
											"strip",
											z.ZodTypeAny,
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											},
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											}
										>,
										"many"
									>
								>
								parentTaskId: z.ZodOptional<z.ZodString>
								childTaskId: z.ZodOptional<z.ZodString>
								tokenUsage: z.ZodOptional<
									z.ZodObject<
										{
											totalTokensIn: z.ZodNumber
											totalTokensOut: z.ZodNumber
											totalCacheWrites: z.ZodOptional<z.ZodNumber>
											totalCacheReads: z.ZodOptional<z.ZodNumber>
											totalCost: z.ZodNumber
											contextTokens: z.ZodNumber
										},
										"strip",
										z.ZodTypeAny,
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										},
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										}
									>
								>
							},
							"strip",
							z.ZodTypeAny,
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							},
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							}
						>
						taskAsk: z.ZodOptional<
							z.ZodObject<
								{
									ts: z.ZodNumber
									type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
									ask: z.ZodOptional<
										z.ZodEnum<
											[
												"followup",
												"command",
												"command_output",
												"completion_result",
												"tool",
												"api_req_failed",
												"resume_task",
												"resume_completed_task",
												"mistake_limit_reached",
												"browser_action_launch",
												"use_mcp_server",
												"auto_approval_max_req_reached",
												"payment_required_prompt",
												"invalid_model",
												"report_bug",
												"condense",
												"checkpoint_restore",
											]
										>
									>
									say: z.ZodOptional<
										z.ZodEnum<
											[
												"error",
												"api_req_started",
												"api_req_finished",
												"api_req_retried",
												"api_req_retry_delayed",
												"api_req_deleted",
												"text",
												"image",
												"reasoning",
												"completion_result",
												"user_feedback",
												"user_feedback_diff",
												"command_output",
												"shell_integration_warning",
												"browser_action",
												"browser_action_result",
												"mcp_server_request_started",
												"mcp_server_response",
												"subtask_result",
												"checkpoint_saved",
												"rooignore_error",
												"diff_error",
												"condense_context",
												"condense_context_error",
												"codebase_search_result",
												"user_edit_todos",
											]
										>
									>
									text: z.ZodOptional<z.ZodString>
									images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
									partial: z.ZodOptional<z.ZodBoolean>
									reasoning: z.ZodOptional<z.ZodString>
									conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
									checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
									progressStatus: z.ZodOptional<
										z.ZodObject<
											{
												icon: z.ZodOptional<z.ZodString>
												text: z.ZodOptional<z.ZodString>
											},
											"strip",
											z.ZodTypeAny,
											{
												text?: string | undefined
												icon?: string | undefined
											},
											{
												text?: string | undefined
												icon?: string | undefined
											}
										>
									>
									contextCondense: z.ZodOptional<
										z.ZodObject<
											{
												cost: z.ZodNumber
												prevContextTokens: z.ZodNumber
												newContextTokens: z.ZodNumber
												summary: z.ZodString
											},
											"strip",
											z.ZodTypeAny,
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											},
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											}
										>
									>
									isProtected: z.ZodOptional<z.ZodBoolean>
									apiProtocol: z.ZodOptional<
										z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
									>
									isAnswered: z.ZodOptional<z.ZodBoolean>
									metadata: z.ZodOptional<
										z.ZodObject<
											{
												kiloCode: z.ZodOptional<
													z.ZodObject<
														{
															commitRange: z.ZodOptional<
																z.ZodObject<
																	{
																		from: z.ZodString
																		fromTimeStamp: z.ZodOptional<z.ZodNumber>
																		to: z.ZodString
																	},
																	"strip",
																	z.ZodTypeAny,
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	},
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	}
																>
															>
														},
														"strip",
														z.ZodTypeAny,
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														},
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														}
													>
												>
											},
											"strip",
											z.ZodTypeAny,
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											},
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											}
										>
									>
								},
								"strip",
								z.ZodTypeAny,
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								},
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								}
							>
						>
						taskHistory: z.ZodArray<z.ZodString, "many">
						mode: z.ZodOptional<z.ZodString>
						modes: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										slug: z.ZodString
										name: z.ZodString
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										slug: string
									},
									{
										name: string
										slug: string
									}
								>,
								"many"
							>
						>
						providerProfile: z.ZodOptional<z.ZodString>
						providerProfiles: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										name: z.ZodString
										provider: z.ZodOptional<z.ZodString>
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										provider?: string | undefined
									},
									{
										name: string
										provider?: string | undefined
									}
								>,
								"many"
							>
						>
						isCloudAgent: z.ZodOptional<z.ZodBoolean>
					},
					"strip",
					z.ZodTypeAny,
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					},
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					}
				>
				timestamp: z.ZodNumber
			},
			"strip",
			z.ZodTypeAny,
			{
				type: ExtensionBridgeEventName.TaskPaused
				timestamp: number
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			},
			{
				type: ExtensionBridgeEventName.TaskPaused
				timestamp: number
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			}
		>,
		z.ZodObject<
			{
				type: z.ZodLiteral<ExtensionBridgeEventName.TaskUnpaused>
				instance: z.ZodObject<
					{
						instanceId: z.ZodString
						userId: z.ZodString
						workspacePath: z.ZodString
						appProperties: z.ZodObject<
							{
								appName: z.ZodString
								appVersion: z.ZodString
								vscodeVersion: z.ZodString
								platform: z.ZodString
								editorName: z.ZodString
								wrapped: z.ZodBoolean
								wrapper: z.ZodNullable<z.ZodString>
								wrapperTitle: z.ZodNullable<z.ZodString>
								wrapperCode: z.ZodNullable<z.ZodString>
								wrapperVersion: z.ZodNullable<z.ZodString>
								hostname: z.ZodOptional<z.ZodString>
							},
							"strip",
							z.ZodTypeAny,
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							},
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							}
						>
						gitProperties: z.ZodOptional<
							z.ZodObject<
								{
									repositoryUrl: z.ZodOptional<z.ZodString>
									repositoryName: z.ZodOptional<z.ZodString>
									defaultBranch: z.ZodOptional<z.ZodString>
								},
								"strip",
								z.ZodTypeAny,
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								},
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								}
							>
						>
						lastHeartbeat: z.ZodNumber
						task: z.ZodObject<
							{
								task: z.ZodOptional<z.ZodString>
								images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
								taskId: z.ZodString
								taskStatus: z.ZodNativeEnum<typeof TaskStatus>
								taskAsk: z.ZodOptional<
									z.ZodObject<
										{
											ts: z.ZodNumber
											type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
											ask: z.ZodOptional<
												z.ZodEnum<
													[
														"followup",
														"command",
														"command_output",
														"completion_result",
														"tool",
														"api_req_failed",
														"resume_task",
														"resume_completed_task",
														"mistake_limit_reached",
														"browser_action_launch",
														"use_mcp_server",
														"auto_approval_max_req_reached",
														"payment_required_prompt",
														"invalid_model",
														"report_bug",
														"condense",
														"checkpoint_restore",
													]
												>
											>
											say: z.ZodOptional<
												z.ZodEnum<
													[
														"error",
														"api_req_started",
														"api_req_finished",
														"api_req_retried",
														"api_req_retry_delayed",
														"api_req_deleted",
														"text",
														"image",
														"reasoning",
														"completion_result",
														"user_feedback",
														"user_feedback_diff",
														"command_output",
														"shell_integration_warning",
														"browser_action",
														"browser_action_result",
														"mcp_server_request_started",
														"mcp_server_response",
														"subtask_result",
														"checkpoint_saved",
														"rooignore_error",
														"diff_error",
														"condense_context",
														"condense_context_error",
														"codebase_search_result",
														"user_edit_todos",
													]
												>
											>
											text: z.ZodOptional<z.ZodString>
											images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											partial: z.ZodOptional<z.ZodBoolean>
											reasoning: z.ZodOptional<z.ZodString>
											conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
											checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
											progressStatus: z.ZodOptional<
												z.ZodObject<
													{
														icon: z.ZodOptional<z.ZodString>
														text: z.ZodOptional<z.ZodString>
													},
													"strip",
													z.ZodTypeAny,
													{
														text?: string | undefined
														icon?: string | undefined
													},
													{
														text?: string | undefined
														icon?: string | undefined
													}
												>
											>
											contextCondense: z.ZodOptional<
												z.ZodObject<
													{
														cost: z.ZodNumber
														prevContextTokens: z.ZodNumber
														newContextTokens: z.ZodNumber
														summary: z.ZodString
													},
													"strip",
													z.ZodTypeAny,
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													},
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													}
												>
											>
											isProtected: z.ZodOptional<z.ZodBoolean>
											apiProtocol: z.ZodOptional<
												z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
											>
											isAnswered: z.ZodOptional<z.ZodBoolean>
											metadata: z.ZodOptional<
												z.ZodObject<
													{
														kiloCode: z.ZodOptional<
															z.ZodObject<
																{
																	commitRange: z.ZodOptional<
																		z.ZodObject<
																			{
																				from: z.ZodString
																				fromTimeStamp: z.ZodOptional<z.ZodNumber>
																				to: z.ZodString
																			},
																			"strip",
																			z.ZodTypeAny,
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			},
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			}
																		>
																	>
																},
																"strip",
																z.ZodTypeAny,
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																},
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																}
															>
														>
													},
													"strip",
													z.ZodTypeAny,
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													},
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													}
												>
											>
										},
										"strip",
										z.ZodTypeAny,
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										},
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										}
									>
								>
								queuedMessages: z.ZodOptional<
									z.ZodArray<
										z.ZodObject<
											{
												timestamp: z.ZodNumber
												id: z.ZodString
												text: z.ZodString
												images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											},
											"strip",
											z.ZodTypeAny,
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											},
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											}
										>,
										"many"
									>
								>
								parentTaskId: z.ZodOptional<z.ZodString>
								childTaskId: z.ZodOptional<z.ZodString>
								tokenUsage: z.ZodOptional<
									z.ZodObject<
										{
											totalTokensIn: z.ZodNumber
											totalTokensOut: z.ZodNumber
											totalCacheWrites: z.ZodOptional<z.ZodNumber>
											totalCacheReads: z.ZodOptional<z.ZodNumber>
											totalCost: z.ZodNumber
											contextTokens: z.ZodNumber
										},
										"strip",
										z.ZodTypeAny,
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										},
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										}
									>
								>
							},
							"strip",
							z.ZodTypeAny,
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							},
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							}
						>
						taskAsk: z.ZodOptional<
							z.ZodObject<
								{
									ts: z.ZodNumber
									type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
									ask: z.ZodOptional<
										z.ZodEnum<
											[
												"followup",
												"command",
												"command_output",
												"completion_result",
												"tool",
												"api_req_failed",
												"resume_task",
												"resume_completed_task",
												"mistake_limit_reached",
												"browser_action_launch",
												"use_mcp_server",
												"auto_approval_max_req_reached",
												"payment_required_prompt",
												"invalid_model",
												"report_bug",
												"condense",
												"checkpoint_restore",
											]
										>
									>
									say: z.ZodOptional<
										z.ZodEnum<
											[
												"error",
												"api_req_started",
												"api_req_finished",
												"api_req_retried",
												"api_req_retry_delayed",
												"api_req_deleted",
												"text",
												"image",
												"reasoning",
												"completion_result",
												"user_feedback",
												"user_feedback_diff",
												"command_output",
												"shell_integration_warning",
												"browser_action",
												"browser_action_result",
												"mcp_server_request_started",
												"mcp_server_response",
												"subtask_result",
												"checkpoint_saved",
												"rooignore_error",
												"diff_error",
												"condense_context",
												"condense_context_error",
												"codebase_search_result",
												"user_edit_todos",
											]
										>
									>
									text: z.ZodOptional<z.ZodString>
									images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
									partial: z.ZodOptional<z.ZodBoolean>
									reasoning: z.ZodOptional<z.ZodString>
									conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
									checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
									progressStatus: z.ZodOptional<
										z.ZodObject<
											{
												icon: z.ZodOptional<z.ZodString>
												text: z.ZodOptional<z.ZodString>
											},
											"strip",
											z.ZodTypeAny,
											{
												text?: string | undefined
												icon?: string | undefined
											},
											{
												text?: string | undefined
												icon?: string | undefined
											}
										>
									>
									contextCondense: z.ZodOptional<
										z.ZodObject<
											{
												cost: z.ZodNumber
												prevContextTokens: z.ZodNumber
												newContextTokens: z.ZodNumber
												summary: z.ZodString
											},
											"strip",
											z.ZodTypeAny,
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											},
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											}
										>
									>
									isProtected: z.ZodOptional<z.ZodBoolean>
									apiProtocol: z.ZodOptional<
										z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
									>
									isAnswered: z.ZodOptional<z.ZodBoolean>
									metadata: z.ZodOptional<
										z.ZodObject<
											{
												kiloCode: z.ZodOptional<
													z.ZodObject<
														{
															commitRange: z.ZodOptional<
																z.ZodObject<
																	{
																		from: z.ZodString
																		fromTimeStamp: z.ZodOptional<z.ZodNumber>
																		to: z.ZodString
																	},
																	"strip",
																	z.ZodTypeAny,
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	},
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	}
																>
															>
														},
														"strip",
														z.ZodTypeAny,
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														},
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														}
													>
												>
											},
											"strip",
											z.ZodTypeAny,
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											},
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											}
										>
									>
								},
								"strip",
								z.ZodTypeAny,
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								},
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								}
							>
						>
						taskHistory: z.ZodArray<z.ZodString, "many">
						mode: z.ZodOptional<z.ZodString>
						modes: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										slug: z.ZodString
										name: z.ZodString
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										slug: string
									},
									{
										name: string
										slug: string
									}
								>,
								"many"
							>
						>
						providerProfile: z.ZodOptional<z.ZodString>
						providerProfiles: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										name: z.ZodString
										provider: z.ZodOptional<z.ZodString>
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										provider?: string | undefined
									},
									{
										name: string
										provider?: string | undefined
									}
								>,
								"many"
							>
						>
						isCloudAgent: z.ZodOptional<z.ZodBoolean>
					},
					"strip",
					z.ZodTypeAny,
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					},
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					}
				>
				timestamp: z.ZodNumber
			},
			"strip",
			z.ZodTypeAny,
			{
				type: ExtensionBridgeEventName.TaskUnpaused
				timestamp: number
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			},
			{
				type: ExtensionBridgeEventName.TaskUnpaused
				timestamp: number
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			}
		>,
		z.ZodObject<
			{
				type: z.ZodLiteral<ExtensionBridgeEventName.TaskSpawned>
				instance: z.ZodObject<
					{
						instanceId: z.ZodString
						userId: z.ZodString
						workspacePath: z.ZodString
						appProperties: z.ZodObject<
							{
								appName: z.ZodString
								appVersion: z.ZodString
								vscodeVersion: z.ZodString
								platform: z.ZodString
								editorName: z.ZodString
								wrapped: z.ZodBoolean
								wrapper: z.ZodNullable<z.ZodString>
								wrapperTitle: z.ZodNullable<z.ZodString>
								wrapperCode: z.ZodNullable<z.ZodString>
								wrapperVersion: z.ZodNullable<z.ZodString>
								hostname: z.ZodOptional<z.ZodString>
							},
							"strip",
							z.ZodTypeAny,
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							},
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							}
						>
						gitProperties: z.ZodOptional<
							z.ZodObject<
								{
									repositoryUrl: z.ZodOptional<z.ZodString>
									repositoryName: z.ZodOptional<z.ZodString>
									defaultBranch: z.ZodOptional<z.ZodString>
								},
								"strip",
								z.ZodTypeAny,
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								},
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								}
							>
						>
						lastHeartbeat: z.ZodNumber
						task: z.ZodObject<
							{
								task: z.ZodOptional<z.ZodString>
								images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
								taskId: z.ZodString
								taskStatus: z.ZodNativeEnum<typeof TaskStatus>
								taskAsk: z.ZodOptional<
									z.ZodObject<
										{
											ts: z.ZodNumber
											type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
											ask: z.ZodOptional<
												z.ZodEnum<
													[
														"followup",
														"command",
														"command_output",
														"completion_result",
														"tool",
														"api_req_failed",
														"resume_task",
														"resume_completed_task",
														"mistake_limit_reached",
														"browser_action_launch",
														"use_mcp_server",
														"auto_approval_max_req_reached",
														"payment_required_prompt",
														"invalid_model",
														"report_bug",
														"condense",
														"checkpoint_restore",
													]
												>
											>
											say: z.ZodOptional<
												z.ZodEnum<
													[
														"error",
														"api_req_started",
														"api_req_finished",
														"api_req_retried",
														"api_req_retry_delayed",
														"api_req_deleted",
														"text",
														"image",
														"reasoning",
														"completion_result",
														"user_feedback",
														"user_feedback_diff",
														"command_output",
														"shell_integration_warning",
														"browser_action",
														"browser_action_result",
														"mcp_server_request_started",
														"mcp_server_response",
														"subtask_result",
														"checkpoint_saved",
														"rooignore_error",
														"diff_error",
														"condense_context",
														"condense_context_error",
														"codebase_search_result",
														"user_edit_todos",
													]
												>
											>
											text: z.ZodOptional<z.ZodString>
											images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											partial: z.ZodOptional<z.ZodBoolean>
											reasoning: z.ZodOptional<z.ZodString>
											conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
											checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
											progressStatus: z.ZodOptional<
												z.ZodObject<
													{
														icon: z.ZodOptional<z.ZodString>
														text: z.ZodOptional<z.ZodString>
													},
													"strip",
													z.ZodTypeAny,
													{
														text?: string | undefined
														icon?: string | undefined
													},
													{
														text?: string | undefined
														icon?: string | undefined
													}
												>
											>
											contextCondense: z.ZodOptional<
												z.ZodObject<
													{
														cost: z.ZodNumber
														prevContextTokens: z.ZodNumber
														newContextTokens: z.ZodNumber
														summary: z.ZodString
													},
													"strip",
													z.ZodTypeAny,
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													},
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													}
												>
											>
											isProtected: z.ZodOptional<z.ZodBoolean>
											apiProtocol: z.ZodOptional<
												z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
											>
											isAnswered: z.ZodOptional<z.ZodBoolean>
											metadata: z.ZodOptional<
												z.ZodObject<
													{
														kiloCode: z.ZodOptional<
															z.ZodObject<
																{
																	commitRange: z.ZodOptional<
																		z.ZodObject<
																			{
																				from: z.ZodString
																				fromTimeStamp: z.ZodOptional<z.ZodNumber>
																				to: z.ZodString
																			},
																			"strip",
																			z.ZodTypeAny,
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			},
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			}
																		>
																	>
																},
																"strip",
																z.ZodTypeAny,
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																},
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																}
															>
														>
													},
													"strip",
													z.ZodTypeAny,
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													},
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													}
												>
											>
										},
										"strip",
										z.ZodTypeAny,
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										},
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										}
									>
								>
								queuedMessages: z.ZodOptional<
									z.ZodArray<
										z.ZodObject<
											{
												timestamp: z.ZodNumber
												id: z.ZodString
												text: z.ZodString
												images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											},
											"strip",
											z.ZodTypeAny,
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											},
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											}
										>,
										"many"
									>
								>
								parentTaskId: z.ZodOptional<z.ZodString>
								childTaskId: z.ZodOptional<z.ZodString>
								tokenUsage: z.ZodOptional<
									z.ZodObject<
										{
											totalTokensIn: z.ZodNumber
											totalTokensOut: z.ZodNumber
											totalCacheWrites: z.ZodOptional<z.ZodNumber>
											totalCacheReads: z.ZodOptional<z.ZodNumber>
											totalCost: z.ZodNumber
											contextTokens: z.ZodNumber
										},
										"strip",
										z.ZodTypeAny,
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										},
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										}
									>
								>
							},
							"strip",
							z.ZodTypeAny,
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							},
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							}
						>
						taskAsk: z.ZodOptional<
							z.ZodObject<
								{
									ts: z.ZodNumber
									type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
									ask: z.ZodOptional<
										z.ZodEnum<
											[
												"followup",
												"command",
												"command_output",
												"completion_result",
												"tool",
												"api_req_failed",
												"resume_task",
												"resume_completed_task",
												"mistake_limit_reached",
												"browser_action_launch",
												"use_mcp_server",
												"auto_approval_max_req_reached",
												"payment_required_prompt",
												"invalid_model",
												"report_bug",
												"condense",
												"checkpoint_restore",
											]
										>
									>
									say: z.ZodOptional<
										z.ZodEnum<
											[
												"error",
												"api_req_started",
												"api_req_finished",
												"api_req_retried",
												"api_req_retry_delayed",
												"api_req_deleted",
												"text",
												"image",
												"reasoning",
												"completion_result",
												"user_feedback",
												"user_feedback_diff",
												"command_output",
												"shell_integration_warning",
												"browser_action",
												"browser_action_result",
												"mcp_server_request_started",
												"mcp_server_response",
												"subtask_result",
												"checkpoint_saved",
												"rooignore_error",
												"diff_error",
												"condense_context",
												"condense_context_error",
												"codebase_search_result",
												"user_edit_todos",
											]
										>
									>
									text: z.ZodOptional<z.ZodString>
									images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
									partial: z.ZodOptional<z.ZodBoolean>
									reasoning: z.ZodOptional<z.ZodString>
									conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
									checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
									progressStatus: z.ZodOptional<
										z.ZodObject<
											{
												icon: z.ZodOptional<z.ZodString>
												text: z.ZodOptional<z.ZodString>
											},
											"strip",
											z.ZodTypeAny,
											{
												text?: string | undefined
												icon?: string | undefined
											},
											{
												text?: string | undefined
												icon?: string | undefined
											}
										>
									>
									contextCondense: z.ZodOptional<
										z.ZodObject<
											{
												cost: z.ZodNumber
												prevContextTokens: z.ZodNumber
												newContextTokens: z.ZodNumber
												summary: z.ZodString
											},
											"strip",
											z.ZodTypeAny,
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											},
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											}
										>
									>
									isProtected: z.ZodOptional<z.ZodBoolean>
									apiProtocol: z.ZodOptional<
										z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
									>
									isAnswered: z.ZodOptional<z.ZodBoolean>
									metadata: z.ZodOptional<
										z.ZodObject<
											{
												kiloCode: z.ZodOptional<
													z.ZodObject<
														{
															commitRange: z.ZodOptional<
																z.ZodObject<
																	{
																		from: z.ZodString
																		fromTimeStamp: z.ZodOptional<z.ZodNumber>
																		to: z.ZodString
																	},
																	"strip",
																	z.ZodTypeAny,
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	},
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	}
																>
															>
														},
														"strip",
														z.ZodTypeAny,
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														},
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														}
													>
												>
											},
											"strip",
											z.ZodTypeAny,
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											},
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											}
										>
									>
								},
								"strip",
								z.ZodTypeAny,
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								},
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								}
							>
						>
						taskHistory: z.ZodArray<z.ZodString, "many">
						mode: z.ZodOptional<z.ZodString>
						modes: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										slug: z.ZodString
										name: z.ZodString
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										slug: string
									},
									{
										name: string
										slug: string
									}
								>,
								"many"
							>
						>
						providerProfile: z.ZodOptional<z.ZodString>
						providerProfiles: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										name: z.ZodString
										provider: z.ZodOptional<z.ZodString>
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										provider?: string | undefined
									},
									{
										name: string
										provider?: string | undefined
									}
								>,
								"many"
							>
						>
						isCloudAgent: z.ZodOptional<z.ZodBoolean>
					},
					"strip",
					z.ZodTypeAny,
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					},
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					}
				>
				timestamp: z.ZodNumber
			},
			"strip",
			z.ZodTypeAny,
			{
				type: ExtensionBridgeEventName.TaskSpawned
				timestamp: number
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			},
			{
				type: ExtensionBridgeEventName.TaskSpawned
				timestamp: number
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			}
		>,
		z.ZodObject<
			{
				type: z.ZodLiteral<ExtensionBridgeEventName.TaskUserMessage>
				instance: z.ZodObject<
					{
						instanceId: z.ZodString
						userId: z.ZodString
						workspacePath: z.ZodString
						appProperties: z.ZodObject<
							{
								appName: z.ZodString
								appVersion: z.ZodString
								vscodeVersion: z.ZodString
								platform: z.ZodString
								editorName: z.ZodString
								wrapped: z.ZodBoolean
								wrapper: z.ZodNullable<z.ZodString>
								wrapperTitle: z.ZodNullable<z.ZodString>
								wrapperCode: z.ZodNullable<z.ZodString>
								wrapperVersion: z.ZodNullable<z.ZodString>
								hostname: z.ZodOptional<z.ZodString>
							},
							"strip",
							z.ZodTypeAny,
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							},
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							}
						>
						gitProperties: z.ZodOptional<
							z.ZodObject<
								{
									repositoryUrl: z.ZodOptional<z.ZodString>
									repositoryName: z.ZodOptional<z.ZodString>
									defaultBranch: z.ZodOptional<z.ZodString>
								},
								"strip",
								z.ZodTypeAny,
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								},
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								}
							>
						>
						lastHeartbeat: z.ZodNumber
						task: z.ZodObject<
							{
								task: z.ZodOptional<z.ZodString>
								images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
								taskId: z.ZodString
								taskStatus: z.ZodNativeEnum<typeof TaskStatus>
								taskAsk: z.ZodOptional<
									z.ZodObject<
										{
											ts: z.ZodNumber
											type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
											ask: z.ZodOptional<
												z.ZodEnum<
													[
														"followup",
														"command",
														"command_output",
														"completion_result",
														"tool",
														"api_req_failed",
														"resume_task",
														"resume_completed_task",
														"mistake_limit_reached",
														"browser_action_launch",
														"use_mcp_server",
														"auto_approval_max_req_reached",
														"payment_required_prompt",
														"invalid_model",
														"report_bug",
														"condense",
														"checkpoint_restore",
													]
												>
											>
											say: z.ZodOptional<
												z.ZodEnum<
													[
														"error",
														"api_req_started",
														"api_req_finished",
														"api_req_retried",
														"api_req_retry_delayed",
														"api_req_deleted",
														"text",
														"image",
														"reasoning",
														"completion_result",
														"user_feedback",
														"user_feedback_diff",
														"command_output",
														"shell_integration_warning",
														"browser_action",
														"browser_action_result",
														"mcp_server_request_started",
														"mcp_server_response",
														"subtask_result",
														"checkpoint_saved",
														"rooignore_error",
														"diff_error",
														"condense_context",
														"condense_context_error",
														"codebase_search_result",
														"user_edit_todos",
													]
												>
											>
											text: z.ZodOptional<z.ZodString>
											images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											partial: z.ZodOptional<z.ZodBoolean>
											reasoning: z.ZodOptional<z.ZodString>
											conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
											checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
											progressStatus: z.ZodOptional<
												z.ZodObject<
													{
														icon: z.ZodOptional<z.ZodString>
														text: z.ZodOptional<z.ZodString>
													},
													"strip",
													z.ZodTypeAny,
													{
														text?: string | undefined
														icon?: string | undefined
													},
													{
														text?: string | undefined
														icon?: string | undefined
													}
												>
											>
											contextCondense: z.ZodOptional<
												z.ZodObject<
													{
														cost: z.ZodNumber
														prevContextTokens: z.ZodNumber
														newContextTokens: z.ZodNumber
														summary: z.ZodString
													},
													"strip",
													z.ZodTypeAny,
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													},
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													}
												>
											>
											isProtected: z.ZodOptional<z.ZodBoolean>
											apiProtocol: z.ZodOptional<
												z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
											>
											isAnswered: z.ZodOptional<z.ZodBoolean>
											metadata: z.ZodOptional<
												z.ZodObject<
													{
														kiloCode: z.ZodOptional<
															z.ZodObject<
																{
																	commitRange: z.ZodOptional<
																		z.ZodObject<
																			{
																				from: z.ZodString
																				fromTimeStamp: z.ZodOptional<z.ZodNumber>
																				to: z.ZodString
																			},
																			"strip",
																			z.ZodTypeAny,
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			},
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			}
																		>
																	>
																},
																"strip",
																z.ZodTypeAny,
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																},
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																}
															>
														>
													},
													"strip",
													z.ZodTypeAny,
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													},
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													}
												>
											>
										},
										"strip",
										z.ZodTypeAny,
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										},
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										}
									>
								>
								queuedMessages: z.ZodOptional<
									z.ZodArray<
										z.ZodObject<
											{
												timestamp: z.ZodNumber
												id: z.ZodString
												text: z.ZodString
												images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											},
											"strip",
											z.ZodTypeAny,
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											},
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											}
										>,
										"many"
									>
								>
								parentTaskId: z.ZodOptional<z.ZodString>
								childTaskId: z.ZodOptional<z.ZodString>
								tokenUsage: z.ZodOptional<
									z.ZodObject<
										{
											totalTokensIn: z.ZodNumber
											totalTokensOut: z.ZodNumber
											totalCacheWrites: z.ZodOptional<z.ZodNumber>
											totalCacheReads: z.ZodOptional<z.ZodNumber>
											totalCost: z.ZodNumber
											contextTokens: z.ZodNumber
										},
										"strip",
										z.ZodTypeAny,
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										},
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										}
									>
								>
							},
							"strip",
							z.ZodTypeAny,
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							},
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							}
						>
						taskAsk: z.ZodOptional<
							z.ZodObject<
								{
									ts: z.ZodNumber
									type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
									ask: z.ZodOptional<
										z.ZodEnum<
											[
												"followup",
												"command",
												"command_output",
												"completion_result",
												"tool",
												"api_req_failed",
												"resume_task",
												"resume_completed_task",
												"mistake_limit_reached",
												"browser_action_launch",
												"use_mcp_server",
												"auto_approval_max_req_reached",
												"payment_required_prompt",
												"invalid_model",
												"report_bug",
												"condense",
												"checkpoint_restore",
											]
										>
									>
									say: z.ZodOptional<
										z.ZodEnum<
											[
												"error",
												"api_req_started",
												"api_req_finished",
												"api_req_retried",
												"api_req_retry_delayed",
												"api_req_deleted",
												"text",
												"image",
												"reasoning",
												"completion_result",
												"user_feedback",
												"user_feedback_diff",
												"command_output",
												"shell_integration_warning",
												"browser_action",
												"browser_action_result",
												"mcp_server_request_started",
												"mcp_server_response",
												"subtask_result",
												"checkpoint_saved",
												"rooignore_error",
												"diff_error",
												"condense_context",
												"condense_context_error",
												"codebase_search_result",
												"user_edit_todos",
											]
										>
									>
									text: z.ZodOptional<z.ZodString>
									images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
									partial: z.ZodOptional<z.ZodBoolean>
									reasoning: z.ZodOptional<z.ZodString>
									conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
									checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
									progressStatus: z.ZodOptional<
										z.ZodObject<
											{
												icon: z.ZodOptional<z.ZodString>
												text: z.ZodOptional<z.ZodString>
											},
											"strip",
											z.ZodTypeAny,
											{
												text?: string | undefined
												icon?: string | undefined
											},
											{
												text?: string | undefined
												icon?: string | undefined
											}
										>
									>
									contextCondense: z.ZodOptional<
										z.ZodObject<
											{
												cost: z.ZodNumber
												prevContextTokens: z.ZodNumber
												newContextTokens: z.ZodNumber
												summary: z.ZodString
											},
											"strip",
											z.ZodTypeAny,
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											},
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											}
										>
									>
									isProtected: z.ZodOptional<z.ZodBoolean>
									apiProtocol: z.ZodOptional<
										z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
									>
									isAnswered: z.ZodOptional<z.ZodBoolean>
									metadata: z.ZodOptional<
										z.ZodObject<
											{
												kiloCode: z.ZodOptional<
													z.ZodObject<
														{
															commitRange: z.ZodOptional<
																z.ZodObject<
																	{
																		from: z.ZodString
																		fromTimeStamp: z.ZodOptional<z.ZodNumber>
																		to: z.ZodString
																	},
																	"strip",
																	z.ZodTypeAny,
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	},
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	}
																>
															>
														},
														"strip",
														z.ZodTypeAny,
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														},
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														}
													>
												>
											},
											"strip",
											z.ZodTypeAny,
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											},
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											}
										>
									>
								},
								"strip",
								z.ZodTypeAny,
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								},
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								}
							>
						>
						taskHistory: z.ZodArray<z.ZodString, "many">
						mode: z.ZodOptional<z.ZodString>
						modes: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										slug: z.ZodString
										name: z.ZodString
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										slug: string
									},
									{
										name: string
										slug: string
									}
								>,
								"many"
							>
						>
						providerProfile: z.ZodOptional<z.ZodString>
						providerProfiles: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										name: z.ZodString
										provider: z.ZodOptional<z.ZodString>
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										provider?: string | undefined
									},
									{
										name: string
										provider?: string | undefined
									}
								>,
								"many"
							>
						>
						isCloudAgent: z.ZodOptional<z.ZodBoolean>
					},
					"strip",
					z.ZodTypeAny,
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					},
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					}
				>
				timestamp: z.ZodNumber
			},
			"strip",
			z.ZodTypeAny,
			{
				type: ExtensionBridgeEventName.TaskUserMessage
				timestamp: number
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			},
			{
				type: ExtensionBridgeEventName.TaskUserMessage
				timestamp: number
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			}
		>,
		z.ZodObject<
			{
				type: z.ZodLiteral<ExtensionBridgeEventName.TaskTokenUsageUpdated>
				instance: z.ZodObject<
					{
						instanceId: z.ZodString
						userId: z.ZodString
						workspacePath: z.ZodString
						appProperties: z.ZodObject<
							{
								appName: z.ZodString
								appVersion: z.ZodString
								vscodeVersion: z.ZodString
								platform: z.ZodString
								editorName: z.ZodString
								wrapped: z.ZodBoolean
								wrapper: z.ZodNullable<z.ZodString>
								wrapperTitle: z.ZodNullable<z.ZodString>
								wrapperCode: z.ZodNullable<z.ZodString>
								wrapperVersion: z.ZodNullable<z.ZodString>
								hostname: z.ZodOptional<z.ZodString>
							},
							"strip",
							z.ZodTypeAny,
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							},
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							}
						>
						gitProperties: z.ZodOptional<
							z.ZodObject<
								{
									repositoryUrl: z.ZodOptional<z.ZodString>
									repositoryName: z.ZodOptional<z.ZodString>
									defaultBranch: z.ZodOptional<z.ZodString>
								},
								"strip",
								z.ZodTypeAny,
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								},
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								}
							>
						>
						lastHeartbeat: z.ZodNumber
						task: z.ZodObject<
							{
								task: z.ZodOptional<z.ZodString>
								images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
								taskId: z.ZodString
								taskStatus: z.ZodNativeEnum<typeof TaskStatus>
								taskAsk: z.ZodOptional<
									z.ZodObject<
										{
											ts: z.ZodNumber
											type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
											ask: z.ZodOptional<
												z.ZodEnum<
													[
														"followup",
														"command",
														"command_output",
														"completion_result",
														"tool",
														"api_req_failed",
														"resume_task",
														"resume_completed_task",
														"mistake_limit_reached",
														"browser_action_launch",
														"use_mcp_server",
														"auto_approval_max_req_reached",
														"payment_required_prompt",
														"invalid_model",
														"report_bug",
														"condense",
														"checkpoint_restore",
													]
												>
											>
											say: z.ZodOptional<
												z.ZodEnum<
													[
														"error",
														"api_req_started",
														"api_req_finished",
														"api_req_retried",
														"api_req_retry_delayed",
														"api_req_deleted",
														"text",
														"image",
														"reasoning",
														"completion_result",
														"user_feedback",
														"user_feedback_diff",
														"command_output",
														"shell_integration_warning",
														"browser_action",
														"browser_action_result",
														"mcp_server_request_started",
														"mcp_server_response",
														"subtask_result",
														"checkpoint_saved",
														"rooignore_error",
														"diff_error",
														"condense_context",
														"condense_context_error",
														"codebase_search_result",
														"user_edit_todos",
													]
												>
											>
											text: z.ZodOptional<z.ZodString>
											images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											partial: z.ZodOptional<z.ZodBoolean>
											reasoning: z.ZodOptional<z.ZodString>
											conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
											checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
											progressStatus: z.ZodOptional<
												z.ZodObject<
													{
														icon: z.ZodOptional<z.ZodString>
														text: z.ZodOptional<z.ZodString>
													},
													"strip",
													z.ZodTypeAny,
													{
														text?: string | undefined
														icon?: string | undefined
													},
													{
														text?: string | undefined
														icon?: string | undefined
													}
												>
											>
											contextCondense: z.ZodOptional<
												z.ZodObject<
													{
														cost: z.ZodNumber
														prevContextTokens: z.ZodNumber
														newContextTokens: z.ZodNumber
														summary: z.ZodString
													},
													"strip",
													z.ZodTypeAny,
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													},
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													}
												>
											>
											isProtected: z.ZodOptional<z.ZodBoolean>
											apiProtocol: z.ZodOptional<
												z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
											>
											isAnswered: z.ZodOptional<z.ZodBoolean>
											metadata: z.ZodOptional<
												z.ZodObject<
													{
														kiloCode: z.ZodOptional<
															z.ZodObject<
																{
																	commitRange: z.ZodOptional<
																		z.ZodObject<
																			{
																				from: z.ZodString
																				fromTimeStamp: z.ZodOptional<z.ZodNumber>
																				to: z.ZodString
																			},
																			"strip",
																			z.ZodTypeAny,
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			},
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			}
																		>
																	>
																},
																"strip",
																z.ZodTypeAny,
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																},
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																}
															>
														>
													},
													"strip",
													z.ZodTypeAny,
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													},
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													}
												>
											>
										},
										"strip",
										z.ZodTypeAny,
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										},
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										}
									>
								>
								queuedMessages: z.ZodOptional<
									z.ZodArray<
										z.ZodObject<
											{
												timestamp: z.ZodNumber
												id: z.ZodString
												text: z.ZodString
												images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											},
											"strip",
											z.ZodTypeAny,
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											},
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											}
										>,
										"many"
									>
								>
								parentTaskId: z.ZodOptional<z.ZodString>
								childTaskId: z.ZodOptional<z.ZodString>
								tokenUsage: z.ZodOptional<
									z.ZodObject<
										{
											totalTokensIn: z.ZodNumber
											totalTokensOut: z.ZodNumber
											totalCacheWrites: z.ZodOptional<z.ZodNumber>
											totalCacheReads: z.ZodOptional<z.ZodNumber>
											totalCost: z.ZodNumber
											contextTokens: z.ZodNumber
										},
										"strip",
										z.ZodTypeAny,
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										},
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										}
									>
								>
							},
							"strip",
							z.ZodTypeAny,
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							},
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							}
						>
						taskAsk: z.ZodOptional<
							z.ZodObject<
								{
									ts: z.ZodNumber
									type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
									ask: z.ZodOptional<
										z.ZodEnum<
											[
												"followup",
												"command",
												"command_output",
												"completion_result",
												"tool",
												"api_req_failed",
												"resume_task",
												"resume_completed_task",
												"mistake_limit_reached",
												"browser_action_launch",
												"use_mcp_server",
												"auto_approval_max_req_reached",
												"payment_required_prompt",
												"invalid_model",
												"report_bug",
												"condense",
												"checkpoint_restore",
											]
										>
									>
									say: z.ZodOptional<
										z.ZodEnum<
											[
												"error",
												"api_req_started",
												"api_req_finished",
												"api_req_retried",
												"api_req_retry_delayed",
												"api_req_deleted",
												"text",
												"image",
												"reasoning",
												"completion_result",
												"user_feedback",
												"user_feedback_diff",
												"command_output",
												"shell_integration_warning",
												"browser_action",
												"browser_action_result",
												"mcp_server_request_started",
												"mcp_server_response",
												"subtask_result",
												"checkpoint_saved",
												"rooignore_error",
												"diff_error",
												"condense_context",
												"condense_context_error",
												"codebase_search_result",
												"user_edit_todos",
											]
										>
									>
									text: z.ZodOptional<z.ZodString>
									images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
									partial: z.ZodOptional<z.ZodBoolean>
									reasoning: z.ZodOptional<z.ZodString>
									conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
									checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
									progressStatus: z.ZodOptional<
										z.ZodObject<
											{
												icon: z.ZodOptional<z.ZodString>
												text: z.ZodOptional<z.ZodString>
											},
											"strip",
											z.ZodTypeAny,
											{
												text?: string | undefined
												icon?: string | undefined
											},
											{
												text?: string | undefined
												icon?: string | undefined
											}
										>
									>
									contextCondense: z.ZodOptional<
										z.ZodObject<
											{
												cost: z.ZodNumber
												prevContextTokens: z.ZodNumber
												newContextTokens: z.ZodNumber
												summary: z.ZodString
											},
											"strip",
											z.ZodTypeAny,
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											},
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											}
										>
									>
									isProtected: z.ZodOptional<z.ZodBoolean>
									apiProtocol: z.ZodOptional<
										z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
									>
									isAnswered: z.ZodOptional<z.ZodBoolean>
									metadata: z.ZodOptional<
										z.ZodObject<
											{
												kiloCode: z.ZodOptional<
													z.ZodObject<
														{
															commitRange: z.ZodOptional<
																z.ZodObject<
																	{
																		from: z.ZodString
																		fromTimeStamp: z.ZodOptional<z.ZodNumber>
																		to: z.ZodString
																	},
																	"strip",
																	z.ZodTypeAny,
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	},
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	}
																>
															>
														},
														"strip",
														z.ZodTypeAny,
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														},
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														}
													>
												>
											},
											"strip",
											z.ZodTypeAny,
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											},
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											}
										>
									>
								},
								"strip",
								z.ZodTypeAny,
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								},
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								}
							>
						>
						taskHistory: z.ZodArray<z.ZodString, "many">
						mode: z.ZodOptional<z.ZodString>
						modes: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										slug: z.ZodString
										name: z.ZodString
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										slug: string
									},
									{
										name: string
										slug: string
									}
								>,
								"many"
							>
						>
						providerProfile: z.ZodOptional<z.ZodString>
						providerProfiles: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										name: z.ZodString
										provider: z.ZodOptional<z.ZodString>
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										provider?: string | undefined
									},
									{
										name: string
										provider?: string | undefined
									}
								>,
								"many"
							>
						>
						isCloudAgent: z.ZodOptional<z.ZodBoolean>
					},
					"strip",
					z.ZodTypeAny,
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					},
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					}
				>
				timestamp: z.ZodNumber
			},
			"strip",
			z.ZodTypeAny,
			{
				type: ExtensionBridgeEventName.TaskTokenUsageUpdated
				timestamp: number
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			},
			{
				type: ExtensionBridgeEventName.TaskTokenUsageUpdated
				timestamp: number
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			}
		>,
		z.ZodObject<
			{
				type: z.ZodLiteral<ExtensionBridgeEventName.ModeChanged>
				instance: z.ZodObject<
					{
						instanceId: z.ZodString
						userId: z.ZodString
						workspacePath: z.ZodString
						appProperties: z.ZodObject<
							{
								appName: z.ZodString
								appVersion: z.ZodString
								vscodeVersion: z.ZodString
								platform: z.ZodString
								editorName: z.ZodString
								wrapped: z.ZodBoolean
								wrapper: z.ZodNullable<z.ZodString>
								wrapperTitle: z.ZodNullable<z.ZodString>
								wrapperCode: z.ZodNullable<z.ZodString>
								wrapperVersion: z.ZodNullable<z.ZodString>
								hostname: z.ZodOptional<z.ZodString>
							},
							"strip",
							z.ZodTypeAny,
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							},
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							}
						>
						gitProperties: z.ZodOptional<
							z.ZodObject<
								{
									repositoryUrl: z.ZodOptional<z.ZodString>
									repositoryName: z.ZodOptional<z.ZodString>
									defaultBranch: z.ZodOptional<z.ZodString>
								},
								"strip",
								z.ZodTypeAny,
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								},
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								}
							>
						>
						lastHeartbeat: z.ZodNumber
						task: z.ZodObject<
							{
								task: z.ZodOptional<z.ZodString>
								images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
								taskId: z.ZodString
								taskStatus: z.ZodNativeEnum<typeof TaskStatus>
								taskAsk: z.ZodOptional<
									z.ZodObject<
										{
											ts: z.ZodNumber
											type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
											ask: z.ZodOptional<
												z.ZodEnum<
													[
														"followup",
														"command",
														"command_output",
														"completion_result",
														"tool",
														"api_req_failed",
														"resume_task",
														"resume_completed_task",
														"mistake_limit_reached",
														"browser_action_launch",
														"use_mcp_server",
														"auto_approval_max_req_reached",
														"payment_required_prompt",
														"invalid_model",
														"report_bug",
														"condense",
														"checkpoint_restore",
													]
												>
											>
											say: z.ZodOptional<
												z.ZodEnum<
													[
														"error",
														"api_req_started",
														"api_req_finished",
														"api_req_retried",
														"api_req_retry_delayed",
														"api_req_deleted",
														"text",
														"image",
														"reasoning",
														"completion_result",
														"user_feedback",
														"user_feedback_diff",
														"command_output",
														"shell_integration_warning",
														"browser_action",
														"browser_action_result",
														"mcp_server_request_started",
														"mcp_server_response",
														"subtask_result",
														"checkpoint_saved",
														"rooignore_error",
														"diff_error",
														"condense_context",
														"condense_context_error",
														"codebase_search_result",
														"user_edit_todos",
													]
												>
											>
											text: z.ZodOptional<z.ZodString>
											images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											partial: z.ZodOptional<z.ZodBoolean>
											reasoning: z.ZodOptional<z.ZodString>
											conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
											checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
											progressStatus: z.ZodOptional<
												z.ZodObject<
													{
														icon: z.ZodOptional<z.ZodString>
														text: z.ZodOptional<z.ZodString>
													},
													"strip",
													z.ZodTypeAny,
													{
														text?: string | undefined
														icon?: string | undefined
													},
													{
														text?: string | undefined
														icon?: string | undefined
													}
												>
											>
											contextCondense: z.ZodOptional<
												z.ZodObject<
													{
														cost: z.ZodNumber
														prevContextTokens: z.ZodNumber
														newContextTokens: z.ZodNumber
														summary: z.ZodString
													},
													"strip",
													z.ZodTypeAny,
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													},
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													}
												>
											>
											isProtected: z.ZodOptional<z.ZodBoolean>
											apiProtocol: z.ZodOptional<
												z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
											>
											isAnswered: z.ZodOptional<z.ZodBoolean>
											metadata: z.ZodOptional<
												z.ZodObject<
													{
														kiloCode: z.ZodOptional<
															z.ZodObject<
																{
																	commitRange: z.ZodOptional<
																		z.ZodObject<
																			{
																				from: z.ZodString
																				fromTimeStamp: z.ZodOptional<z.ZodNumber>
																				to: z.ZodString
																			},
																			"strip",
																			z.ZodTypeAny,
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			},
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			}
																		>
																	>
																},
																"strip",
																z.ZodTypeAny,
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																},
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																}
															>
														>
													},
													"strip",
													z.ZodTypeAny,
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													},
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													}
												>
											>
										},
										"strip",
										z.ZodTypeAny,
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										},
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										}
									>
								>
								queuedMessages: z.ZodOptional<
									z.ZodArray<
										z.ZodObject<
											{
												timestamp: z.ZodNumber
												id: z.ZodString
												text: z.ZodString
												images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											},
											"strip",
											z.ZodTypeAny,
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											},
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											}
										>,
										"many"
									>
								>
								parentTaskId: z.ZodOptional<z.ZodString>
								childTaskId: z.ZodOptional<z.ZodString>
								tokenUsage: z.ZodOptional<
									z.ZodObject<
										{
											totalTokensIn: z.ZodNumber
											totalTokensOut: z.ZodNumber
											totalCacheWrites: z.ZodOptional<z.ZodNumber>
											totalCacheReads: z.ZodOptional<z.ZodNumber>
											totalCost: z.ZodNumber
											contextTokens: z.ZodNumber
										},
										"strip",
										z.ZodTypeAny,
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										},
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										}
									>
								>
							},
							"strip",
							z.ZodTypeAny,
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							},
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							}
						>
						taskAsk: z.ZodOptional<
							z.ZodObject<
								{
									ts: z.ZodNumber
									type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
									ask: z.ZodOptional<
										z.ZodEnum<
											[
												"followup",
												"command",
												"command_output",
												"completion_result",
												"tool",
												"api_req_failed",
												"resume_task",
												"resume_completed_task",
												"mistake_limit_reached",
												"browser_action_launch",
												"use_mcp_server",
												"auto_approval_max_req_reached",
												"payment_required_prompt",
												"invalid_model",
												"report_bug",
												"condense",
												"checkpoint_restore",
											]
										>
									>
									say: z.ZodOptional<
										z.ZodEnum<
											[
												"error",
												"api_req_started",
												"api_req_finished",
												"api_req_retried",
												"api_req_retry_delayed",
												"api_req_deleted",
												"text",
												"image",
												"reasoning",
												"completion_result",
												"user_feedback",
												"user_feedback_diff",
												"command_output",
												"shell_integration_warning",
												"browser_action",
												"browser_action_result",
												"mcp_server_request_started",
												"mcp_server_response",
												"subtask_result",
												"checkpoint_saved",
												"rooignore_error",
												"diff_error",
												"condense_context",
												"condense_context_error",
												"codebase_search_result",
												"user_edit_todos",
											]
										>
									>
									text: z.ZodOptional<z.ZodString>
									images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
									partial: z.ZodOptional<z.ZodBoolean>
									reasoning: z.ZodOptional<z.ZodString>
									conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
									checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
									progressStatus: z.ZodOptional<
										z.ZodObject<
											{
												icon: z.ZodOptional<z.ZodString>
												text: z.ZodOptional<z.ZodString>
											},
											"strip",
											z.ZodTypeAny,
											{
												text?: string | undefined
												icon?: string | undefined
											},
											{
												text?: string | undefined
												icon?: string | undefined
											}
										>
									>
									contextCondense: z.ZodOptional<
										z.ZodObject<
											{
												cost: z.ZodNumber
												prevContextTokens: z.ZodNumber
												newContextTokens: z.ZodNumber
												summary: z.ZodString
											},
											"strip",
											z.ZodTypeAny,
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											},
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											}
										>
									>
									isProtected: z.ZodOptional<z.ZodBoolean>
									apiProtocol: z.ZodOptional<
										z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
									>
									isAnswered: z.ZodOptional<z.ZodBoolean>
									metadata: z.ZodOptional<
										z.ZodObject<
											{
												kiloCode: z.ZodOptional<
													z.ZodObject<
														{
															commitRange: z.ZodOptional<
																z.ZodObject<
																	{
																		from: z.ZodString
																		fromTimeStamp: z.ZodOptional<z.ZodNumber>
																		to: z.ZodString
																	},
																	"strip",
																	z.ZodTypeAny,
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	},
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	}
																>
															>
														},
														"strip",
														z.ZodTypeAny,
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														},
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														}
													>
												>
											},
											"strip",
											z.ZodTypeAny,
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											},
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											}
										>
									>
								},
								"strip",
								z.ZodTypeAny,
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								},
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								}
							>
						>
						taskHistory: z.ZodArray<z.ZodString, "many">
						mode: z.ZodOptional<z.ZodString>
						modes: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										slug: z.ZodString
										name: z.ZodString
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										slug: string
									},
									{
										name: string
										slug: string
									}
								>,
								"many"
							>
						>
						providerProfile: z.ZodOptional<z.ZodString>
						providerProfiles: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										name: z.ZodString
										provider: z.ZodOptional<z.ZodString>
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										provider?: string | undefined
									},
									{
										name: string
										provider?: string | undefined
									}
								>,
								"many"
							>
						>
						isCloudAgent: z.ZodOptional<z.ZodBoolean>
					},
					"strip",
					z.ZodTypeAny,
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					},
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					}
				>
				mode: z.ZodString
				timestamp: z.ZodNumber
			},
			"strip",
			z.ZodTypeAny,
			{
				type: ExtensionBridgeEventName.ModeChanged
				timestamp: number
				mode: string
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			},
			{
				type: ExtensionBridgeEventName.ModeChanged
				timestamp: number
				mode: string
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			}
		>,
		z.ZodObject<
			{
				type: z.ZodLiteral<ExtensionBridgeEventName.ProviderProfileChanged>
				instance: z.ZodObject<
					{
						instanceId: z.ZodString
						userId: z.ZodString
						workspacePath: z.ZodString
						appProperties: z.ZodObject<
							{
								appName: z.ZodString
								appVersion: z.ZodString
								vscodeVersion: z.ZodString
								platform: z.ZodString
								editorName: z.ZodString
								wrapped: z.ZodBoolean
								wrapper: z.ZodNullable<z.ZodString>
								wrapperTitle: z.ZodNullable<z.ZodString>
								wrapperCode: z.ZodNullable<z.ZodString>
								wrapperVersion: z.ZodNullable<z.ZodString>
								hostname: z.ZodOptional<z.ZodString>
							},
							"strip",
							z.ZodTypeAny,
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							},
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							}
						>
						gitProperties: z.ZodOptional<
							z.ZodObject<
								{
									repositoryUrl: z.ZodOptional<z.ZodString>
									repositoryName: z.ZodOptional<z.ZodString>
									defaultBranch: z.ZodOptional<z.ZodString>
								},
								"strip",
								z.ZodTypeAny,
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								},
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								}
							>
						>
						lastHeartbeat: z.ZodNumber
						task: z.ZodObject<
							{
								task: z.ZodOptional<z.ZodString>
								images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
								taskId: z.ZodString
								taskStatus: z.ZodNativeEnum<typeof TaskStatus>
								taskAsk: z.ZodOptional<
									z.ZodObject<
										{
											ts: z.ZodNumber
											type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
											ask: z.ZodOptional<
												z.ZodEnum<
													[
														"followup",
														"command",
														"command_output",
														"completion_result",
														"tool",
														"api_req_failed",
														"resume_task",
														"resume_completed_task",
														"mistake_limit_reached",
														"browser_action_launch",
														"use_mcp_server",
														"auto_approval_max_req_reached",
														"payment_required_prompt",
														"invalid_model",
														"report_bug",
														"condense",
														"checkpoint_restore",
													]
												>
											>
											say: z.ZodOptional<
												z.ZodEnum<
													[
														"error",
														"api_req_started",
														"api_req_finished",
														"api_req_retried",
														"api_req_retry_delayed",
														"api_req_deleted",
														"text",
														"image",
														"reasoning",
														"completion_result",
														"user_feedback",
														"user_feedback_diff",
														"command_output",
														"shell_integration_warning",
														"browser_action",
														"browser_action_result",
														"mcp_server_request_started",
														"mcp_server_response",
														"subtask_result",
														"checkpoint_saved",
														"rooignore_error",
														"diff_error",
														"condense_context",
														"condense_context_error",
														"codebase_search_result",
														"user_edit_todos",
													]
												>
											>
											text: z.ZodOptional<z.ZodString>
											images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											partial: z.ZodOptional<z.ZodBoolean>
											reasoning: z.ZodOptional<z.ZodString>
											conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
											checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
											progressStatus: z.ZodOptional<
												z.ZodObject<
													{
														icon: z.ZodOptional<z.ZodString>
														text: z.ZodOptional<z.ZodString>
													},
													"strip",
													z.ZodTypeAny,
													{
														text?: string | undefined
														icon?: string | undefined
													},
													{
														text?: string | undefined
														icon?: string | undefined
													}
												>
											>
											contextCondense: z.ZodOptional<
												z.ZodObject<
													{
														cost: z.ZodNumber
														prevContextTokens: z.ZodNumber
														newContextTokens: z.ZodNumber
														summary: z.ZodString
													},
													"strip",
													z.ZodTypeAny,
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													},
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													}
												>
											>
											isProtected: z.ZodOptional<z.ZodBoolean>
											apiProtocol: z.ZodOptional<
												z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
											>
											isAnswered: z.ZodOptional<z.ZodBoolean>
											metadata: z.ZodOptional<
												z.ZodObject<
													{
														kiloCode: z.ZodOptional<
															z.ZodObject<
																{
																	commitRange: z.ZodOptional<
																		z.ZodObject<
																			{
																				from: z.ZodString
																				fromTimeStamp: z.ZodOptional<z.ZodNumber>
																				to: z.ZodString
																			},
																			"strip",
																			z.ZodTypeAny,
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			},
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			}
																		>
																	>
																},
																"strip",
																z.ZodTypeAny,
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																},
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																}
															>
														>
													},
													"strip",
													z.ZodTypeAny,
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													},
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													}
												>
											>
										},
										"strip",
										z.ZodTypeAny,
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										},
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										}
									>
								>
								queuedMessages: z.ZodOptional<
									z.ZodArray<
										z.ZodObject<
											{
												timestamp: z.ZodNumber
												id: z.ZodString
												text: z.ZodString
												images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											},
											"strip",
											z.ZodTypeAny,
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											},
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											}
										>,
										"many"
									>
								>
								parentTaskId: z.ZodOptional<z.ZodString>
								childTaskId: z.ZodOptional<z.ZodString>
								tokenUsage: z.ZodOptional<
									z.ZodObject<
										{
											totalTokensIn: z.ZodNumber
											totalTokensOut: z.ZodNumber
											totalCacheWrites: z.ZodOptional<z.ZodNumber>
											totalCacheReads: z.ZodOptional<z.ZodNumber>
											totalCost: z.ZodNumber
											contextTokens: z.ZodNumber
										},
										"strip",
										z.ZodTypeAny,
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										},
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										}
									>
								>
							},
							"strip",
							z.ZodTypeAny,
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							},
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							}
						>
						taskAsk: z.ZodOptional<
							z.ZodObject<
								{
									ts: z.ZodNumber
									type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
									ask: z.ZodOptional<
										z.ZodEnum<
											[
												"followup",
												"command",
												"command_output",
												"completion_result",
												"tool",
												"api_req_failed",
												"resume_task",
												"resume_completed_task",
												"mistake_limit_reached",
												"browser_action_launch",
												"use_mcp_server",
												"auto_approval_max_req_reached",
												"payment_required_prompt",
												"invalid_model",
												"report_bug",
												"condense",
												"checkpoint_restore",
											]
										>
									>
									say: z.ZodOptional<
										z.ZodEnum<
											[
												"error",
												"api_req_started",
												"api_req_finished",
												"api_req_retried",
												"api_req_retry_delayed",
												"api_req_deleted",
												"text",
												"image",
												"reasoning",
												"completion_result",
												"user_feedback",
												"user_feedback_diff",
												"command_output",
												"shell_integration_warning",
												"browser_action",
												"browser_action_result",
												"mcp_server_request_started",
												"mcp_server_response",
												"subtask_result",
												"checkpoint_saved",
												"rooignore_error",
												"diff_error",
												"condense_context",
												"condense_context_error",
												"codebase_search_result",
												"user_edit_todos",
											]
										>
									>
									text: z.ZodOptional<z.ZodString>
									images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
									partial: z.ZodOptional<z.ZodBoolean>
									reasoning: z.ZodOptional<z.ZodString>
									conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
									checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
									progressStatus: z.ZodOptional<
										z.ZodObject<
											{
												icon: z.ZodOptional<z.ZodString>
												text: z.ZodOptional<z.ZodString>
											},
											"strip",
											z.ZodTypeAny,
											{
												text?: string | undefined
												icon?: string | undefined
											},
											{
												text?: string | undefined
												icon?: string | undefined
											}
										>
									>
									contextCondense: z.ZodOptional<
										z.ZodObject<
											{
												cost: z.ZodNumber
												prevContextTokens: z.ZodNumber
												newContextTokens: z.ZodNumber
												summary: z.ZodString
											},
											"strip",
											z.ZodTypeAny,
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											},
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											}
										>
									>
									isProtected: z.ZodOptional<z.ZodBoolean>
									apiProtocol: z.ZodOptional<
										z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
									>
									isAnswered: z.ZodOptional<z.ZodBoolean>
									metadata: z.ZodOptional<
										z.ZodObject<
											{
												kiloCode: z.ZodOptional<
													z.ZodObject<
														{
															commitRange: z.ZodOptional<
																z.ZodObject<
																	{
																		from: z.ZodString
																		fromTimeStamp: z.ZodOptional<z.ZodNumber>
																		to: z.ZodString
																	},
																	"strip",
																	z.ZodTypeAny,
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	},
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	}
																>
															>
														},
														"strip",
														z.ZodTypeAny,
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														},
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														}
													>
												>
											},
											"strip",
											z.ZodTypeAny,
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											},
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											}
										>
									>
								},
								"strip",
								z.ZodTypeAny,
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								},
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								}
							>
						>
						taskHistory: z.ZodArray<z.ZodString, "many">
						mode: z.ZodOptional<z.ZodString>
						modes: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										slug: z.ZodString
										name: z.ZodString
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										slug: string
									},
									{
										name: string
										slug: string
									}
								>,
								"many"
							>
						>
						providerProfile: z.ZodOptional<z.ZodString>
						providerProfiles: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										name: z.ZodString
										provider: z.ZodOptional<z.ZodString>
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										provider?: string | undefined
									},
									{
										name: string
										provider?: string | undefined
									}
								>,
								"many"
							>
						>
						isCloudAgent: z.ZodOptional<z.ZodBoolean>
					},
					"strip",
					z.ZodTypeAny,
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					},
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					}
				>
				providerProfile: z.ZodObject<
					{
						name: z.ZodString
						provider: z.ZodOptional<z.ZodString>
					},
					"strip",
					z.ZodTypeAny,
					{
						name: string
						provider?: string | undefined
					},
					{
						name: string
						provider?: string | undefined
					}
				>
				timestamp: z.ZodNumber
			},
			"strip",
			z.ZodTypeAny,
			{
				type: ExtensionBridgeEventName.ProviderProfileChanged
				timestamp: number
				providerProfile: {
					name: string
					provider?: string | undefined
				}
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			},
			{
				type: ExtensionBridgeEventName.ProviderProfileChanged
				timestamp: number
				providerProfile: {
					name: string
					provider?: string | undefined
				}
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			}
		>,
		z.ZodObject<
			{
				type: z.ZodLiteral<ExtensionBridgeEventName.InstanceRegistered>
				instance: z.ZodObject<
					{
						instanceId: z.ZodString
						userId: z.ZodString
						workspacePath: z.ZodString
						appProperties: z.ZodObject<
							{
								appName: z.ZodString
								appVersion: z.ZodString
								vscodeVersion: z.ZodString
								platform: z.ZodString
								editorName: z.ZodString
								wrapped: z.ZodBoolean
								wrapper: z.ZodNullable<z.ZodString>
								wrapperTitle: z.ZodNullable<z.ZodString>
								wrapperCode: z.ZodNullable<z.ZodString>
								wrapperVersion: z.ZodNullable<z.ZodString>
								hostname: z.ZodOptional<z.ZodString>
							},
							"strip",
							z.ZodTypeAny,
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							},
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							}
						>
						gitProperties: z.ZodOptional<
							z.ZodObject<
								{
									repositoryUrl: z.ZodOptional<z.ZodString>
									repositoryName: z.ZodOptional<z.ZodString>
									defaultBranch: z.ZodOptional<z.ZodString>
								},
								"strip",
								z.ZodTypeAny,
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								},
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								}
							>
						>
						lastHeartbeat: z.ZodNumber
						task: z.ZodObject<
							{
								task: z.ZodOptional<z.ZodString>
								images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
								taskId: z.ZodString
								taskStatus: z.ZodNativeEnum<typeof TaskStatus>
								taskAsk: z.ZodOptional<
									z.ZodObject<
										{
											ts: z.ZodNumber
											type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
											ask: z.ZodOptional<
												z.ZodEnum<
													[
														"followup",
														"command",
														"command_output",
														"completion_result",
														"tool",
														"api_req_failed",
														"resume_task",
														"resume_completed_task",
														"mistake_limit_reached",
														"browser_action_launch",
														"use_mcp_server",
														"auto_approval_max_req_reached",
														"payment_required_prompt",
														"invalid_model",
														"report_bug",
														"condense",
														"checkpoint_restore",
													]
												>
											>
											say: z.ZodOptional<
												z.ZodEnum<
													[
														"error",
														"api_req_started",
														"api_req_finished",
														"api_req_retried",
														"api_req_retry_delayed",
														"api_req_deleted",
														"text",
														"image",
														"reasoning",
														"completion_result",
														"user_feedback",
														"user_feedback_diff",
														"command_output",
														"shell_integration_warning",
														"browser_action",
														"browser_action_result",
														"mcp_server_request_started",
														"mcp_server_response",
														"subtask_result",
														"checkpoint_saved",
														"rooignore_error",
														"diff_error",
														"condense_context",
														"condense_context_error",
														"codebase_search_result",
														"user_edit_todos",
													]
												>
											>
											text: z.ZodOptional<z.ZodString>
											images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											partial: z.ZodOptional<z.ZodBoolean>
											reasoning: z.ZodOptional<z.ZodString>
											conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
											checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
											progressStatus: z.ZodOptional<
												z.ZodObject<
													{
														icon: z.ZodOptional<z.ZodString>
														text: z.ZodOptional<z.ZodString>
													},
													"strip",
													z.ZodTypeAny,
													{
														text?: string | undefined
														icon?: string | undefined
													},
													{
														text?: string | undefined
														icon?: string | undefined
													}
												>
											>
											contextCondense: z.ZodOptional<
												z.ZodObject<
													{
														cost: z.ZodNumber
														prevContextTokens: z.ZodNumber
														newContextTokens: z.ZodNumber
														summary: z.ZodString
													},
													"strip",
													z.ZodTypeAny,
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													},
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													}
												>
											>
											isProtected: z.ZodOptional<z.ZodBoolean>
											apiProtocol: z.ZodOptional<
												z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
											>
											isAnswered: z.ZodOptional<z.ZodBoolean>
											metadata: z.ZodOptional<
												z.ZodObject<
													{
														kiloCode: z.ZodOptional<
															z.ZodObject<
																{
																	commitRange: z.ZodOptional<
																		z.ZodObject<
																			{
																				from: z.ZodString
																				fromTimeStamp: z.ZodOptional<z.ZodNumber>
																				to: z.ZodString
																			},
																			"strip",
																			z.ZodTypeAny,
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			},
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			}
																		>
																	>
																},
																"strip",
																z.ZodTypeAny,
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																},
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																}
															>
														>
													},
													"strip",
													z.ZodTypeAny,
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													},
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													}
												>
											>
										},
										"strip",
										z.ZodTypeAny,
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										},
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										}
									>
								>
								queuedMessages: z.ZodOptional<
									z.ZodArray<
										z.ZodObject<
											{
												timestamp: z.ZodNumber
												id: z.ZodString
												text: z.ZodString
												images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											},
											"strip",
											z.ZodTypeAny,
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											},
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											}
										>,
										"many"
									>
								>
								parentTaskId: z.ZodOptional<z.ZodString>
								childTaskId: z.ZodOptional<z.ZodString>
								tokenUsage: z.ZodOptional<
									z.ZodObject<
										{
											totalTokensIn: z.ZodNumber
											totalTokensOut: z.ZodNumber
											totalCacheWrites: z.ZodOptional<z.ZodNumber>
											totalCacheReads: z.ZodOptional<z.ZodNumber>
											totalCost: z.ZodNumber
											contextTokens: z.ZodNumber
										},
										"strip",
										z.ZodTypeAny,
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										},
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										}
									>
								>
							},
							"strip",
							z.ZodTypeAny,
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							},
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							}
						>
						taskAsk: z.ZodOptional<
							z.ZodObject<
								{
									ts: z.ZodNumber
									type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
									ask: z.ZodOptional<
										z.ZodEnum<
											[
												"followup",
												"command",
												"command_output",
												"completion_result",
												"tool",
												"api_req_failed",
												"resume_task",
												"resume_completed_task",
												"mistake_limit_reached",
												"browser_action_launch",
												"use_mcp_server",
												"auto_approval_max_req_reached",
												"payment_required_prompt",
												"invalid_model",
												"report_bug",
												"condense",
												"checkpoint_restore",
											]
										>
									>
									say: z.ZodOptional<
										z.ZodEnum<
											[
												"error",
												"api_req_started",
												"api_req_finished",
												"api_req_retried",
												"api_req_retry_delayed",
												"api_req_deleted",
												"text",
												"image",
												"reasoning",
												"completion_result",
												"user_feedback",
												"user_feedback_diff",
												"command_output",
												"shell_integration_warning",
												"browser_action",
												"browser_action_result",
												"mcp_server_request_started",
												"mcp_server_response",
												"subtask_result",
												"checkpoint_saved",
												"rooignore_error",
												"diff_error",
												"condense_context",
												"condense_context_error",
												"codebase_search_result",
												"user_edit_todos",
											]
										>
									>
									text: z.ZodOptional<z.ZodString>
									images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
									partial: z.ZodOptional<z.ZodBoolean>
									reasoning: z.ZodOptional<z.ZodString>
									conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
									checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
									progressStatus: z.ZodOptional<
										z.ZodObject<
											{
												icon: z.ZodOptional<z.ZodString>
												text: z.ZodOptional<z.ZodString>
											},
											"strip",
											z.ZodTypeAny,
											{
												text?: string | undefined
												icon?: string | undefined
											},
											{
												text?: string | undefined
												icon?: string | undefined
											}
										>
									>
									contextCondense: z.ZodOptional<
										z.ZodObject<
											{
												cost: z.ZodNumber
												prevContextTokens: z.ZodNumber
												newContextTokens: z.ZodNumber
												summary: z.ZodString
											},
											"strip",
											z.ZodTypeAny,
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											},
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											}
										>
									>
									isProtected: z.ZodOptional<z.ZodBoolean>
									apiProtocol: z.ZodOptional<
										z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
									>
									isAnswered: z.ZodOptional<z.ZodBoolean>
									metadata: z.ZodOptional<
										z.ZodObject<
											{
												kiloCode: z.ZodOptional<
													z.ZodObject<
														{
															commitRange: z.ZodOptional<
																z.ZodObject<
																	{
																		from: z.ZodString
																		fromTimeStamp: z.ZodOptional<z.ZodNumber>
																		to: z.ZodString
																	},
																	"strip",
																	z.ZodTypeAny,
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	},
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	}
																>
															>
														},
														"strip",
														z.ZodTypeAny,
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														},
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														}
													>
												>
											},
											"strip",
											z.ZodTypeAny,
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											},
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											}
										>
									>
								},
								"strip",
								z.ZodTypeAny,
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								},
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								}
							>
						>
						taskHistory: z.ZodArray<z.ZodString, "many">
						mode: z.ZodOptional<z.ZodString>
						modes: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										slug: z.ZodString
										name: z.ZodString
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										slug: string
									},
									{
										name: string
										slug: string
									}
								>,
								"many"
							>
						>
						providerProfile: z.ZodOptional<z.ZodString>
						providerProfiles: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										name: z.ZodString
										provider: z.ZodOptional<z.ZodString>
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										provider?: string | undefined
									},
									{
										name: string
										provider?: string | undefined
									}
								>,
								"many"
							>
						>
						isCloudAgent: z.ZodOptional<z.ZodBoolean>
					},
					"strip",
					z.ZodTypeAny,
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					},
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					}
				>
				timestamp: z.ZodNumber
			},
			"strip",
			z.ZodTypeAny,
			{
				type: ExtensionBridgeEventName.InstanceRegistered
				timestamp: number
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			},
			{
				type: ExtensionBridgeEventName.InstanceRegistered
				timestamp: number
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			}
		>,
		z.ZodObject<
			{
				type: z.ZodLiteral<ExtensionBridgeEventName.InstanceUnregistered>
				instance: z.ZodObject<
					{
						instanceId: z.ZodString
						userId: z.ZodString
						workspacePath: z.ZodString
						appProperties: z.ZodObject<
							{
								appName: z.ZodString
								appVersion: z.ZodString
								vscodeVersion: z.ZodString
								platform: z.ZodString
								editorName: z.ZodString
								wrapped: z.ZodBoolean
								wrapper: z.ZodNullable<z.ZodString>
								wrapperTitle: z.ZodNullable<z.ZodString>
								wrapperCode: z.ZodNullable<z.ZodString>
								wrapperVersion: z.ZodNullable<z.ZodString>
								hostname: z.ZodOptional<z.ZodString>
							},
							"strip",
							z.ZodTypeAny,
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							},
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							}
						>
						gitProperties: z.ZodOptional<
							z.ZodObject<
								{
									repositoryUrl: z.ZodOptional<z.ZodString>
									repositoryName: z.ZodOptional<z.ZodString>
									defaultBranch: z.ZodOptional<z.ZodString>
								},
								"strip",
								z.ZodTypeAny,
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								},
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								}
							>
						>
						lastHeartbeat: z.ZodNumber
						task: z.ZodObject<
							{
								task: z.ZodOptional<z.ZodString>
								images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
								taskId: z.ZodString
								taskStatus: z.ZodNativeEnum<typeof TaskStatus>
								taskAsk: z.ZodOptional<
									z.ZodObject<
										{
											ts: z.ZodNumber
											type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
											ask: z.ZodOptional<
												z.ZodEnum<
													[
														"followup",
														"command",
														"command_output",
														"completion_result",
														"tool",
														"api_req_failed",
														"resume_task",
														"resume_completed_task",
														"mistake_limit_reached",
														"browser_action_launch",
														"use_mcp_server",
														"auto_approval_max_req_reached",
														"payment_required_prompt",
														"invalid_model",
														"report_bug",
														"condense",
														"checkpoint_restore",
													]
												>
											>
											say: z.ZodOptional<
												z.ZodEnum<
													[
														"error",
														"api_req_started",
														"api_req_finished",
														"api_req_retried",
														"api_req_retry_delayed",
														"api_req_deleted",
														"text",
														"image",
														"reasoning",
														"completion_result",
														"user_feedback",
														"user_feedback_diff",
														"command_output",
														"shell_integration_warning",
														"browser_action",
														"browser_action_result",
														"mcp_server_request_started",
														"mcp_server_response",
														"subtask_result",
														"checkpoint_saved",
														"rooignore_error",
														"diff_error",
														"condense_context",
														"condense_context_error",
														"codebase_search_result",
														"user_edit_todos",
													]
												>
											>
											text: z.ZodOptional<z.ZodString>
											images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											partial: z.ZodOptional<z.ZodBoolean>
											reasoning: z.ZodOptional<z.ZodString>
											conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
											checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
											progressStatus: z.ZodOptional<
												z.ZodObject<
													{
														icon: z.ZodOptional<z.ZodString>
														text: z.ZodOptional<z.ZodString>
													},
													"strip",
													z.ZodTypeAny,
													{
														text?: string | undefined
														icon?: string | undefined
													},
													{
														text?: string | undefined
														icon?: string | undefined
													}
												>
											>
											contextCondense: z.ZodOptional<
												z.ZodObject<
													{
														cost: z.ZodNumber
														prevContextTokens: z.ZodNumber
														newContextTokens: z.ZodNumber
														summary: z.ZodString
													},
													"strip",
													z.ZodTypeAny,
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													},
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													}
												>
											>
											isProtected: z.ZodOptional<z.ZodBoolean>
											apiProtocol: z.ZodOptional<
												z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
											>
											isAnswered: z.ZodOptional<z.ZodBoolean>
											metadata: z.ZodOptional<
												z.ZodObject<
													{
														kiloCode: z.ZodOptional<
															z.ZodObject<
																{
																	commitRange: z.ZodOptional<
																		z.ZodObject<
																			{
																				from: z.ZodString
																				fromTimeStamp: z.ZodOptional<z.ZodNumber>
																				to: z.ZodString
																			},
																			"strip",
																			z.ZodTypeAny,
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			},
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			}
																		>
																	>
																},
																"strip",
																z.ZodTypeAny,
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																},
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																}
															>
														>
													},
													"strip",
													z.ZodTypeAny,
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													},
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													}
												>
											>
										},
										"strip",
										z.ZodTypeAny,
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										},
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										}
									>
								>
								queuedMessages: z.ZodOptional<
									z.ZodArray<
										z.ZodObject<
											{
												timestamp: z.ZodNumber
												id: z.ZodString
												text: z.ZodString
												images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											},
											"strip",
											z.ZodTypeAny,
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											},
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											}
										>,
										"many"
									>
								>
								parentTaskId: z.ZodOptional<z.ZodString>
								childTaskId: z.ZodOptional<z.ZodString>
								tokenUsage: z.ZodOptional<
									z.ZodObject<
										{
											totalTokensIn: z.ZodNumber
											totalTokensOut: z.ZodNumber
											totalCacheWrites: z.ZodOptional<z.ZodNumber>
											totalCacheReads: z.ZodOptional<z.ZodNumber>
											totalCost: z.ZodNumber
											contextTokens: z.ZodNumber
										},
										"strip",
										z.ZodTypeAny,
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										},
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										}
									>
								>
							},
							"strip",
							z.ZodTypeAny,
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							},
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							}
						>
						taskAsk: z.ZodOptional<
							z.ZodObject<
								{
									ts: z.ZodNumber
									type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
									ask: z.ZodOptional<
										z.ZodEnum<
											[
												"followup",
												"command",
												"command_output",
												"completion_result",
												"tool",
												"api_req_failed",
												"resume_task",
												"resume_completed_task",
												"mistake_limit_reached",
												"browser_action_launch",
												"use_mcp_server",
												"auto_approval_max_req_reached",
												"payment_required_prompt",
												"invalid_model",
												"report_bug",
												"condense",
												"checkpoint_restore",
											]
										>
									>
									say: z.ZodOptional<
										z.ZodEnum<
											[
												"error",
												"api_req_started",
												"api_req_finished",
												"api_req_retried",
												"api_req_retry_delayed",
												"api_req_deleted",
												"text",
												"image",
												"reasoning",
												"completion_result",
												"user_feedback",
												"user_feedback_diff",
												"command_output",
												"shell_integration_warning",
												"browser_action",
												"browser_action_result",
												"mcp_server_request_started",
												"mcp_server_response",
												"subtask_result",
												"checkpoint_saved",
												"rooignore_error",
												"diff_error",
												"condense_context",
												"condense_context_error",
												"codebase_search_result",
												"user_edit_todos",
											]
										>
									>
									text: z.ZodOptional<z.ZodString>
									images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
									partial: z.ZodOptional<z.ZodBoolean>
									reasoning: z.ZodOptional<z.ZodString>
									conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
									checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
									progressStatus: z.ZodOptional<
										z.ZodObject<
											{
												icon: z.ZodOptional<z.ZodString>
												text: z.ZodOptional<z.ZodString>
											},
											"strip",
											z.ZodTypeAny,
											{
												text?: string | undefined
												icon?: string | undefined
											},
											{
												text?: string | undefined
												icon?: string | undefined
											}
										>
									>
									contextCondense: z.ZodOptional<
										z.ZodObject<
											{
												cost: z.ZodNumber
												prevContextTokens: z.ZodNumber
												newContextTokens: z.ZodNumber
												summary: z.ZodString
											},
											"strip",
											z.ZodTypeAny,
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											},
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											}
										>
									>
									isProtected: z.ZodOptional<z.ZodBoolean>
									apiProtocol: z.ZodOptional<
										z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
									>
									isAnswered: z.ZodOptional<z.ZodBoolean>
									metadata: z.ZodOptional<
										z.ZodObject<
											{
												kiloCode: z.ZodOptional<
													z.ZodObject<
														{
															commitRange: z.ZodOptional<
																z.ZodObject<
																	{
																		from: z.ZodString
																		fromTimeStamp: z.ZodOptional<z.ZodNumber>
																		to: z.ZodString
																	},
																	"strip",
																	z.ZodTypeAny,
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	},
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	}
																>
															>
														},
														"strip",
														z.ZodTypeAny,
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														},
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														}
													>
												>
											},
											"strip",
											z.ZodTypeAny,
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											},
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											}
										>
									>
								},
								"strip",
								z.ZodTypeAny,
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								},
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								}
							>
						>
						taskHistory: z.ZodArray<z.ZodString, "many">
						mode: z.ZodOptional<z.ZodString>
						modes: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										slug: z.ZodString
										name: z.ZodString
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										slug: string
									},
									{
										name: string
										slug: string
									}
								>,
								"many"
							>
						>
						providerProfile: z.ZodOptional<z.ZodString>
						providerProfiles: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										name: z.ZodString
										provider: z.ZodOptional<z.ZodString>
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										provider?: string | undefined
									},
									{
										name: string
										provider?: string | undefined
									}
								>,
								"many"
							>
						>
						isCloudAgent: z.ZodOptional<z.ZodBoolean>
					},
					"strip",
					z.ZodTypeAny,
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					},
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					}
				>
				timestamp: z.ZodNumber
			},
			"strip",
			z.ZodTypeAny,
			{
				type: ExtensionBridgeEventName.InstanceUnregistered
				timestamp: number
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			},
			{
				type: ExtensionBridgeEventName.InstanceUnregistered
				timestamp: number
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			}
		>,
		z.ZodObject<
			{
				type: z.ZodLiteral<ExtensionBridgeEventName.HeartbeatUpdated>
				instance: z.ZodObject<
					{
						instanceId: z.ZodString
						userId: z.ZodString
						workspacePath: z.ZodString
						appProperties: z.ZodObject<
							{
								appName: z.ZodString
								appVersion: z.ZodString
								vscodeVersion: z.ZodString
								platform: z.ZodString
								editorName: z.ZodString
								wrapped: z.ZodBoolean
								wrapper: z.ZodNullable<z.ZodString>
								wrapperTitle: z.ZodNullable<z.ZodString>
								wrapperCode: z.ZodNullable<z.ZodString>
								wrapperVersion: z.ZodNullable<z.ZodString>
								hostname: z.ZodOptional<z.ZodString>
							},
							"strip",
							z.ZodTypeAny,
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							},
							{
								appName: string
								appVersion: string
								vscodeVersion: string
								platform: string
								editorName: string
								wrapped: boolean
								wrapper: string | null
								wrapperTitle: string | null
								wrapperCode: string | null
								wrapperVersion: string | null
								hostname?: string | undefined
							}
						>
						gitProperties: z.ZodOptional<
							z.ZodObject<
								{
									repositoryUrl: z.ZodOptional<z.ZodString>
									repositoryName: z.ZodOptional<z.ZodString>
									defaultBranch: z.ZodOptional<z.ZodString>
								},
								"strip",
								z.ZodTypeAny,
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								},
								{
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
								}
							>
						>
						lastHeartbeat: z.ZodNumber
						task: z.ZodObject<
							{
								task: z.ZodOptional<z.ZodString>
								images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
								taskId: z.ZodString
								taskStatus: z.ZodNativeEnum<typeof TaskStatus>
								taskAsk: z.ZodOptional<
									z.ZodObject<
										{
											ts: z.ZodNumber
											type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
											ask: z.ZodOptional<
												z.ZodEnum<
													[
														"followup",
														"command",
														"command_output",
														"completion_result",
														"tool",
														"api_req_failed",
														"resume_task",
														"resume_completed_task",
														"mistake_limit_reached",
														"browser_action_launch",
														"use_mcp_server",
														"auto_approval_max_req_reached",
														"payment_required_prompt",
														"invalid_model",
														"report_bug",
														"condense",
														"checkpoint_restore",
													]
												>
											>
											say: z.ZodOptional<
												z.ZodEnum<
													[
														"error",
														"api_req_started",
														"api_req_finished",
														"api_req_retried",
														"api_req_retry_delayed",
														"api_req_deleted",
														"text",
														"image",
														"reasoning",
														"completion_result",
														"user_feedback",
														"user_feedback_diff",
														"command_output",
														"shell_integration_warning",
														"browser_action",
														"browser_action_result",
														"mcp_server_request_started",
														"mcp_server_response",
														"subtask_result",
														"checkpoint_saved",
														"rooignore_error",
														"diff_error",
														"condense_context",
														"condense_context_error",
														"codebase_search_result",
														"user_edit_todos",
													]
												>
											>
											text: z.ZodOptional<z.ZodString>
											images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											partial: z.ZodOptional<z.ZodBoolean>
											reasoning: z.ZodOptional<z.ZodString>
											conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
											checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
											progressStatus: z.ZodOptional<
												z.ZodObject<
													{
														icon: z.ZodOptional<z.ZodString>
														text: z.ZodOptional<z.ZodString>
													},
													"strip",
													z.ZodTypeAny,
													{
														text?: string | undefined
														icon?: string | undefined
													},
													{
														text?: string | undefined
														icon?: string | undefined
													}
												>
											>
											contextCondense: z.ZodOptional<
												z.ZodObject<
													{
														cost: z.ZodNumber
														prevContextTokens: z.ZodNumber
														newContextTokens: z.ZodNumber
														summary: z.ZodString
													},
													"strip",
													z.ZodTypeAny,
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													},
													{
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
													}
												>
											>
											isProtected: z.ZodOptional<z.ZodBoolean>
											apiProtocol: z.ZodOptional<
												z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
											>
											isAnswered: z.ZodOptional<z.ZodBoolean>
											metadata: z.ZodOptional<
												z.ZodObject<
													{
														kiloCode: z.ZodOptional<
															z.ZodObject<
																{
																	commitRange: z.ZodOptional<
																		z.ZodObject<
																			{
																				from: z.ZodString
																				fromTimeStamp: z.ZodOptional<z.ZodNumber>
																				to: z.ZodString
																			},
																			"strip",
																			z.ZodTypeAny,
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			},
																			{
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																			}
																		>
																	>
																},
																"strip",
																z.ZodTypeAny,
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																},
																{
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
																}
															>
														>
													},
													"strip",
													z.ZodTypeAny,
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													},
													{
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
													}
												>
											>
										},
										"strip",
										z.ZodTypeAny,
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										},
										{
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
										}
									>
								>
								queuedMessages: z.ZodOptional<
									z.ZodArray<
										z.ZodObject<
											{
												timestamp: z.ZodNumber
												id: z.ZodString
												text: z.ZodString
												images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
											},
											"strip",
											z.ZodTypeAny,
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											},
											{
												text: string
												timestamp: number
												id: string
												images?: string[] | undefined
											}
										>,
										"many"
									>
								>
								parentTaskId: z.ZodOptional<z.ZodString>
								childTaskId: z.ZodOptional<z.ZodString>
								tokenUsage: z.ZodOptional<
									z.ZodObject<
										{
											totalTokensIn: z.ZodNumber
											totalTokensOut: z.ZodNumber
											totalCacheWrites: z.ZodOptional<z.ZodNumber>
											totalCacheReads: z.ZodOptional<z.ZodNumber>
											totalCost: z.ZodNumber
											contextTokens: z.ZodNumber
										},
										"strip",
										z.ZodTypeAny,
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										},
										{
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
										}
									>
								>
							},
							"strip",
							z.ZodTypeAny,
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							},
							{
								taskId: string
								taskStatus: TaskStatus
								images?: string[] | undefined
								parentTaskId?: string | undefined
								task?: string | undefined
								taskAsk?:
									| {
											type: "ask" | "say"
											ts: number
											text?: string | undefined
											reasoning?: string | undefined
											ask?:
												| "followup"
												| "command"
												| "command_output"
												| "completion_result"
												| "tool"
												| "api_req_failed"
												| "resume_task"
												| "resume_completed_task"
												| "mistake_limit_reached"
												| "browser_action_launch"
												| "use_mcp_server"
												| "auto_approval_max_req_reached"
												| "payment_required_prompt"
												| "invalid_model"
												| "report_bug"
												| "condense"
												| "checkpoint_restore"
												| undefined
											say?:
												| "command_output"
												| "completion_result"
												| "error"
												| "api_req_started"
												| "api_req_finished"
												| "api_req_retried"
												| "api_req_retry_delayed"
												| "api_req_deleted"
												| "text"
												| "image"
												| "reasoning"
												| "user_feedback"
												| "user_feedback_diff"
												| "shell_integration_warning"
												| "browser_action"
												| "browser_action_result"
												| "mcp_server_request_started"
												| "mcp_server_response"
												| "subtask_result"
												| "checkpoint_saved"
												| "rooignore_error"
												| "diff_error"
												| "condense_context"
												| "condense_context_error"
												| "codebase_search_result"
												| "user_edit_todos"
												| undefined
											images?: string[] | undefined
											partial?: boolean | undefined
											conversationHistoryIndex?: number | undefined
											checkpoint?: Record<string, unknown> | undefined
											progressStatus?:
												| {
														text?: string | undefined
														icon?: string | undefined
												  }
												| undefined
											contextCondense?:
												| {
														cost: number
														prevContextTokens: number
														newContextTokens: number
														summary: string
												  }
												| undefined
											isProtected?: boolean | undefined
											apiProtocol?: "openai" | "anthropic" | undefined
											isAnswered?: boolean | undefined
											metadata?:
												| {
														kiloCode?:
															| {
																	commitRange?:
																		| {
																				from: string
																				to: string
																				fromTimeStamp?: number | undefined
																		  }
																		| undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
								queuedMessages?:
									| {
											text: string
											timestamp: number
											id: string
											images?: string[] | undefined
									  }[]
									| undefined
								childTaskId?: string | undefined
								tokenUsage?:
									| {
											totalTokensIn: number
											totalTokensOut: number
											totalCost: number
											contextTokens: number
											totalCacheWrites?: number | undefined
											totalCacheReads?: number | undefined
									  }
									| undefined
							}
						>
						taskAsk: z.ZodOptional<
							z.ZodObject<
								{
									ts: z.ZodNumber
									type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
									ask: z.ZodOptional<
										z.ZodEnum<
											[
												"followup",
												"command",
												"command_output",
												"completion_result",
												"tool",
												"api_req_failed",
												"resume_task",
												"resume_completed_task",
												"mistake_limit_reached",
												"browser_action_launch",
												"use_mcp_server",
												"auto_approval_max_req_reached",
												"payment_required_prompt",
												"invalid_model",
												"report_bug",
												"condense",
												"checkpoint_restore",
											]
										>
									>
									say: z.ZodOptional<
										z.ZodEnum<
											[
												"error",
												"api_req_started",
												"api_req_finished",
												"api_req_retried",
												"api_req_retry_delayed",
												"api_req_deleted",
												"text",
												"image",
												"reasoning",
												"completion_result",
												"user_feedback",
												"user_feedback_diff",
												"command_output",
												"shell_integration_warning",
												"browser_action",
												"browser_action_result",
												"mcp_server_request_started",
												"mcp_server_response",
												"subtask_result",
												"checkpoint_saved",
												"rooignore_error",
												"diff_error",
												"condense_context",
												"condense_context_error",
												"codebase_search_result",
												"user_edit_todos",
											]
										>
									>
									text: z.ZodOptional<z.ZodString>
									images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
									partial: z.ZodOptional<z.ZodBoolean>
									reasoning: z.ZodOptional<z.ZodString>
									conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
									checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
									progressStatus: z.ZodOptional<
										z.ZodObject<
											{
												icon: z.ZodOptional<z.ZodString>
												text: z.ZodOptional<z.ZodString>
											},
											"strip",
											z.ZodTypeAny,
											{
												text?: string | undefined
												icon?: string | undefined
											},
											{
												text?: string | undefined
												icon?: string | undefined
											}
										>
									>
									contextCondense: z.ZodOptional<
										z.ZodObject<
											{
												cost: z.ZodNumber
												prevContextTokens: z.ZodNumber
												newContextTokens: z.ZodNumber
												summary: z.ZodString
											},
											"strip",
											z.ZodTypeAny,
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											},
											{
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
											}
										>
									>
									isProtected: z.ZodOptional<z.ZodBoolean>
									apiProtocol: z.ZodOptional<
										z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>
									>
									isAnswered: z.ZodOptional<z.ZodBoolean>
									metadata: z.ZodOptional<
										z.ZodObject<
											{
												kiloCode: z.ZodOptional<
													z.ZodObject<
														{
															commitRange: z.ZodOptional<
																z.ZodObject<
																	{
																		from: z.ZodString
																		fromTimeStamp: z.ZodOptional<z.ZodNumber>
																		to: z.ZodString
																	},
																	"strip",
																	z.ZodTypeAny,
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	},
																	{
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																	}
																>
															>
														},
														"strip",
														z.ZodTypeAny,
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														},
														{
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
														}
													>
												>
											},
											"strip",
											z.ZodTypeAny,
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											},
											{
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
											}
										>
									>
								},
								"strip",
								z.ZodTypeAny,
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								},
								{
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
								}
							>
						>
						taskHistory: z.ZodArray<z.ZodString, "many">
						mode: z.ZodOptional<z.ZodString>
						modes: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										slug: z.ZodString
										name: z.ZodString
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										slug: string
									},
									{
										name: string
										slug: string
									}
								>,
								"many"
							>
						>
						providerProfile: z.ZodOptional<z.ZodString>
						providerProfiles: z.ZodOptional<
							z.ZodArray<
								z.ZodObject<
									{
										name: z.ZodString
										provider: z.ZodOptional<z.ZodString>
									},
									"strip",
									z.ZodTypeAny,
									{
										name: string
										provider?: string | undefined
									},
									{
										name: string
										provider?: string | undefined
									}
								>,
								"many"
							>
						>
						isCloudAgent: z.ZodOptional<z.ZodBoolean>
					},
					"strip",
					z.ZodTypeAny,
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					},
					{
						task: {
							taskId: string
							taskStatus: TaskStatus
							images?: string[] | undefined
							parentTaskId?: string | undefined
							task?: string | undefined
							taskAsk?:
								| {
										type: "ask" | "say"
										ts: number
										text?: string | undefined
										reasoning?: string | undefined
										ask?:
											| "followup"
											| "command"
											| "command_output"
											| "completion_result"
											| "tool"
											| "api_req_failed"
											| "resume_task"
											| "resume_completed_task"
											| "mistake_limit_reached"
											| "browser_action_launch"
											| "use_mcp_server"
											| "auto_approval_max_req_reached"
											| "payment_required_prompt"
											| "invalid_model"
											| "report_bug"
											| "condense"
											| "checkpoint_restore"
											| undefined
										say?:
											| "command_output"
											| "completion_result"
											| "error"
											| "api_req_started"
											| "api_req_finished"
											| "api_req_retried"
											| "api_req_retry_delayed"
											| "api_req_deleted"
											| "text"
											| "image"
											| "reasoning"
											| "user_feedback"
											| "user_feedback_diff"
											| "shell_integration_warning"
											| "browser_action"
											| "browser_action_result"
											| "mcp_server_request_started"
											| "mcp_server_response"
											| "subtask_result"
											| "checkpoint_saved"
											| "rooignore_error"
											| "diff_error"
											| "condense_context"
											| "condense_context_error"
											| "codebase_search_result"
											| "user_edit_todos"
											| undefined
										images?: string[] | undefined
										partial?: boolean | undefined
										conversationHistoryIndex?: number | undefined
										checkpoint?: Record<string, unknown> | undefined
										progressStatus?:
											| {
													text?: string | undefined
													icon?: string | undefined
											  }
											| undefined
										contextCondense?:
											| {
													cost: number
													prevContextTokens: number
													newContextTokens: number
													summary: string
											  }
											| undefined
										isProtected?: boolean | undefined
										apiProtocol?: "openai" | "anthropic" | undefined
										isAnswered?: boolean | undefined
										metadata?:
											| {
													kiloCode?:
														| {
																commitRange?:
																	| {
																			from: string
																			to: string
																			fromTimeStamp?: number | undefined
																	  }
																	| undefined
														  }
														| undefined
											  }
											| undefined
								  }
								| undefined
							queuedMessages?:
								| {
										text: string
										timestamp: number
										id: string
										images?: string[] | undefined
								  }[]
								| undefined
							childTaskId?: string | undefined
							tokenUsage?:
								| {
										totalTokensIn: number
										totalTokensOut: number
										totalCost: number
										contextTokens: number
										totalCacheWrites?: number | undefined
										totalCacheReads?: number | undefined
								  }
								| undefined
						}
						taskHistory: string[]
						instanceId: string
						userId: string
						workspacePath: string
						appProperties: {
							appName: string
							appVersion: string
							vscodeVersion: string
							platform: string
							editorName: string
							wrapped: boolean
							wrapper: string | null
							wrapperTitle: string | null
							wrapperCode: string | null
							wrapperVersion: string | null
							hostname?: string | undefined
						}
						lastHeartbeat: number
						modes?:
							| {
									name: string
									slug: string
							  }[]
							| undefined
						mode?: string | undefined
						providerProfiles?:
							| {
									name: string
									provider?: string | undefined
							  }[]
							| undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						gitProperties?:
							| {
									repositoryUrl?: string | undefined
									repositoryName?: string | undefined
									defaultBranch?: string | undefined
							  }
							| undefined
						providerProfile?: string | undefined
						isCloudAgent?: boolean | undefined
					}
				>
				timestamp: z.ZodNumber
			},
			"strip",
			z.ZodTypeAny,
			{
				type: ExtensionBridgeEventName.HeartbeatUpdated
				timestamp: number
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			},
			{
				type: ExtensionBridgeEventName.HeartbeatUpdated
				timestamp: number
				instance: {
					task: {
						taskId: string
						taskStatus: TaskStatus
						images?: string[] | undefined
						parentTaskId?: string | undefined
						task?: string | undefined
						taskAsk?:
							| {
									type: "ask" | "say"
									ts: number
									text?: string | undefined
									reasoning?: string | undefined
									ask?:
										| "followup"
										| "command"
										| "command_output"
										| "completion_result"
										| "tool"
										| "api_req_failed"
										| "resume_task"
										| "resume_completed_task"
										| "mistake_limit_reached"
										| "browser_action_launch"
										| "use_mcp_server"
										| "auto_approval_max_req_reached"
										| "payment_required_prompt"
										| "invalid_model"
										| "report_bug"
										| "condense"
										| "checkpoint_restore"
										| undefined
									say?:
										| "command_output"
										| "completion_result"
										| "error"
										| "api_req_started"
										| "api_req_finished"
										| "api_req_retried"
										| "api_req_retry_delayed"
										| "api_req_deleted"
										| "text"
										| "image"
										| "reasoning"
										| "user_feedback"
										| "user_feedback_diff"
										| "shell_integration_warning"
										| "browser_action"
										| "browser_action_result"
										| "mcp_server_request_started"
										| "mcp_server_response"
										| "subtask_result"
										| "checkpoint_saved"
										| "rooignore_error"
										| "diff_error"
										| "condense_context"
										| "condense_context_error"
										| "codebase_search_result"
										| "user_edit_todos"
										| undefined
									images?: string[] | undefined
									partial?: boolean | undefined
									conversationHistoryIndex?: number | undefined
									checkpoint?: Record<string, unknown> | undefined
									progressStatus?:
										| {
												text?: string | undefined
												icon?: string | undefined
										  }
										| undefined
									contextCondense?:
										| {
												cost: number
												prevContextTokens: number
												newContextTokens: number
												summary: string
										  }
										| undefined
									isProtected?: boolean | undefined
									apiProtocol?: "openai" | "anthropic" | undefined
									isAnswered?: boolean | undefined
									metadata?:
										| {
												kiloCode?:
													| {
															commitRange?:
																| {
																		from: string
																		to: string
																		fromTimeStamp?: number | undefined
																  }
																| undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
						queuedMessages?:
							| {
									text: string
									timestamp: number
									id: string
									images?: string[] | undefined
							  }[]
							| undefined
						childTaskId?: string | undefined
						tokenUsage?:
							| {
									totalTokensIn: number
									totalTokensOut: number
									totalCost: number
									contextTokens: number
									totalCacheWrites?: number | undefined
									totalCacheReads?: number | undefined
							  }
							| undefined
					}
					taskHistory: string[]
					instanceId: string
					userId: string
					workspacePath: string
					appProperties: {
						appName: string
						appVersion: string
						vscodeVersion: string
						platform: string
						editorName: string
						wrapped: boolean
						wrapper: string | null
						wrapperTitle: string | null
						wrapperCode: string | null
						wrapperVersion: string | null
						hostname?: string | undefined
					}
					lastHeartbeat: number
					modes?:
						| {
								name: string
								slug: string
						  }[]
						| undefined
					mode?: string | undefined
					providerProfiles?:
						| {
								name: string
								provider?: string | undefined
						  }[]
						| undefined
					taskAsk?:
						| {
								type: "ask" | "say"
								ts: number
								text?: string | undefined
								reasoning?: string | undefined
								ask?:
									| "followup"
									| "command"
									| "command_output"
									| "completion_result"
									| "tool"
									| "api_req_failed"
									| "resume_task"
									| "resume_completed_task"
									| "mistake_limit_reached"
									| "browser_action_launch"
									| "use_mcp_server"
									| "auto_approval_max_req_reached"
									| "payment_required_prompt"
									| "invalid_model"
									| "report_bug"
									| "condense"
									| "checkpoint_restore"
									| undefined
								say?:
									| "command_output"
									| "completion_result"
									| "error"
									| "api_req_started"
									| "api_req_finished"
									| "api_req_retried"
									| "api_req_retry_delayed"
									| "api_req_deleted"
									| "text"
									| "image"
									| "reasoning"
									| "user_feedback"
									| "user_feedback_diff"
									| "shell_integration_warning"
									| "browser_action"
									| "browser_action_result"
									| "mcp_server_request_started"
									| "mcp_server_response"
									| "subtask_result"
									| "checkpoint_saved"
									| "rooignore_error"
									| "diff_error"
									| "condense_context"
									| "condense_context_error"
									| "codebase_search_result"
									| "user_edit_todos"
									| undefined
								images?: string[] | undefined
								partial?: boolean | undefined
								conversationHistoryIndex?: number | undefined
								checkpoint?: Record<string, unknown> | undefined
								progressStatus?:
									| {
											text?: string | undefined
											icon?: string | undefined
									  }
									| undefined
								contextCondense?:
									| {
											cost: number
											prevContextTokens: number
											newContextTokens: number
											summary: string
									  }
									| undefined
								isProtected?: boolean | undefined
								apiProtocol?: "openai" | "anthropic" | undefined
								isAnswered?: boolean | undefined
								metadata?:
									| {
											kiloCode?:
												| {
														commitRange?:
															| {
																	from: string
																	to: string
																	fromTimeStamp?: number | undefined
															  }
															| undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
					gitProperties?:
						| {
								repositoryUrl?: string | undefined
								repositoryName?: string | undefined
								defaultBranch?: string | undefined
						  }
						| undefined
					providerProfile?: string | undefined
					isCloudAgent?: boolean | undefined
				}
			}
		>,
	]
>
export type ExtensionBridgeEvent = z.infer<typeof extensionBridgeEventSchema>
/**
 * ExtensionBridgeCommand
 */
export declare enum ExtensionBridgeCommandName {
	StartTask = "start_task",
	StopTask = "stop_task",
	ResumeTask = "resume_task",
}
export declare const extensionBridgeCommandSchema: z.ZodDiscriminatedUnion<
	"type",
	[
		z.ZodObject<
			{
				type: z.ZodLiteral<ExtensionBridgeCommandName.StartTask>
				instanceId: z.ZodString
				payload: z.ZodObject<
					{
						text: z.ZodString
						images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
						mode: z.ZodOptional<z.ZodString>
						providerProfile: z.ZodOptional<z.ZodString>
					},
					"strip",
					z.ZodTypeAny,
					{
						text: string
						images?: string[] | undefined
						mode?: string | undefined
						providerProfile?: string | undefined
					},
					{
						text: string
						images?: string[] | undefined
						mode?: string | undefined
						providerProfile?: string | undefined
					}
				>
				timestamp: z.ZodNumber
			},
			"strip",
			z.ZodTypeAny,
			{
				type: ExtensionBridgeCommandName.StartTask
				timestamp: number
				payload: {
					text: string
					images?: string[] | undefined
					mode?: string | undefined
					providerProfile?: string | undefined
				}
				instanceId: string
			},
			{
				type: ExtensionBridgeCommandName.StartTask
				timestamp: number
				payload: {
					text: string
					images?: string[] | undefined
					mode?: string | undefined
					providerProfile?: string | undefined
				}
				instanceId: string
			}
		>,
		z.ZodObject<
			{
				type: z.ZodLiteral<ExtensionBridgeCommandName.StopTask>
				instanceId: z.ZodString
				payload: z.ZodObject<
					{
						taskId: z.ZodString
					},
					"strip",
					z.ZodTypeAny,
					{
						taskId: string
					},
					{
						taskId: string
					}
				>
				timestamp: z.ZodNumber
			},
			"strip",
			z.ZodTypeAny,
			{
				type: ExtensionBridgeCommandName.StopTask
				timestamp: number
				payload: {
					taskId: string
				}
				instanceId: string
			},
			{
				type: ExtensionBridgeCommandName.StopTask
				timestamp: number
				payload: {
					taskId: string
				}
				instanceId: string
			}
		>,
		z.ZodObject<
			{
				type: z.ZodLiteral<ExtensionBridgeCommandName.ResumeTask>
				instanceId: z.ZodString
				payload: z.ZodObject<
					{
						taskId: z.ZodString
					},
					"strip",
					z.ZodTypeAny,
					{
						taskId: string
					},
					{
						taskId: string
					}
				>
				timestamp: z.ZodNumber
			},
			"strip",
			z.ZodTypeAny,
			{
				type: ExtensionBridgeCommandName.ResumeTask
				timestamp: number
				payload: {
					taskId: string
				}
				instanceId: string
			},
			{
				type: ExtensionBridgeCommandName.ResumeTask
				timestamp: number
				payload: {
					taskId: string
				}
				instanceId: string
			}
		>,
	]
>
export type ExtensionBridgeCommand = z.infer<typeof extensionBridgeCommandSchema>
/**
 * TaskBridgeEvent
 */
export declare enum TaskBridgeEventName {
	Message = "message",
	TaskModeSwitched = "taskModeSwitched",
	TaskInteractive = "taskInteractive",
}
export declare const taskBridgeEventSchema: z.ZodDiscriminatedUnion<
	"type",
	[
		z.ZodObject<
			{
				type: z.ZodLiteral<TaskBridgeEventName.Message>
				taskId: z.ZodString
				action: z.ZodString
				message: z.ZodObject<
					{
						ts: z.ZodNumber
						type: z.ZodUnion<[z.ZodLiteral<"ask">, z.ZodLiteral<"say">]>
						ask: z.ZodOptional<
							z.ZodEnum<
								[
									"followup",
									"command",
									"command_output",
									"completion_result",
									"tool",
									"api_req_failed",
									"resume_task",
									"resume_completed_task",
									"mistake_limit_reached",
									"browser_action_launch",
									"use_mcp_server",
									"auto_approval_max_req_reached",
									"payment_required_prompt",
									"invalid_model",
									"report_bug",
									"condense",
									"checkpoint_restore",
								]
							>
						>
						say: z.ZodOptional<
							z.ZodEnum<
								[
									"error",
									"api_req_started",
									"api_req_finished",
									"api_req_retried",
									"api_req_retry_delayed",
									"api_req_deleted",
									"text",
									"image",
									"reasoning",
									"completion_result",
									"user_feedback",
									"user_feedback_diff",
									"command_output",
									"shell_integration_warning",
									"browser_action",
									"browser_action_result",
									"mcp_server_request_started",
									"mcp_server_response",
									"subtask_result",
									"checkpoint_saved",
									"rooignore_error",
									"diff_error",
									"condense_context",
									"condense_context_error",
									"codebase_search_result",
									"user_edit_todos",
								]
							>
						>
						text: z.ZodOptional<z.ZodString>
						images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
						partial: z.ZodOptional<z.ZodBoolean>
						reasoning: z.ZodOptional<z.ZodString>
						conversationHistoryIndex: z.ZodOptional<z.ZodNumber>
						checkpoint: z.ZodOptional<z.ZodRecord<z.ZodString, z.ZodUnknown>>
						progressStatus: z.ZodOptional<
							z.ZodObject<
								{
									icon: z.ZodOptional<z.ZodString>
									text: z.ZodOptional<z.ZodString>
								},
								"strip",
								z.ZodTypeAny,
								{
									text?: string | undefined
									icon?: string | undefined
								},
								{
									text?: string | undefined
									icon?: string | undefined
								}
							>
						>
						contextCondense: z.ZodOptional<
							z.ZodObject<
								{
									cost: z.ZodNumber
									prevContextTokens: z.ZodNumber
									newContextTokens: z.ZodNumber
									summary: z.ZodString
								},
								"strip",
								z.ZodTypeAny,
								{
									cost: number
									prevContextTokens: number
									newContextTokens: number
									summary: string
								},
								{
									cost: number
									prevContextTokens: number
									newContextTokens: number
									summary: string
								}
							>
						>
						isProtected: z.ZodOptional<z.ZodBoolean>
						apiProtocol: z.ZodOptional<z.ZodUnion<[z.ZodLiteral<"openai">, z.ZodLiteral<"anthropic">]>>
						isAnswered: z.ZodOptional<z.ZodBoolean>
						metadata: z.ZodOptional<
							z.ZodObject<
								{
									kiloCode: z.ZodOptional<
										z.ZodObject<
											{
												commitRange: z.ZodOptional<
													z.ZodObject<
														{
															from: z.ZodString
															fromTimeStamp: z.ZodOptional<z.ZodNumber>
															to: z.ZodString
														},
														"strip",
														z.ZodTypeAny,
														{
															from: string
															to: string
															fromTimeStamp?: number | undefined
														},
														{
															from: string
															to: string
															fromTimeStamp?: number | undefined
														}
													>
												>
											},
											"strip",
											z.ZodTypeAny,
											{
												commitRange?:
													| {
															from: string
															to: string
															fromTimeStamp?: number | undefined
													  }
													| undefined
											},
											{
												commitRange?:
													| {
															from: string
															to: string
															fromTimeStamp?: number | undefined
													  }
													| undefined
											}
										>
									>
								},
								"strip",
								z.ZodTypeAny,
								{
									kiloCode?:
										| {
												commitRange?:
													| {
															from: string
															to: string
															fromTimeStamp?: number | undefined
													  }
													| undefined
										  }
										| undefined
								},
								{
									kiloCode?:
										| {
												commitRange?:
													| {
															from: string
															to: string
															fromTimeStamp?: number | undefined
													  }
													| undefined
										  }
										| undefined
								}
							>
						>
					},
					"strip",
					z.ZodTypeAny,
					{
						type: "ask" | "say"
						ts: number
						text?: string | undefined
						reasoning?: string | undefined
						ask?:
							| "followup"
							| "command"
							| "command_output"
							| "completion_result"
							| "tool"
							| "api_req_failed"
							| "resume_task"
							| "resume_completed_task"
							| "mistake_limit_reached"
							| "browser_action_launch"
							| "use_mcp_server"
							| "auto_approval_max_req_reached"
							| "payment_required_prompt"
							| "invalid_model"
							| "report_bug"
							| "condense"
							| "checkpoint_restore"
							| undefined
						say?:
							| "command_output"
							| "completion_result"
							| "error"
							| "api_req_started"
							| "api_req_finished"
							| "api_req_retried"
							| "api_req_retry_delayed"
							| "api_req_deleted"
							| "text"
							| "image"
							| "reasoning"
							| "user_feedback"
							| "user_feedback_diff"
							| "shell_integration_warning"
							| "browser_action"
							| "browser_action_result"
							| "mcp_server_request_started"
							| "mcp_server_response"
							| "subtask_result"
							| "checkpoint_saved"
							| "rooignore_error"
							| "diff_error"
							| "condense_context"
							| "condense_context_error"
							| "codebase_search_result"
							| "user_edit_todos"
							| undefined
						images?: string[] | undefined
						partial?: boolean | undefined
						conversationHistoryIndex?: number | undefined
						checkpoint?: Record<string, unknown> | undefined
						progressStatus?:
							| {
									text?: string | undefined
									icon?: string | undefined
							  }
							| undefined
						contextCondense?:
							| {
									cost: number
									prevContextTokens: number
									newContextTokens: number
									summary: string
							  }
							| undefined
						isProtected?: boolean | undefined
						apiProtocol?: "openai" | "anthropic" | undefined
						isAnswered?: boolean | undefined
						metadata?:
							| {
									kiloCode?:
										| {
												commitRange?:
													| {
															from: string
															to: string
															fromTimeStamp?: number | undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
					},
					{
						type: "ask" | "say"
						ts: number
						text?: string | undefined
						reasoning?: string | undefined
						ask?:
							| "followup"
							| "command"
							| "command_output"
							| "completion_result"
							| "tool"
							| "api_req_failed"
							| "resume_task"
							| "resume_completed_task"
							| "mistake_limit_reached"
							| "browser_action_launch"
							| "use_mcp_server"
							| "auto_approval_max_req_reached"
							| "payment_required_prompt"
							| "invalid_model"
							| "report_bug"
							| "condense"
							| "checkpoint_restore"
							| undefined
						say?:
							| "command_output"
							| "completion_result"
							| "error"
							| "api_req_started"
							| "api_req_finished"
							| "api_req_retried"
							| "api_req_retry_delayed"
							| "api_req_deleted"
							| "text"
							| "image"
							| "reasoning"
							| "user_feedback"
							| "user_feedback_diff"
							| "shell_integration_warning"
							| "browser_action"
							| "browser_action_result"
							| "mcp_server_request_started"
							| "mcp_server_response"
							| "subtask_result"
							| "checkpoint_saved"
							| "rooignore_error"
							| "diff_error"
							| "condense_context"
							| "condense_context_error"
							| "codebase_search_result"
							| "user_edit_todos"
							| undefined
						images?: string[] | undefined
						partial?: boolean | undefined
						conversationHistoryIndex?: number | undefined
						checkpoint?: Record<string, unknown> | undefined
						progressStatus?:
							| {
									text?: string | undefined
									icon?: string | undefined
							  }
							| undefined
						contextCondense?:
							| {
									cost: number
									prevContextTokens: number
									newContextTokens: number
									summary: string
							  }
							| undefined
						isProtected?: boolean | undefined
						apiProtocol?: "openai" | "anthropic" | undefined
						isAnswered?: boolean | undefined
						metadata?:
							| {
									kiloCode?:
										| {
												commitRange?:
													| {
															from: string
															to: string
															fromTimeStamp?: number | undefined
													  }
													| undefined
										  }
										| undefined
							  }
							| undefined
					}
				>
			},
			"strip",
			z.ZodTypeAny,
			{
				message: {
					type: "ask" | "say"
					ts: number
					text?: string | undefined
					reasoning?: string | undefined
					ask?:
						| "followup"
						| "command"
						| "command_output"
						| "completion_result"
						| "tool"
						| "api_req_failed"
						| "resume_task"
						| "resume_completed_task"
						| "mistake_limit_reached"
						| "browser_action_launch"
						| "use_mcp_server"
						| "auto_approval_max_req_reached"
						| "payment_required_prompt"
						| "invalid_model"
						| "report_bug"
						| "condense"
						| "checkpoint_restore"
						| undefined
					say?:
						| "command_output"
						| "completion_result"
						| "error"
						| "api_req_started"
						| "api_req_finished"
						| "api_req_retried"
						| "api_req_retry_delayed"
						| "api_req_deleted"
						| "text"
						| "image"
						| "reasoning"
						| "user_feedback"
						| "user_feedback_diff"
						| "shell_integration_warning"
						| "browser_action"
						| "browser_action_result"
						| "mcp_server_request_started"
						| "mcp_server_response"
						| "subtask_result"
						| "checkpoint_saved"
						| "rooignore_error"
						| "diff_error"
						| "condense_context"
						| "condense_context_error"
						| "codebase_search_result"
						| "user_edit_todos"
						| undefined
					images?: string[] | undefined
					partial?: boolean | undefined
					conversationHistoryIndex?: number | undefined
					checkpoint?: Record<string, unknown> | undefined
					progressStatus?:
						| {
								text?: string | undefined
								icon?: string | undefined
						  }
						| undefined
					contextCondense?:
						| {
								cost: number
								prevContextTokens: number
								newContextTokens: number
								summary: string
						  }
						| undefined
					isProtected?: boolean | undefined
					apiProtocol?: "openai" | "anthropic" | undefined
					isAnswered?: boolean | undefined
					metadata?:
						| {
								kiloCode?:
									| {
											commitRange?:
												| {
														from: string
														to: string
														fromTimeStamp?: number | undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
				}
				type: TaskBridgeEventName.Message
				taskId: string
				action: string
			},
			{
				message: {
					type: "ask" | "say"
					ts: number
					text?: string | undefined
					reasoning?: string | undefined
					ask?:
						| "followup"
						| "command"
						| "command_output"
						| "completion_result"
						| "tool"
						| "api_req_failed"
						| "resume_task"
						| "resume_completed_task"
						| "mistake_limit_reached"
						| "browser_action_launch"
						| "use_mcp_server"
						| "auto_approval_max_req_reached"
						| "payment_required_prompt"
						| "invalid_model"
						| "report_bug"
						| "condense"
						| "checkpoint_restore"
						| undefined
					say?:
						| "command_output"
						| "completion_result"
						| "error"
						| "api_req_started"
						| "api_req_finished"
						| "api_req_retried"
						| "api_req_retry_delayed"
						| "api_req_deleted"
						| "text"
						| "image"
						| "reasoning"
						| "user_feedback"
						| "user_feedback_diff"
						| "shell_integration_warning"
						| "browser_action"
						| "browser_action_result"
						| "mcp_server_request_started"
						| "mcp_server_response"
						| "subtask_result"
						| "checkpoint_saved"
						| "rooignore_error"
						| "diff_error"
						| "condense_context"
						| "condense_context_error"
						| "codebase_search_result"
						| "user_edit_todos"
						| undefined
					images?: string[] | undefined
					partial?: boolean | undefined
					conversationHistoryIndex?: number | undefined
					checkpoint?: Record<string, unknown> | undefined
					progressStatus?:
						| {
								text?: string | undefined
								icon?: string | undefined
						  }
						| undefined
					contextCondense?:
						| {
								cost: number
								prevContextTokens: number
								newContextTokens: number
								summary: string
						  }
						| undefined
					isProtected?: boolean | undefined
					apiProtocol?: "openai" | "anthropic" | undefined
					isAnswered?: boolean | undefined
					metadata?:
						| {
								kiloCode?:
									| {
											commitRange?:
												| {
														from: string
														to: string
														fromTimeStamp?: number | undefined
												  }
												| undefined
									  }
									| undefined
						  }
						| undefined
				}
				type: TaskBridgeEventName.Message
				taskId: string
				action: string
			}
		>,
		z.ZodObject<
			{
				type: z.ZodLiteral<TaskBridgeEventName.TaskModeSwitched>
				taskId: z.ZodString
				mode: z.ZodString
			},
			"strip",
			z.ZodTypeAny,
			{
				type: TaskBridgeEventName.TaskModeSwitched
				taskId: string
				mode: string
			},
			{
				type: TaskBridgeEventName.TaskModeSwitched
				taskId: string
				mode: string
			}
		>,
		z.ZodObject<
			{
				type: z.ZodLiteral<TaskBridgeEventName.TaskInteractive>
				taskId: z.ZodString
			},
			"strip",
			z.ZodTypeAny,
			{
				type: TaskBridgeEventName.TaskInteractive
				taskId: string
			},
			{
				type: TaskBridgeEventName.TaskInteractive
				taskId: string
			}
		>,
	]
>
export type TaskBridgeEvent = z.infer<typeof taskBridgeEventSchema>
/**
 * TaskBridgeCommand
 */
export declare enum TaskBridgeCommandName {
	Message = "message",
	ApproveAsk = "approve_ask",
	DenyAsk = "deny_ask",
}
export declare const taskBridgeCommandSchema: z.ZodDiscriminatedUnion<
	"type",
	[
		z.ZodObject<
			{
				type: z.ZodLiteral<TaskBridgeCommandName.Message>
				taskId: z.ZodString
				payload: z.ZodObject<
					{
						text: z.ZodString
						images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
						mode: z.ZodOptional<z.ZodString>
						providerProfile: z.ZodOptional<z.ZodString>
					},
					"strip",
					z.ZodTypeAny,
					{
						text: string
						images?: string[] | undefined
						mode?: string | undefined
						providerProfile?: string | undefined
					},
					{
						text: string
						images?: string[] | undefined
						mode?: string | undefined
						providerProfile?: string | undefined
					}
				>
				timestamp: z.ZodNumber
			},
			"strip",
			z.ZodTypeAny,
			{
				type: TaskBridgeCommandName.Message
				timestamp: number
				taskId: string
				payload: {
					text: string
					images?: string[] | undefined
					mode?: string | undefined
					providerProfile?: string | undefined
				}
			},
			{
				type: TaskBridgeCommandName.Message
				timestamp: number
				taskId: string
				payload: {
					text: string
					images?: string[] | undefined
					mode?: string | undefined
					providerProfile?: string | undefined
				}
			}
		>,
		z.ZodObject<
			{
				type: z.ZodLiteral<TaskBridgeCommandName.ApproveAsk>
				taskId: z.ZodString
				payload: z.ZodObject<
					{
						text: z.ZodOptional<z.ZodString>
						images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
					},
					"strip",
					z.ZodTypeAny,
					{
						text?: string | undefined
						images?: string[] | undefined
					},
					{
						text?: string | undefined
						images?: string[] | undefined
					}
				>
				timestamp: z.ZodNumber
			},
			"strip",
			z.ZodTypeAny,
			{
				type: TaskBridgeCommandName.ApproveAsk
				timestamp: number
				taskId: string
				payload: {
					text?: string | undefined
					images?: string[] | undefined
				}
			},
			{
				type: TaskBridgeCommandName.ApproveAsk
				timestamp: number
				taskId: string
				payload: {
					text?: string | undefined
					images?: string[] | undefined
				}
			}
		>,
		z.ZodObject<
			{
				type: z.ZodLiteral<TaskBridgeCommandName.DenyAsk>
				taskId: z.ZodString
				payload: z.ZodObject<
					{
						text: z.ZodOptional<z.ZodString>
						images: z.ZodOptional<z.ZodArray<z.ZodString, "many">>
					},
					"strip",
					z.ZodTypeAny,
					{
						text?: string | undefined
						images?: string[] | undefined
					},
					{
						text?: string | undefined
						images?: string[] | undefined
					}
				>
				timestamp: z.ZodNumber
			},
			"strip",
			z.ZodTypeAny,
			{
				type: TaskBridgeCommandName.DenyAsk
				timestamp: number
				taskId: string
				payload: {
					text?: string | undefined
					images?: string[] | undefined
				}
			},
			{
				type: TaskBridgeCommandName.DenyAsk
				timestamp: number
				taskId: string
				payload: {
					text?: string | undefined
					images?: string[] | undefined
				}
			}
		>,
	]
>
export type TaskBridgeCommand = z.infer<typeof taskBridgeCommandSchema>
/**
 * ExtensionSocketEvents
 */
export declare enum ExtensionSocketEvents {
	CONNECTED = "extension:connected",
	REGISTER = "extension:register",
	UNREGISTER = "extension:unregister",
	HEARTBEAT = "extension:heartbeat",
	EVENT = "extension:event", // event from extension instance
	RELAYED_EVENT = "extension:relayed_event", // relay from server
	COMMAND = "extension:command", // command from user
	RELAYED_COMMAND = "extension:relayed_command",
}
/**
 * TaskSocketEvents
 */
export declare enum TaskSocketEvents {
	JOIN = "task:join",
	LEAVE = "task:leave",
	EVENT = "task:event", // event from extension task
	RELAYED_EVENT = "task:relayed_event", // relay from server
	COMMAND = "task:command", // command from user
	RELAYED_COMMAND = "task:relayed_command",
}
/**
 * `emit()` Response Types
 */
export type JoinResponse = {
	success: boolean
	error?: string
	taskId?: string
	timestamp?: string
}
export type LeaveResponse = {
	success: boolean
	taskId?: string
	timestamp?: string
}
/**
 * UsageStats
 */
export declare const usageStatsSchema: z.ZodObject<
	{
		success: z.ZodBoolean
		data: z.ZodObject<
			{
				dates: z.ZodArray<z.ZodString, "many">
				tasks: z.ZodArray<z.ZodNumber, "many">
				tokens: z.ZodArray<z.ZodNumber, "many">
				costs: z.ZodArray<z.ZodNumber, "many">
				totals: z.ZodObject<
					{
						tasks: z.ZodNumber
						tokens: z.ZodNumber
						cost: z.ZodNumber
					},
					"strip",
					z.ZodTypeAny,
					{
						cost: number
						tasks: number
						tokens: number
					},
					{
						cost: number
						tasks: number
						tokens: number
					}
				>
			},
			"strip",
			z.ZodTypeAny,
			{
				dates: string[]
				tasks: number[]
				tokens: number[]
				costs: number[]
				totals: {
					cost: number
					tasks: number
					tokens: number
				}
			},
			{
				dates: string[]
				tasks: number[]
				tokens: number[]
				costs: number[]
				totals: {
					cost: number
					tasks: number
					tokens: number
				}
			}
		>
		period: z.ZodNumber
	},
	"strip",
	z.ZodTypeAny,
	{
		data: {
			dates: string[]
			tasks: number[]
			tokens: number[]
			costs: number[]
			totals: {
				cost: number
				tasks: number
				tokens: number
			}
		}
		success: boolean
		period: number
	},
	{
		data: {
			dates: string[]
			tasks: number[]
			tokens: number[]
			costs: number[]
			totals: {
				cost: number
				tasks: number
				tokens: number
			}
		}
		success: boolean
		period: number
	}
>
export type UsageStats = z.infer<typeof usageStatsSchema>
export {}
//# sourceMappingURL=cloud.d.ts.map
